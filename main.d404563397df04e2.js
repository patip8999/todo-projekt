"use strict";(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[179],{2011:(ot,Te,P)=>{P.d(Te,{hO:()=>ze,xv:()=>ue,Dh:()=>ce,GT:()=>fe,cc:()=>Ae,on:()=>j,pX:()=>X});var m=P(5e3),Z=P(127),O=P(5813);ot=P.hmd(ot);const oe=["ngOnDestroy"],X=(we,Xe,Ke,De={})=>new Proxy(we,{get:(ye,ve)=>Ke.runOutsideAngular(()=>{var He;if(we[ve])return(null===(He=null==De?void 0:De.spy)||void 0===He?void 0:He.get)&&De.spy.get(ve,we[ve]),we[ve];if(oe.indexOf(ve)>-1)return()=>{};const je=Xe.toPromise().then(ne=>{const We=ne&&ne[ve];return"function"==typeof We?We.bind(ne):We&&We.then?We.then(J=>Ke.run(()=>J)):Ke.run(()=>We)});return new Proxy(()=>{},{get:(ne,We)=>je[We],apply:(ne,We,J)=>je.then(se=>{var te;const Ee=se&&se(...J);return(null===(te=null==De?void 0:De.spy)||void 0===te?void 0:te.apply)&&De.spy.apply(ve,J,Ee),Ee})})})}),fe=(we,Xe)=>{Xe.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(De=>{Object.defineProperty(we.prototype,De,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,De))})})};class re{constructor(Xe){return Xe}}const ce=new m.OlP("angularfire2.app.options"),ue=new m.OlP("angularfire2.app.name");function j(we,Xe,Ke){const ye="object"==typeof Ke&&Ke||{};ye.name=ye.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const He=Z.Z.apps.filter(je=>je&&je.name===ye.name)[0]||Xe.runOutsideAngular(()=>Z.Z.initializeApp(we,ye));try{JSON.stringify(we)!==JSON.stringify(He.options)&&$("error",`${He.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new re(He)}const $=(we,...Xe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[we](...Xe)},Q={provide:re,useFactory:j,deps:[ce,m.R0b,[new m.FiY,ue]]};let ze=(()=>{class we{constructor(Ke){Z.Z.registerVersion("angularfire",O.q4.full,"core"),Z.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Z.Z.registerVersion("angular",m.q4F.full,Ke.toString())}static initializeApp(Ke,De){return{ngModule:we,providers:[{provide:ce,useValue:Ke},{provide:ue,useValue:De}]}}}return we.\u0275fac=function(Ke){return new(Ke||we)(m.LFG(m.Lbi))},we.\u0275mod=m.oAB({type:we}),we.\u0275inj=m.cJS({providers:[Q]}),we})();function Ae(we,Xe,Ke,De,ye){const[,ve,He]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===we)||[];if(ve)return function Ne(we,Xe){try{return we.toString()===Xe.toString()}catch(Ke){return we===Xe}}(ye,He)||(de("error",`${Xe} was already initialized on the ${Ke} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:ye,was:He})),ve;{const je=De();return globalThis.\u0275AngularfireInstanceCache.push([we,je,ye]),je}}const Le=!!ot.hot,de=(we,...Xe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[we](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Te,P)=>{P.d(Te,{q4:()=>Bl,iC:()=>ql,HU:()=>xu,vb:()=>wd,JM:()=>Zs});var m=P(5e3),Z=P(5867),O=P(5861),oe=P(9681),X=P(2090),fe=P(4859),re=P(1877);const ce="@firebase/installations",$="w:0.5.8",Q="FIS_v2",we=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(D){return D instanceof X.ZR&&D.code.includes("request-failed")}function Ke({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:J(D.expiresIn),creationTime:Date.now()}}function ye(D,C){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return we.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function He({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function je(D,{refreshToken:C}){const N=He(D);return N.append("Authorization",function se(D){return`${Q} ${D}`}(C)),N}function ne(D){return We.apply(this,arguments)}function We(){return(We=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function J(D){return Number(D.replace("s","000"))}function te(D,C){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:N}){const F=Ke(D),W=He(D),ee=C.getImmediate({optional:!0});if(ee){const bt=yield ee.getHeartbeatsHeader();bt&&W.append("x-firebase-client",bt)}const Me={method:"POST",headers:W,body:JSON.stringify({fid:N,authVersion:Q,appId:D.appId,sdkVersion:$})},Ye=yield ne(()=>fetch(F,Me));if(Ye.ok){const bt=yield Ye.json();return{fid:bt.fid||N,registrationStatus:2,refreshToken:bt.refreshToken,authToken:De(bt.authToken)}}throw yield ye("Create Installation",Ye)})).apply(this,arguments)}function pe(D){return new Promise(C=>{setTimeout(C,D)})}const Dt=/^[cdef][\w-]{21}$/;function an(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const N=function Ge(D){return function Fe(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Dt.test(N)?N:""}catch(D){return""}}function qt(D){return`${D.appName}!${D.appId}`}const tr=new Map;function Dn(D,C){const N=qt(D);Qt(N,C),function zt(D,C){const N=function si(){return!lr&&"BroadcastChannel"in self&&(lr=new BroadcastChannel("[Firebase] FID Change"),lr.onmessage=D=>{Qt(D.data.key,D.data.fid)}),lr}();N&&N.postMessage({key:D,fid:C}),function As(){0===tr.size&&lr&&(lr.close(),lr=null)}()}(N,C)}function Qt(D,C){const N=tr.get(D);if(N)for(const F of N)F(C)}let lr=null;const Pr="firebase-installations-store";let rs=null;function is(){return rs||(rs=(0,X.X3)("firebase-installations-database",1,(D,C)=>{0===C&&D.createObjectStore(Pr)})),rs}function lt(D,C){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(D,C){const N=qt(D),W=(yield is()).transaction(Pr,"readwrite"),ee=W.objectStore(Pr),Se=yield ee.get(N);return yield ee.put(C,N),yield W.complete,(!Se||Se.fid!==C.fid)&&Dn(D,C.fid),C})).apply(this,arguments)}function nr(D){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,O.Z)(function*(D){const C=qt(D),F=(yield is()).transaction(Pr,"readwrite");yield F.objectStore(Pr).delete(C),yield F.complete})).apply(this,arguments)}function oi(D,C){return so.apply(this,arguments)}function so(){return(so=(0,O.Z)(function*(D,C){const N=qt(D),W=(yield is()).transaction(Pr,"readwrite"),ee=W.objectStore(Pr),Se=yield ee.get(N),Me=C(Se);return void 0===Me?yield ee.delete(N):yield ee.put(Me,N),yield W.complete,Me&&(!Se||Se.fid!==Me.fid)&&Dn(D,Me.fid),Me})).apply(this,arguments)}function vn(D){return rr.apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*(D){let C;const N=yield oi(D.appConfig,F=>{const W=Ss(F),ee=Ca(D,W);return C=ee.registrationPromise,ee.installationEntry});return""===N.fid?{installationEntry:yield C}:{installationEntry:N,registrationPromise:C}})).apply(this,arguments)}function Ss(D){return Gt(D||{fid:an(),registrationStatus:0})}function Ca(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(we.create("app-offline"))};const N={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function Wt(D,C){return rt.apply(this,arguments)}(D,N);return{installationEntry:N,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:vt(D)}:{installationEntry:C}}function rt(){return(rt=(0,O.Z)(function*(D,C){try{const N=yield te(D,C);return lt(D.appConfig,N)}catch(N){throw Xe(N)&&409===N.customData.serverCode?yield nr(D.appConfig):yield lt(D.appConfig,{fid:C.fid,registrationStatus:0}),N}})).apply(this,arguments)}function vt(D){return cr.apply(this,arguments)}function cr(){return(cr=(0,O.Z)(function*(D){let C=yield ji(D.appConfig);for(;1===C.registrationStatus;)yield pe(100),C=yield ji(D.appConfig);if(0===C.registrationStatus){const{installationEntry:N,registrationPromise:F}=yield vn(D);return F||N}return C})).apply(this,arguments)}function ji(D){return oi(D,C=>{if(!C)throw we.create("installation-not-found");return Gt(C)})}function Gt(D){return function oo(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Er(D,C){return dr.apply(this,arguments)}function dr(){return(dr=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},N){const F=ct(D,N),W=je(D,N),ee=C.getImmediate({optional:!0});if(ee){const bt=yield ee.getHeartbeatsHeader();bt&&W.append("x-firebase-client",bt)}const Me={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:$,appId:D.appId}})},Ye=yield ne(()=>fetch(F,Me));if(Ye.ok)return De(yield Ye.json());throw yield ye("Generate Auth Token",Ye)})).apply(this,arguments)}function ct(D,{fid:C}){return`${Ke(D)}/${C}/authTokens:generate`}function wr(D){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(D,C=!1){let N;const F=yield oi(D.appConfig,ee=>{if(!Lt(ee))throw we.create("not-registered");const Se=ee.authToken;if(!C&&B(Se))return ee;if(1===Se.requestStatus)return N=Ze(D,C),ee;{if(!navigator.onLine)throw we.create("app-offline");const Me=G(ee);return N=dt(D,Me),Me}});return N?yield N:F.authToken})).apply(this,arguments)}function Ze(D,C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(D,C){let N=yield Qe(D.appConfig);for(;1===N.authToken.requestStatus;)yield pe(100),N=yield Qe(D.appConfig);const F=N.authToken;return 0===F.requestStatus?wr(D,C):F})).apply(this,arguments)}function Qe(D){return oi(D,C=>{if(!Lt(C))throw we.create("not-registered");return function le(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function dt(D,C){return $t.apply(this,arguments)}function $t(){return($t=(0,O.Z)(function*(D,C){try{const N=yield Er(D,C),F=Object.assign(Object.assign({},C),{authToken:N});return yield lt(D.appConfig,F),N}catch(N){if(!Xe(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield lt(D.appConfig,F)}else yield nr(D.appConfig);throw N}})).apply(this,arguments)}function Lt(D){return void 0!==D&&2===D.registrationStatus}function B(D){return 2===D.requestStatus&&!function L(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function G(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function Ve(){return(Ve=(0,O.Z)(function*(D){const C=D,{installationEntry:N,registrationPromise:F}=yield vn(C);return F?F.catch(console.error):wr(C).catch(console.error),N.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,O.Z)(function*(D,C=!1){const N=D;return yield br(N),(yield wr(N,C)).token})).apply(this,arguments)}function br(D){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,O.Z)(function*(D){const{registrationPromise:C}=yield vn(D);C&&(yield C)})).apply(this,arguments)}function Yn(D){return we.create("missing-app-config-values",{valueName:D})}const Aa="installations",Re=D=>{const C=D.getProvider("app").getImmediate(),N=function ss(D){if(!D||!D.options)throw Yn("App Configuration");if(!D.name)throw Yn("App Name");const C=["projectId","apiKey","appId"];for(const N of C)if(!D.options[N])throw Yn(N);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:N,heartbeatServiceProvider:(0,oe._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Ot=D=>{const C=D.getProvider("app").getImmediate(),N=(0,oe._getProvider)(C,Aa).getImmediate();return{getId:()=>function Y(D){return Ve.apply(this,arguments)}(N),getToken:W=>function mt(D){return Jt.apply(this,arguments)}(N,W)}};(function pn(){(0,oe._registerComponent)(new fe.wA(Aa,Re,"PUBLIC")),(0,oe._registerComponent)(new fe.wA("installations-internal",Ot,"PRIVATE"))})(),(0,oe.registerVersion)(ce,"0.5.8"),(0,oe.registerVersion)(ce,"0.5.8","esm2017");const hr="@firebase/remote-config",Pn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Fh{constructor(C,N,F,W){this.client=C,this.storage=N,this.storageCache=F,this.logger=W}isCachedDataFresh(C,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-N,W=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${W}.`),W}fetch(C){var N=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(W&&N.isCachedDataFresh(C.cacheMaxAgeMillis,F))return W;C.eTag=W&&W.eTag;const ee=yield N.client.fetch(C),Se=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Se.push(N.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Se),ee})()}}function ed(D=navigator){return D.languages&&D.languages[0]||D.language}class cu{constructor(C,N,F,W,ee,Se){this.firebaseInstallations=C,this.sdkVersion=N,this.namespace=F,this.projectId=W,this.apiKey=ee,this.appId=Se}fetch(C){var N=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Me={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ye={sdk_version:N.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:N.appId,language_code:ed()},bt={method:"POST",headers:Me,body:JSON.stringify(Ye)},Rt=fetch(Se,bt),Ct=new Promise((gi,Oi)=>{C.signal.addEventListener(()=>{const bo=new Error("The operation was aborted.");bo.name="AbortError",Oi(bo)})});let qn;try{yield Promise.race([Rt,Ct]),qn=yield Rt}catch(gi){let Oi="fetch-client-network";throw"AbortError"===gi.name&&(Oi="fetch-timeout"),Pn.create(Oi,{originalErrorMessage:gi.message})}let Mn=qn.status;const na=qn.headers.get("ETag")||void 0;let wo,Fr;if(200===qn.status){let gi;try{gi=yield qn.json()}catch(Oi){throw Pn.create("fetch-client-parse",{originalErrorMessage:Oi.message})}wo=gi.entries,Fr=gi.state}if("INSTANCE_STATE_UNSPECIFIED"===Fr?Mn=500:"NO_CHANGE"===Fr?Mn=304:("NO_TEMPLATE"===Fr||"EMPTY_CONFIG"===Fr)&&(wo={}),304!==Mn&&200!==Mn)throw Pn.create("fetch-status",{httpStatus:Mn});return{status:Mn,eTag:na,config:wo}})()}}class qp{constructor(C,N){this.client=C,this.storage=N}fetch(C){var N=this;return(0,O.Z)(function*(){const F=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:N,backoffCount:F}){var W=this;return(0,O.Z)(function*(){yield function $n(D,C){return new Promise((N,F)=>{const W=Math.max(C-Date.now(),0),ee=setTimeout(N,W);D.addEventListener(()=>{clearTimeout(ee),F(Pn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,N);try{const ee=yield W.client.fetch(C);return yield W.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function td(D){if(!(D instanceof X.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ee))throw ee;const Se={throttleEndTimeMillis:Date.now()+(0,X.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(Se),W.attemptFetch(C,Se)}})()}}class ml{constructor(C,N,F,W,ee){this.app=C,this._client=N,this._storageCache=F,this._storage=W,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function yl(D,C){const N=D.target.error||void 0;return Pn.create(C,{originalErrorMessage:N&&N.message})}const Os="app_namespace_store";class Lh{constructor(C,N,F,W=function Kp(){return new Promise((D,C)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=F=>{C(yl(F,"storage-open"))},N.onsuccess=F=>{D(F.target.result)},N.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Os,{keyPath:"compositeKey"})}}catch(N){C(Pn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=C,this.appName=N,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var N=this;return(0,O.Z)(function*(){const F=yield N.openDbPromise;return new Promise((W,ee)=>{const Me=F.transaction([Os],"readonly").objectStore(Os),Ye=N.createCompositeKey(C);try{const bt=Me.get(Ye);bt.onerror=Rt=>{ee(yl(Rt,"storage-get"))},bt.onsuccess=Rt=>{const Ct=Rt.target.result;W(Ct?Ct.value:void 0)}}catch(bt){ee(Pn.create("storage-get",{originalErrorMessage:bt&&bt.message}))}})})()}set(C,N){var F=this;return(0,O.Z)(function*(){const W=yield F.openDbPromise;return new Promise((ee,Se)=>{const Ye=W.transaction([Os],"readwrite").objectStore(Os),bt=F.createCompositeKey(C);try{const Rt=Ye.put({compositeKey:bt,value:N});Rt.onerror=Ct=>{Se(yl(Ct,"storage-set"))},Rt.onsuccess=()=>{ee()}}catch(Rt){Se(Pn.create("storage-set",{originalErrorMessage:Rt&&Rt.message}))}})})()}delete(C){var N=this;return(0,O.Z)(function*(){const F=yield N.openDbPromise;return new Promise((W,ee)=>{const Me=F.transaction([Os],"readwrite").objectStore(Os),Ye=N.createCompositeKey(C);try{const bt=Me.delete(Ye);bt.onerror=Rt=>{ee(yl(Rt,"storage-delete"))},bt.onsuccess=()=>{W()}}catch(bt){ee(Pn.create("storage-delete",{originalErrorMessage:bt&&bt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class rd{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const N=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),W=C.storage.getActiveConfig(),ee=yield N;ee&&(C.lastFetchStatus=ee);const Se=yield F;Se&&(C.lastSuccessfulFetchTimestampMillis=Se);const Me=yield W;Me&&(C.activeConfig=Me)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function lo(){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}!function jo(){(0,oe._registerComponent)(new fe.wA("remote-config",function D(C,{instanceIdentifier:N}){const F=C.getProvider("app").getImmediate(),W=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pn.create("registration-window");if(!(0,X.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Se,appId:Me}=F.options;if(!ee)throw Pn.create("registration-project-id");if(!Se)throw Pn.create("registration-api-key");if(!Me)throw Pn.create("registration-app-id");const Ye=new Lh(Me,F.name,N=N||"firebase"),bt=new rd(Ye),Rt=new re.Yd(hr);Rt.logLevel=re.in.ERROR;const Ct=new cu(W,oe.SDK_VERSION,N,ee,Se,Me),qn=new qp(Ct,Ye),Mn=new Fh(qn,Ye,bt,Rt),na=new ml(F,Mn,bt,Ye,Rt);return function Ii(D){const C=(0,X.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(na),na},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(hr,"0.3.7"),(0,oe.registerVersion)(hr,"0.3.7","esm2017")}();const _l="/firebase-messaging-sw.js",Ps="/firebase-cloud-messaging-push-scope",zr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",co="google.c.a.c_id",Ma="google.c.a.c_l",id="google.c.a.ts",Zp="google.c.a.e";var ks=(()=>{return(D=ks||(ks={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ks;var D})();function li(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hu(D){const N=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(N),W=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)W[ee]=F.charCodeAt(ee);return W}const fu="fcm_token_details_db",pr="fcm_token_object_Store";function Uh(D){return pu.apply(this,arguments)}function pu(){return pu=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(fu))return null;let C=null;return(yield(0,X.X3)(fu,5,function(){var F=(0,O.Z)(function*(W,ee,Se,Me){var Ye;if(ee<2||!W.objectStoreNames.contains(pr))return;const bt=Me.objectStore(pr),Rt=yield bt.index("fcmSenderId").get(D);if(yield bt.clear(),Rt)if(2===ee){const Ct=Rt;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;C={token:Ct.fcmToken,createTime:null!==(Ye=Ct.createTime)&&void 0!==Ye?Ye:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:li(Ct.vapidKey)}}}else if(3===ee){const Ct=Rt;C={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:li(Ct.auth),p256dh:li(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:li(Ct.vapidKey)}}}else if(4===ee){const Ct=Rt;C={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:li(Ct.auth),p256dh:li(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:li(Ct.vapidKey)}}}});return function(W,ee,Se,Me){return F.apply(this,arguments)}}())).close(),yield(0,X.Lj)(fu),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),sd(C)?C:null}),pu.apply(this,arguments)}function sd(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ls="firebase-messaging-store";let xa=null;function vl(){return xa||(xa=(0,X.X3)("firebase-messaging-database",1,(D,C)=>{0===C&&D.createObjectStore(ls)})),xa}function yn(D){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,O.Z)(function*(D){const C=fo(D),F=yield(yield vl()).transaction(ls).objectStore(ls).get(C);if(F)return F;{const W=yield Uh(D.appConfig.senderId);if(W)return yield Fs(D,W),W}})).apply(this,arguments)}function Fs(D,C){return cn.apply(this,arguments)}function cn(){return(cn=(0,O.Z)(function*(D,C){const N=fo(D),W=(yield vl()).transaction(ls,"readwrite");return yield W.objectStore(ls).put(C,N),yield W.complete,C})).apply(this,arguments)}function od(D){return ho.apply(this,arguments)}function ho(){return(ho=(0,O.Z)(function*(D){const C=fo(D),F=(yield vl()).transaction(ls,"readwrite");yield F.objectStore(ls).delete(C),yield F.complete})).apply(this,arguments)}function fo({appConfig:D}){return D.appId}const kn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Na(D,C){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,O.Z)(function*(D,C){const N=yield Vs(D),F=ht(C),W={method:"POST",headers:N,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(Kr(D.appConfig),W)).json()}catch(Se){throw kn.create("token-subscribe-failed",{errorInfo:Se})}if(ee.error)throw kn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw kn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Dr(D,C){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(D,C){const N=yield Vs(D),F=ht(C.subscriptionOptions),W={method:"PATCH",headers:N,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(`${Kr(D.appConfig)}/${C.token}`,W)).json()}catch(Se){throw kn.create("token-update-failed",{errorInfo:Se})}if(ee.error)throw kn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw kn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function cs(D,C){return yu.apply(this,arguments)}function yu(){return(yu=(0,O.Z)(function*(D,C){const F={method:"DELETE",headers:yield Vs(D)};try{const ee=yield(yield fetch(`${Kr(D.appConfig)}/${C}`,F)).json();if(ee.error)throw kn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(W){throw kn.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function Kr({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Vs(D){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*({appConfig:D,installations:C}){const N=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function ht({p256dh:D,auth:C,endpoint:N,vapidKey:F}){const W={web:{endpoint:N,auth:C,p256dh:D}};return F!==zr&&(W.web.applicationPubKey=F),W}const _u=6048e5;function Ra(D){return vu.apply(this,arguments)}function vu(){return(vu=(0,O.Z)(function*(D){const C=yield bl(D.swRegistration,D.vapidKey),N={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:li(C.getKey("auth")),p256dh:li(C.getKey("p256dh"))},F=yield yn(D.firebaseDependencies);if(F){if(Go(F.subscriptionOptions,N))return Date.now()>=F.createTime+_u?El(D,{token:F.token,createTime:Date.now(),subscriptionOptions:N}):F.token;try{yield cs(D.firebaseDependencies,F.token)}catch(W){console.warn(W)}return be(D.firebaseDependencies,N)}return be(D.firebaseDependencies,N)})).apply(this,arguments)}function Eu(D){return wu.apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(D){const C=yield yn(D.firebaseDependencies);C&&(yield cs(D.firebaseDependencies,C.token),yield od(D.firebaseDependencies));const N=yield D.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function El(D,C){return wl.apply(this,arguments)}function wl(){return(wl=(0,O.Z)(function*(D,C){try{const N=yield Dr(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:N,createTime:Date.now()});return yield Fs(D.firebaseDependencies,F),N}catch(N){throw yield Eu(D),N}})).apply(this,arguments)}function be(D,C){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,O.Z)(function*(D,C){const F={token:yield Na(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Fs(D,F),F.token})).apply(this,arguments)}function bl(D,C){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hu(C)})})).apply(this,arguments)}function Go(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function qo(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Zr(D,C){if(!C.notification)return;D.notification={};const N=C.notification.title;N&&(D.notification.title=N);const F=C.notification.body;F&&(D.notification.body=F);const W=C.notification.image;W&&(D.notification.image=W)}(C,D),function Il(D,C){!C.data||(D.data=C.data)}(C,D),function Dl(D,C){if(!C.fcmOptions)return;D.fcmOptions={};const N=C.fcmOptions.link;N&&(D.fcmOptions.link=N);const F=C.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(C,D),C}function ad(D){return"object"==typeof D&&!!D&&co in D}function Cl(D,C){const N=[];for(let F=0;F<D.length;F++)N.push(D.charAt(F)),F<C.length&&N.push(C.charAt(F));return N.join("")}function Bs(D){return kn.create("missing-app-config-values",{valueName:D})}Cl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Cl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gr{constructor(C,N,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function bu(D){if(!D||!D.options)throw Bs("App Configuration Object");if(!D.name)throw Bs("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:N}=D;for(const F of C)if(!N[F])throw Bs(F);return{appName:D.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:W,installations:N,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ci(D){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(_l,{scope:Ps}),D.swRegistration.update().catch(()=>{})}catch(C){throw kn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function js(D,C){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield ci(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw kn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Tl(D,C){return Du.apply(this,arguments)}function Du(){return(Du=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=zr)})).apply(this,arguments)}function Al(){return(Al=(0,O.Z)(function*(D,C){if(!navigator)throw kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kn.create("permission-blocked");return yield Tl(D,null==C?void 0:C.vapidKey),yield js(D,null==C?void 0:C.serviceWorkerRegistration),Ra(D)})).apply(this,arguments)}function Oa(D,C,N){return zo.apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*(D,C,N){const F=Sl(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:N[co],message_name:N[Ma],message_time:N[id],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sl(D){switch(D){case ks.NOTIFICATION_CLICKED:return"notification_open";case ks.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ud(){return(ud=(0,O.Z)(function*(D,C){const N=C.data;if(!N.isFirebaseMessaging)return;D.onMessageHandler&&N.messageType===ks.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(qo(N)):D.onMessageHandler.next(qo(N)));const F=N.data;ad(F)&&"1"===F[Zp]&&(yield Oa(D,N.messageType,F))})).apply(this,arguments)}const xl="@firebase/messaging",ld=D=>{const C=new gr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Ml(D,C){return ud.apply(this,arguments)}(C,N)),C},go=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function Cu(D,C){return Al.apply(this,arguments)}(C,F)}};function dd(){return mo.apply(this,arguments)}function mo(){return(mo=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function cd(){(0,oe._registerComponent)(new fe.wA("messaging",ld,"PUBLIC")),(0,oe._registerComponent)(new fe.wA("messaging-internal",go,"PRIVATE")),(0,oe.registerVersion)(xl,"0.9.12"),(0,oe.registerVersion)(xl,"0.9.12","esm2017")}();const Rl="analytics",hy="firebase_id",Pa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Tu="https://www.googletagmanager.com/gtag/js",Hn=new re.Yd("@firebase/analytics");function hd(D){return Promise.all(D.map(C=>C.catch(N=>N)))}function Yp(D,C){const N=document.createElement("script");N.src=`${Tu}?l=${D}&id=${C}`,N.async=!0,document.head.appendChild(N)}function Wo(D,C,N,F,W,ee){return fd.apply(this,arguments)}function fd(){return(fd=(0,O.Z)(function*(D,C,N,F,W,ee){const Se=F[W];try{if(Se)yield C[Se];else{const Ye=(yield hd(N)).find(bt=>bt.measurementId===W);Ye&&(yield C[Ye.appId])}}catch(Me){Hn.error(Me)}D("config",W,ee)})).apply(this,arguments)}function Pl(D,C,N,F,W){return yo.apply(this,arguments)}function yo(){return(yo=(0,O.Z)(function*(D,C,N,F,W){try{let ee=[];if(W&&W.send_to){let Se=W.send_to;Array.isArray(Se)||(Se=[Se]);const Me=yield hd(N);for(const Ye of Se){const bt=Me.find(Ct=>Ct.measurementId===Ye),Rt=bt&&C[bt.appId];if(!Rt){ee=[];break}ee.push(Rt)}}0===ee.length&&(ee=Object.values(C)),yield Promise.all(ee),D("event",F,W||{})}catch(ee){Hn.error(ee)}})).apply(this,arguments)}function Qp(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(Tu))return C;return null}const Ln=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Qr=new class Yr{constructor(C={},N=1e3){this.throttleMetadata=C,this.intervalMillis=N}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,N){this.throttleMetadata[C]=N}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Ko(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function gd(D){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(D){var C;const{appId:N,apiKey:F}=D,W={method:"GET",headers:Ko(F)},ee=Pa.replace("{app-id}",N),Se=yield fetch(ee,W);if(200!==Se.status&&304!==Se.status){let Me="";try{const Ye=yield Se.json();(null===(C=Ye.error)||void 0===C?void 0:C.message)&&(Me=Ye.error.message)}catch(Ye){}throw Ln.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Me})}return Se.json()})).apply(this,arguments)}function $h(D){return Si.apply(this,arguments)}function Si(){return(Si=(0,O.Z)(function*(D,C=Qr,N){const{appId:F,apiKey:W,measurementId:ee}=D.options;if(!F)throw Ln.create("no-app-id");if(!W){if(ee)return{measurementId:ee,appId:F};throw Ln.create("no-api-key")}const Se=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Me=new kl;return setTimeout((0,O.Z)(function*(){Me.abort()}),void 0!==N?N:6e4),Au({appId:F,apiKey:W,measurementId:ee},Se,Me,C)})).apply(this,arguments)}function Au(D,C,N){return di.apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:N},F,W=Qr){const{appId:ee,measurementId:Se}=D;try{yield Pt(F,C)}catch(Me){if(Se)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Me.message}]`),{appId:ee,measurementId:Se};throw Me}try{const Me=yield gd(D);return W.deleteThrottleMetadata(ee),Me}catch(Me){if(!md(Me)){if(W.deleteThrottleMetadata(ee),Se)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Me.message}]`),{appId:ee,measurementId:Se};throw Me}const Ye=503===Number(Me.customData.httpStatus)?(0,X.$s)(N,W.intervalMillis,30):(0,X.$s)(N,W.intervalMillis),bt={throttleEndTimeMillis:Date.now()+Ye,backoffCount:N+1};return W.setThrottleMetadata(ee,bt),Hn.debug(`Calling attemptFetch again in ${Ye} millis`),Au(D,bt,F,W)}})).apply(this,arguments)}function Pt(D,C){return new Promise((N,F)=>{const W=Math.max(C-Date.now(),0),ee=setTimeout(N,W);D.addEventListener(()=>{clearTimeout(ee),F(Ln.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function md(D){if(!(D instanceof X.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class kl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function yd(){return _o.apply(this,arguments)}function _o(){return(_o=(0,O.Z)(function*(){if(!(0,X.hl)())return Hn.warn(Ln.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(D){return Hn.warn(Ln.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function fs(){return(fs=(0,O.Z)(function*(D,C,N,F,W,ee,Se){var Me;const Ye=$h(D);Ye.then(Mn=>{N[Mn.measurementId]=Mn.appId,D.options.measurementId&&Mn.measurementId!==D.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mn=>Hn.error(Mn)),C.push(Ye);const bt=yd().then(Mn=>{if(Mn)return F.getId()}),[Rt,Ct]=yield Promise.all([Ye,bt]);Qp()||Yp(ee,Rt.measurementId),W("js",new Date);const qn=null!==(Me=null==Se?void 0:Se.config)&&void 0!==Me?Me:{};return qn.origin="firebase",qn.update=!0,null!=Ct&&(qn[hy]=Ct),W("config",Rt.measurementId,qn),Rt.measurementId})).apply(this,arguments)}class Zo{constructor(C){this.app=C}_delete(){return delete hi[this.app.options.appId],Promise.resolve()}}let hi={},Gs=[];const ka={};let qs,Gi,Hi="dataLayer",Ll=!1;function Mi(D,C,N){!function Yo(){const D=[];if((0,X.ru)()&&D.push("This is a browser extension environment."),(0,X.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,W)=>`(${W+1}) ${F}`).join(" "),N=Ln.create("invalid-analytics-context",{errorInfo:C});Hn.warn(N.message)}}();const F=D.options.appId;if(!F)throw Ln.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Ln.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=hi[F])throw Ln.create("already-exists",{id:F});if(!Ll){!function hs(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Hi);const{wrappedGtag:ee,gtagCore:Se}=function jh(D,C,N,F,W){let ee=function(...Se){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(ee=window[W]),window[W]=function pd(D,C,N,F){function ee(){return(ee=(0,O.Z)(function*(Se,Me,Ye){try{"event"===Se?yield Pl(D,C,N,Me,Ye):"config"===Se?yield Wo(D,C,N,F,Me,Ye):D("set",Me)}catch(bt){Hn.error(bt)}})).apply(this,arguments)}return function W(Se,Me,Ye){return ee.apply(this,arguments)}}(ee,D,C,N),{gtagCore:ee,wrappedGtag:window[W]}}(hi,Gs,ka,Hi,"gtag");Gi=ee,qs=Se,Ll=!0}return hi[F]=function Gn(D,C,N,F,W,ee,Se){return fs.apply(this,arguments)}(D,Gs,ka,C,qs,Hi,N),new Zo(D)}function Fa(){return(Fa=(0,O.Z)(function*(D,C,N,F,W){if(W&&W.global)D("event",N,F);else{const ee=yield C;D("event",N,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function An(){return zs.apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}const Ws="@firebase/analytics";!function tg(){(0,oe._registerComponent)(new fe.wA(Rl,(C,{options:N})=>Mi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,oe._registerComponent)(new fe.wA("analytics-internal",function D(C){try{const N=C.getProvider(Rl).getImmediate();return{logEvent:(F,W,ee)=>function eg(D,C,N,F){D=(0,X.m9)(D),function Qo(D,C,N,F,W){return Fa.apply(this,arguments)}(Gi,hi[D.app.options.appId],C,N,F).catch(W=>Hn.error(W))}(N,F,W,ee)}}catch(N){throw Ln.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,oe.registerVersion)(Ws,"0.7.8"),(0,oe.registerVersion)(Ws,"0.7.8","esm2017")}();var Ks=P(4408),Su=P(7565);const Vl=new class wn extends Su.v{}(class gs extends Ks.o{constructor(C,N){super(C,N),this.scheduler=C,this.work=N}schedule(C,N=0){return N>0?super.schedule(C,N):(this.delay=N,this.state=C,this.scheduler.flush(this),this)}execute(C,N){return N>0||this.closed?super.execute(C,N):this._execute(C,N)}requestAsyncId(C,N,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,N,F):C.flush(this)}});var ng=P(4986),Ul=P(8505),Ar=P(9468),fi=P(5363);const Bl=new m.GfV("7.3.0"),ms="__angularfire_symbol__analyticsIsSupportedValue",Ri="__angularfire_symbol__analyticsIsSupported",zi="__angularfire_symbol__remoteConfigIsSupportedValue",La="__angularfire_symbol__remoteConfigIsSupported",jl="__angularfire_symbol__messagingIsSupportedValue",$l="__angularfire_symbol__messagingIsSupported";function Zs(D,C,N){if(C){if(1===C.length)return C[0];const ee=C.filter(Se=>Se.app===N);if(1===ee.length)return ee[0]}return N.container.getProvider(D).getImmediate({optional:!0})}globalThis[Ri]||(globalThis[Ri]=An().then(D=>globalThis[ms]=D).catch(()=>globalThis[ms]=!1)),globalThis[$l]||(globalThis[$l]=dd().then(D=>globalThis[jl]=D).catch(()=>globalThis[jl]=!1)),globalThis[La]||(globalThis[La]=lo().then(D=>globalThis[zi]=D).catch(()=>globalThis[zi]=!1));const wd=(D,C)=>{const N=C?[C]:(0,Z.C6)(),F=[];return N.forEach(W=>{W.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function vo(){}class Mu{constructor(C,N=Vl){this.zone=C,this.delegate=N}now(){return this.delegate.now()}schedule(C,N,F){const W=this.zone;return this.delegate.schedule(function(Se){W.runGuarded(()=>{C.apply(this,[Se])})},N,F)}}class Wi{constructor(C){this.zone=C,this.task=null}call(C,N){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vo,{},vo,vo)),N.pipe((0,Ul.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xu=(()=>{class D{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Mu(Zone.current)),this.insideAngular=N.run(()=>new Mu(Zone.current,ng.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(N){return new(N||D)(m.LFG(m.R0b))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ki(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ql(D){return Ki(),function Eo(D){return function(N){return(N=N.lift(new Wi(D.ngZone))).pipe((0,Ar.R)(D.outsideAngular),(0,fi.Q)(D.insideAngular))}}(Ki())(D)}},2090:(ot,Te,P)=>{P.d(Te,{BH:()=>Ae,LL:()=>Fe,ZR:()=>pe,zI:()=>se,US:()=>re,tV:()=>j,L:()=>ue,$s:()=>oo,r3:()=>Qt,Sg:()=>Ne,ne:()=>lt,vZ:()=>As,ZB:()=>Q,Lj:()=>$t,pd:()=>rs,m9:()=>ct,z$:()=>Le,jU:()=>Xe,ru:()=>Ke,d:()=>ye,xb:()=>lr,w1:()=>ve,hl:()=>We,uI:()=>de,UG:()=>we,b$:()=>De,G6:()=>ne,Mn:()=>He,X3:()=>dt,xO:()=>Bi,zd:()=>Pr,eu:()=>J});var m=P(5861);const X=function(B){const L=[];let G=0;for(let le=0;le<B.length;le++){let Y=B.charCodeAt(le);Y<128?L[G++]=Y:Y<2048?(L[G++]=Y>>6|192,L[G++]=63&Y|128):55296==(64512&Y)&&le+1<B.length&&56320==(64512&B.charCodeAt(le+1))?(Y=65536+((1023&Y)<<10)+(1023&B.charCodeAt(++le)),L[G++]=Y>>18|240,L[G++]=Y>>12&63|128,L[G++]=Y>>6&63|128,L[G++]=63&Y|128):(L[G++]=Y>>12|224,L[G++]=Y>>6&63|128,L[G++]=63&Y|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let Y=0;Y<B.length;Y+=3){const Ve=B[Y],mt=Y+1<B.length,Jt=mt?B[Y+1]:0,br=Y+2<B.length,Kt=br?B[Y+2]:0;let fn=(15&Jt)<<2|Kt>>6,ir=63&Kt;br||(ir=64,mt||(fn=64)),le.push(G[Ve>>2],G[(3&Ve)<<4|Jt>>4],G[fn],G[ir])}return le.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(X(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let G=0,le=0;for(;G<B.length;){const Y=B[G++];if(Y<128)L[le++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Ve=B[G++];L[le++]=String.fromCharCode((31&Y)<<6|63&Ve)}else if(Y>239&&Y<365){const br=((7&Y)<<18|(63&B[G++])<<12|(63&B[G++])<<6|63&B[G++])-65536;L[le++]=String.fromCharCode(55296+(br>>10)),L[le++]=String.fromCharCode(56320+(1023&br))}else{const Ve=B[G++],mt=B[G++];L[le++]=String.fromCharCode((15&Y)<<12|(63&Ve)<<6|63&mt)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const G=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let Y=0;Y<B.length;){const Ve=G[B.charAt(Y++)],Jt=Y<B.length?G[B.charAt(Y)]:0;++Y;const Kt=Y<B.length?G[B.charAt(Y)]:64;++Y;const Nt=Y<B.length?G[B.charAt(Y)]:64;if(++Y,null==Ve||null==Jt||null==Kt||null==Nt)throw Error();le.push(Ve<<2|Jt>>4),64!==Kt&&(le.push(Jt<<4&240|Kt>>2),64!==Nt&&le.push(Kt<<6&192|Nt))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ue=function(B){return function(B){const L=X(B);return re.encodeByteArray(L,!0)}(B).replace(/\./g,"")},j=function(B){try{return re.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const G in L)!L.hasOwnProperty(G)||!ze(G)||(B[G]=Q(B[G],L[G]));return B}function ze(B){return"__proto__"!==B}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,G)=>{this.resolve=L,this.reject=G})}wrapCallback(L){return(G,le)=>{G?this.reject(G):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(G):L(G,le))}}}function Ne(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",Y=B.iat||0,Ve=B.sub||B.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:Y,exp:Y+3600,auth_time:Y,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(mt)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Xe(){return"object"==typeof self&&self.self===self}function Ke(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return Le().indexOf("Electron/")>=0}function ve(){const B=Le();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function He(){return Le().indexOf("MSAppHost/")>=0}function ne(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function We(){return"object"==typeof indexedDB}function J(){return new Promise((B,L)=>{try{let G=!0;const le="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(le);Y.onsuccess=()=>{Y.result.close(),G||self.indexedDB.deleteDatabase(le),B(!0)},Y.onupgradeneeded=()=>{G=!1},Y.onerror=()=>{var Ve;L((null===(Ve=Y.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(G){L(G)}})}function se(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class pe extends Error{constructor(L,G,le){super(G),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fe.prototype.create)}}class Fe{constructor(L,G,le){this.service=L,this.serviceName=G,this.errors=le}create(L,...G){const le=G[0]||{},Y=`${this.service}/${L}`,Ve=this.errors[L],mt=Ve?function Dt(B,L){return B.replace(Zt,(G,le)=>{const Y=L[le];return null!=Y?String(Y):`<${le}?>`})}(Ve,le):"Error";return new pe(Y,`${this.serviceName}: ${mt} (${Y}).`,le)}}const Zt=/\{\$([^}]+)}/g;function Qt(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function lr(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function As(B,L){if(B===L)return!0;const G=Object.keys(B),le=Object.keys(L);for(const Y of G){if(!le.includes(Y))return!1;const Ve=B[Y],mt=L[Y];if(Or(Ve)&&Or(mt)){if(!As(Ve,mt))return!1}else if(Ve!==mt)return!1}for(const Y of le)if(!G.includes(Y))return!1;return!0}function Or(B){return null!==B&&"object"==typeof B}function Bi(B){const L=[];for(const[G,le]of Object.entries(B))Array.isArray(le)?le.forEach(Y=>{L.push(encodeURIComponent(G)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent(G)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function Pr(B){const L={};return B.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[Y,Ve]=le.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(Ve)}}),L}function rs(B){const L=B.indexOf("?");if(!L)return"";const G=B.indexOf("#",L);return B.substring(L,G>0?G:void 0)}function lt(B,L){const G=new Gr(B,L);return G.subscribe.bind(G)}class Gr{constructor(L,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver(G=>{G.next(L)})}error(L){this.forEachObserver(G=>{G.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,G,le){let Y;if(void 0===L&&void 0===G&&void 0===le)throw new Error("Missing Observer.");Y=function Zn(B,L){if("object"!=typeof B||null===B)return!1;for(const G of L)if(G in B&&"function"==typeof B[G])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:G,complete:le},void 0===Y.next&&(Y.next=oi),void 0===Y.error&&(Y.error=oi),void 0===Y.complete&&(Y.complete=oi);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(mt){}}),this.observers.push(Y),Ve}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,L)}sendOne(L,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{G(this.observers[L])}catch(le){"undefined"!=typeof console&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oi(){}function oo(B,L=1e3,G=2){const le=L*Math.pow(G,B),Y=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+Y)}function ct(B){return B&&B._delegate?B._delegate:B}function wr(B,L){return new Promise((G,le)=>{B.onsuccess=Y=>{G(Y.target.result)},B.onerror=Y=>{var Ve;le(`${L}: ${null===(Ve=Y.target.error)||void 0===Ve?void 0:Ve.message}`)}})}class Bt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,G="readonly"){return new Ze(this._db.transaction.call(this._db,L,G))}createObjectStore(L,G){return new Ce(this._db.createObjectStore(L,G))}close(){this._db.close()}}class Ze{constructor(L){this._transaction=L,this.complete=new Promise((G,le)=>{this._transaction.oncomplete=function(){G()},this._transaction.onerror=()=>{le(this._transaction.error)},this._transaction.onabort=()=>{le(this._transaction.error)}})}objectStore(L){return new Ce(this._transaction.objectStore(L))}}class Ce{constructor(L){this._store=L}index(L){return new Qe(this._store.index(L))}createIndex(L,G,le){return new Qe(this._store.createIndex(L,G,le))}get(L){return wr(this._store.get(L),"Error reading from IndexedDB")}put(L,G){return wr(this._store.put(L,G),"Error writing to IndexedDB")}delete(L){return wr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return wr(this._store.clear(),"Error clearing IndexedDB object store")}}class Qe{constructor(L){this._index=L}get(L){return wr(this._index.get(L),"Error reading from IndexedDB")}}function dt(B,L,G){return new Promise((le,Y)=>{try{const Ve=indexedDB.open(B,L);Ve.onsuccess=mt=>{le(new Bt(mt.target.result))},Ve.onerror=mt=>{var Jt;Y(`Error opening indexedDB: ${null===(Jt=mt.target.error)||void 0===Jt?void 0:Jt.message}`)},Ve.onupgradeneeded=mt=>{G(new Bt(Ve.result),mt.oldVersion,mt.newVersion,new Ze(Ve.transaction))}}catch(Ve){Y(`Error opening indexedDB: ${Ve.message}`)}})}function $t(B){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,m.Z)(function*(B){return new Promise((L,G)=>{try{const le=indexedDB.deleteDatabase(B);le.onsuccess=()=>{L()},le.onerror=Y=>{var Ve;G(`Error deleting indexedDB database "${B}": ${null===(Ve=Y.target.error)||void 0===Ve?void 0:Ve.message}`)}}catch(le){G(`Error deleting indexedDB database "${B}": ${le.message}`)}})})).apply(this,arguments)}},1834:(ot,Te,P)=>{var m=P(5e3);let Z=null;function O(){return Z}const re=new m.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ue(){return(0,m.LFG)($)}()},providedIn:"platform"}),n})();const j=new m.OlP("Location Initialized");let $=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){Q()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){Q()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ze(){return new $((0,m.LFG)(re))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function we(n){const e=(0,m.LFG)(re).location;return new Ke((0,m.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Xe=new m.OlP("appBaseHref");let Ke=(()=>{class n extends de{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const c=this.prepareExternalUrl(s+Le(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){const c=this.prepareExternalUrl(s+Le(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ce),m.LFG(Xe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends de{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let c=this.prepareExternalUrl(s+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){let c=this.prepareExternalUrl(s+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ce),m.LFG(Xe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(je(s)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Ae,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(m.LFG(de),m.LFG(ce))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ve(){return new ye((0,m.LFG)(de),(0,m.LFG)(ce))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}var se=(()=>((se=se||{})[se.Format=0]="Format",se[se.Standalone=1]="Standalone",se))(),te=(()=>((te=te||{})[te.Narrow=0]="Narrow",te[te.Abbreviated=1]="Abbreviated",te[te.Wide=2]="Wide",te[te.Short=3]="Short",te))(),Ee=(()=>((Ee=Ee||{})[Ee.Short=0]="Short",Ee[Ee.Medium=1]="Medium",Ee[Ee.Long=2]="Long",Ee[Ee.Full=3]="Full",Ee))(),pe=(()=>((pe=pe||{})[pe.Decimal=0]="Decimal",pe[pe.Group=1]="Group",pe[pe.List=2]="List",pe[pe.PercentSign=3]="PercentSign",pe[pe.PlusSign=4]="PlusSign",pe[pe.MinusSign=5]="MinusSign",pe[pe.Exponential=6]="Exponential",pe[pe.SuperscriptingExponent=7]="SuperscriptingExponent",pe[pe.PerMille=8]="PerMille",pe[pe.Infinity=9]="Infinity",pe[pe.NaN=10]="NaN",pe[pe.TimeSeparator=11]="TimeSeparator",pe[pe.CurrencyDecimal=12]="CurrencyDecimal",pe[pe.CurrencyGroup=13]="CurrencyGroup",pe))();function Xt(n,e){return nr((0,m.cg1)(n)[m.wAp.DateFormat],e)}function bi(n,e){return nr((0,m.cg1)(n)[m.wAp.TimeFormat],e)}function Qt(n,e){return nr((0,m.cg1)(n)[m.wAp.DateTimeFormat],e)}function zt(n,e){const t=(0,m.cg1)(n),r=t[m.wAp.NumberSymbols][e];if(void 0===r){if(e===pe.CurrencyDecimal)return t[m.wAp.NumberSymbols][pe.Decimal];if(e===pe.CurrencyGroup)return t[m.wAp.NumberSymbols][pe.Group]}return r}function rs(n){if(!n[m.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[m.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function nr(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Zn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const rr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ss={},Ca=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Wt=(()=>((Wt=Wt||{})[Wt.Short=0]="Short",Wt[Wt.ShortGMT=1]="ShortGMT",Wt[Wt.Long=2]="Long",Wt[Wt.Extended=3]="Extended",Wt))(),rt=(()=>((rt=rt||{})[rt.FullYear=0]="FullYear",rt[rt.Month=1]="Month",rt[rt.Date=2]="Date",rt[rt.Hours=3]="Hours",rt[rt.Minutes=4]="Minutes",rt[rt.Seconds=5]="Seconds",rt[rt.FractionalSeconds=6]="FractionalSeconds",rt[rt.Day=7]="Day",rt))(),vt=(()=>((vt=vt||{})[vt.DayPeriods=0]="DayPeriods",vt[vt.Days=1]="Days",vt[vt.Months=2]="Months",vt[vt.Eras=3]="Eras",vt))();function cr(n,e,t,r){let s=function Jt(n){if(Kt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[s,u=1,c=1]=n.split("-").map(p=>+p);return ji(s,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(rr))return function br(n){const e=new Date(0);let t=0,r=0;const s=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),s.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,p=Number(n[5]||0)-r,v=Number(n[6]||0),I=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,p,v,I),e}(r)}const e=new Date(n);if(!Kt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Gt(t,e)||e;let p,c=[];for(;e;){if(p=Ca.exec(e),!p){c.push(e);break}{c=c.concat(p.slice(1));const S=c.pop();if(!S)break;e=S}}let v=s.getTimezoneOffset();r&&(v=Y(r,v),s=function mt(n,e,t){const r=t?-1:1,s=n.getTimezoneOffset();return function Ve(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Y(e,s)-s))}(s,r,!0));let I="";return c.forEach(S=>{const x=function le(n){if(G[n])return G[n];let e;switch(n){case"G":case"GG":case"GGG":e=Bt(vt.Eras,te.Abbreviated);break;case"GGGG":e=Bt(vt.Eras,te.Wide);break;case"GGGGG":e=Bt(vt.Eras,te.Narrow);break;case"y":e=ct(rt.FullYear,1,0,!1,!0);break;case"yy":e=ct(rt.FullYear,2,0,!0,!0);break;case"yyy":e=ct(rt.FullYear,3,0,!1,!0);break;case"yyyy":e=ct(rt.FullYear,4,0,!1,!0);break;case"Y":e=L(1);break;case"YY":e=L(2,!0);break;case"YYY":e=L(3);break;case"YYYY":e=L(4);break;case"M":case"L":e=ct(rt.Month,1,1);break;case"MM":case"LL":e=ct(rt.Month,2,1);break;case"MMM":e=Bt(vt.Months,te.Abbreviated);break;case"MMMM":e=Bt(vt.Months,te.Wide);break;case"MMMMM":e=Bt(vt.Months,te.Narrow);break;case"LLL":e=Bt(vt.Months,te.Abbreviated,se.Standalone);break;case"LLLL":e=Bt(vt.Months,te.Wide,se.Standalone);break;case"LLLLL":e=Bt(vt.Months,te.Narrow,se.Standalone);break;case"w":e=B(1);break;case"ww":e=B(2);break;case"W":e=B(1,!0);break;case"d":e=ct(rt.Date,1);break;case"dd":e=ct(rt.Date,2);break;case"c":case"cc":e=ct(rt.Day,1);break;case"ccc":e=Bt(vt.Days,te.Abbreviated,se.Standalone);break;case"cccc":e=Bt(vt.Days,te.Wide,se.Standalone);break;case"ccccc":e=Bt(vt.Days,te.Narrow,se.Standalone);break;case"cccccc":e=Bt(vt.Days,te.Short,se.Standalone);break;case"E":case"EE":case"EEE":e=Bt(vt.Days,te.Abbreviated);break;case"EEEE":e=Bt(vt.Days,te.Wide);break;case"EEEEE":e=Bt(vt.Days,te.Narrow);break;case"EEEEEE":e=Bt(vt.Days,te.Short);break;case"a":case"aa":case"aaa":e=Bt(vt.DayPeriods,te.Abbreviated);break;case"aaaa":e=Bt(vt.DayPeriods,te.Wide);break;case"aaaaa":e=Bt(vt.DayPeriods,te.Narrow);break;case"b":case"bb":case"bbb":e=Bt(vt.DayPeriods,te.Abbreviated,se.Standalone,!0);break;case"bbbb":e=Bt(vt.DayPeriods,te.Wide,se.Standalone,!0);break;case"bbbbb":e=Bt(vt.DayPeriods,te.Narrow,se.Standalone,!0);break;case"B":case"BB":case"BBB":e=Bt(vt.DayPeriods,te.Abbreviated,se.Format,!0);break;case"BBBB":e=Bt(vt.DayPeriods,te.Wide,se.Format,!0);break;case"BBBBB":e=Bt(vt.DayPeriods,te.Narrow,se.Format,!0);break;case"h":e=ct(rt.Hours,1,-12);break;case"hh":e=ct(rt.Hours,2,-12);break;case"H":e=ct(rt.Hours,1);break;case"HH":e=ct(rt.Hours,2);break;case"m":e=ct(rt.Minutes,1);break;case"mm":e=ct(rt.Minutes,2);break;case"s":e=ct(rt.Seconds,1);break;case"ss":e=ct(rt.Seconds,2);break;case"S":e=ct(rt.FractionalSeconds,1);break;case"SS":e=ct(rt.FractionalSeconds,2);break;case"SSS":e=ct(rt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ce(Wt.Short);break;case"ZZZZZ":e=Ce(Wt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ce(Wt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ce(Wt.Long);break;default:return null}return G[n]=e,e}(S);I+=x?x(s,t,v):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),I}function ji(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Gt(n,e){const t=function Dt(n){return(0,m.cg1)(n)[m.wAp.LocaleId]}(n);if(Ss[t]=Ss[t]||{},Ss[t][e])return Ss[t][e];let r="";switch(e){case"shortDate":r=Xt(n,Ee.Short);break;case"mediumDate":r=Xt(n,Ee.Medium);break;case"longDate":r=Xt(n,Ee.Long);break;case"fullDate":r=Xt(n,Ee.Full);break;case"shortTime":r=bi(n,Ee.Short);break;case"mediumTime":r=bi(n,Ee.Medium);break;case"longTime":r=bi(n,Ee.Long);break;case"fullTime":r=bi(n,Ee.Full);break;case"short":const s=Gt(n,"shortTime"),u=Gt(n,"shortDate");r=oo(Qt(n,Ee.Short),[s,u]);break;case"medium":const c=Gt(n,"mediumTime"),p=Gt(n,"mediumDate");r=oo(Qt(n,Ee.Medium),[c,p]);break;case"long":const v=Gt(n,"longTime"),I=Gt(n,"longDate");r=oo(Qt(n,Ee.Long),[v,I]);break;case"full":const S=Gt(n,"fullTime"),x=Gt(n,"fullDate");r=oo(Qt(n,Ee.Full),[S,x])}return r&&(Ss[t][e]=r),r}function oo(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Er(n,e,t="-",r,s){let u="";(n<0||s&&n<=0)&&(s?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function ct(n,e,t=0,r=!1,s=!1){return function(u,c){let p=function wr(n,e){switch(n){case rt.FullYear:return e.getFullYear();case rt.Month:return e.getMonth();case rt.Date:return e.getDate();case rt.Hours:return e.getHours();case rt.Minutes:return e.getMinutes();case rt.Seconds:return e.getSeconds();case rt.FractionalSeconds:return e.getMilliseconds();case rt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||p>-t)&&(p+=t),n===rt.Hours)0===p&&-12===t&&(p=12);else if(n===rt.FractionalSeconds)return function dr(n,e){return Er(n,3).substr(0,e)}(p,e);const v=zt(c,pe.MinusSign);return Er(p,e,v,r,s)}}function Bt(n,e,t=se.Format,r=!1){return function(s,u){return function Ze(n,e,t,r,s,u){switch(t){case vt.Months:return function Ge(n,e,t){const r=(0,m.cg1)(n),u=nr([r[m.wAp.MonthsFormat],r[m.wAp.MonthsStandalone]],e);return nr(u,t)}(e,s,r)[n.getMonth()];case vt.Days:return function an(n,e,t){const r=(0,m.cg1)(n),u=nr([r[m.wAp.DaysFormat],r[m.wAp.DaysStandalone]],e);return nr(u,t)}(e,s,r)[n.getDay()];case vt.DayPeriods:const c=n.getHours(),p=n.getMinutes();if(u){const I=function is(n){const e=(0,m.cg1)(n);return rs(e),(e[m.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Zn(r):[Zn(r[0]),Zn(r[1])])}(e),S=function lt(n,e,t){const r=(0,m.cg1)(n);rs(r);const u=nr([r[m.wAp.ExtraData][0],r[m.wAp.ExtraData][1]],e)||[];return nr(u,t)||[]}(e,s,r),x=I.findIndex(V=>{if(Array.isArray(V)){const[H,z]=V,ge=c>=H.hours&&p>=H.minutes,ke=c<z.hours||c===z.hours&&p<z.minutes;if(H.hours<z.hours){if(ge&&ke)return!0}else if(ge||ke)return!0}else if(V.hours===c&&V.minutes===p)return!0;return!1});if(-1!==x)return S[x]}return function Zt(n,e,t){const r=(0,m.cg1)(n),u=nr([r[m.wAp.DayPeriodsFormat],r[m.wAp.DayPeriodsStandalone]],e);return nr(u,t)}(e,s,r)[c<12?0:1];case vt.Eras:return function qt(n,e){return nr((0,m.cg1)(n)[m.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(s,u,n,e,t,r)}}function Ce(n){return function(e,t,r){const s=-1*r,u=zt(t,pe.MinusSign),c=s>0?Math.floor(s/60):Math.ceil(s/60);switch(n){case Wt.Short:return(s>=0?"+":"")+Er(c,2,u)+Er(Math.abs(s%60),2,u);case Wt.ShortGMT:return"GMT"+(s>=0?"+":"")+Er(c,1,u);case Wt.Long:return"GMT"+(s>=0?"+":"")+Er(c,2,u)+":"+Er(Math.abs(s%60),2,u);case Wt.Extended:return 0===r?"Z":(s>=0?"+":"")+Er(c,2,u)+":"+Er(Math.abs(s%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Lt(n){return ji(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function B(n,e=!1){return function(t,r){let s;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();s=1+Math.floor((c+u)/7)}else{const u=Lt(t),c=function $t(n){const e=ji(n,0,1).getDay();return ji(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),p=u.getTime()-c.getTime();s=1+Math.round(p/6048e5)}return Er(s,n,zt(r,pe.MinusSign))}}function L(n,e=!1){return function(t,r){return Er(Lt(t).getFullYear(),n,zt(r,pe.MinusSign),e)}}const G={};function Y(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Kt(n){return n instanceof Date&&!isNaN(n.valueOf())}class Ns{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fr=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,c)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Ns(s.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),os(p,s)}});for(let s=0,u=r.length;s<u;s++){const p=r.get(s).context;p.index=s,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{os(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function os(n,e){n.context.$implicit=e.item}function $n(n,e){return new m.vHH(2100,"")}class td{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class qp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const us=new qp,zp=new td;let ml=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,m.QGY)(t))return us;if((0,m.F4k)(t))return zp;throw $n()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.sBO,16))},n.\u0275pipe=m.Yjl({name:"async",type:n,pure:!1}),n})();const Kp=new m.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Lh=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",s,u){var c;if(null==t||""===t||t!=t)return null;try{return cr(t,r,u||this.locale,null!==(c=null!=s?s:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(p){throw $n()}}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.soG,16),m.Y36(Kp,24))},n.\u0275pipe=m.Yjl({name:"date",type:n,pure:!0}),n})(),Ci=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function pr(n){return"server"===n}let gu=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new mu((0,m.LFG)(re),window)}),n})();class mu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ls(this.window.history)||ls(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ls(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Fs extends class Ho extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Z||(Z=n)}(new Fs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function od(){return cn=cn||document.querySelector("base"),cn?cn.getAttribute("href"):null}();return null==t?null:function fo(n){ho=ho||document.createElement("a"),ho.setAttribute("href",n);const e=ho.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){cn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Bo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ho,cn=null;const Ir=new m.OlP("TRANSITION_ID"),Na=[{provide:m.ip1,useFactory:function kn(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Ir,re,m.zs3],multi:!0}];class Ti{static init(){(0,m.VLi)(new Ti)}addToWindow(e){m.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const s=m.dqk.getAllAngularTestabilities();let u=s.length,c=!1;const p=function(v){c=c||v,u--,0==u&&r(c)};s.forEach(function(v){v.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Dr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ls=new m.OlP("EventManagerPlugins");let cs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const c=s[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ls),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class yu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Kr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Vs=(()=>{class n extends Kr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,s.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Us),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Us))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Us(n){O().remove(n)}const ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_u=/%COMP%/g;function be(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?be(n,s,t):(s=s.replace(_u,n),t.push(s))}return t}function Vt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let En=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Go(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Il(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case m.ifc.ShadowDom:return new Dl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=be(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(cs),m.LFG(Vs),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Go{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ht[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=ht[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=ht[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,s&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Vt(r)):this.eventManager.addEventListener(e,t,Vt(r))}}class Il extends Go{constructor(e,t,r,s){super(e),this.component=r;const u=be(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function El(n){return"_ngcontent-%COMP%".replace(_u,n)}(s+"-"+r.id),this.hostAttr=function wl(n){return"_nghost-%COMP%".replace(_u,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Dl extends Go{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=be(s.id,s.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ad=(()=>{class n extends yu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Cl=["alt","control","meta","shift"],Bs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ci={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Iu=(()=>{class n extends yu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let c="";if(Cl.forEach(v=>{const I=r.indexOf(v);I>-1&&(r.splice(I,1),c+=v+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=s,p.fullKey=c,p}static getEventFullKey(t){let r="",s=function js(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&gr.hasOwnProperty(e)&&(e=gr[e]))}return Bs[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Cl.forEach(u=>{u!=s&&ci[u](t)&&(r+=u+".")}),r+=s,r}static eventCallback(t,r,s){return u=>{n.getEventFullKey(u)===t&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Al=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Ai(){Fs.makeCurrent(),Ti.init()},multi:!0},{provide:re,useFactory:function Du(){return(0,m.RDi)(document),document},deps:[]}]),Oa=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Tl(){return new m.qLn},deps:[]},{provide:Ls,useClass:ad,multi:!0,deps:[re,m.R0b,m.Lbi]},{provide:Ls,useClass:Iu,multi:!0,deps:[re]},{provide:En,useClass:En,deps:[cs,Vs,m.AFp]},{provide:m.FYo,useExisting:En},{provide:Kr,useExisting:Vs},{provide:Vs,useClass:Vs,deps:[re]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:cs,useClass:cs,deps:[Ls,m.R0b]},{provide:class yn{},useClass:Dr,deps:[]}];let zo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Ir,useExisting:m.AFp},Na]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:Oa,imports:[Ci,m.hGG]}),n})();"undefined"!=typeof window&&window;var Fn=P(8996),Ln=P(7669);function yt(...n){const e=(0,Ln.yG)(n);return(0,Fn.D)(n,e)}var mr=P(7579);class Yr extends mr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Qr=P(8306);const{isArray:Ko}=Array,{getPrototypeOf:gd,prototype:gn,keys:$h}=Object;function Si(n){if(1===n.length){const e=n[0];if(Ko(e))return{args:e,keys:null};if(function Au(n){return n&&"object"==typeof n&&gd(n)===gn}(e)){const t=$h(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var di=P(4671),Pt=P(4004);const{isArray:md}=Array;function yd(n){return(0,Pt.U)(e=>function kl(n,e){return md(e)?n(...e):n(e)}(n,e))}function _o(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Gn=P(5403),fs=P(9672);function Gs(n,e,t){n?(0,fs.f)(t,n,e):e()}var ka=P(576);function Hi(n,e){const t=(0,ka.m)(n)?n:()=>n,r=s=>s.error(t());return new Qr.y(e?s=>e.schedule(r,0,s):r)}const qs=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Gi=P(8189);function _d(...n){return function Ll(){return(0,Gi.J)(1)}()((0,Fn.D)(n,(0,Ln.yG)(n)))}var Yo=P(8421);function Mi(n){return new Qr.y(e=>{(0,Yo.Xf)(n()).subscribe(e)})}var Qo=P(515),Fa=P(727),kr=P(4482);function xi(){return(0,kr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class vd extends Qr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,kr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fa.w0.EMPTY)}return e}refCount(){return xi()(this)}}function Vn(n,e){return(0,kr.e)((t,r)=>{let s=null,u=0,c=!1;const p=()=>c&&!s&&r.complete();t.subscribe((0,Gn.x)(r,v=>{null==s||s.unsubscribe();let I=0;const S=u++;(0,Yo.Xf)(n(v,S)).subscribe(s=(0,Gn.x)(r,x=>r.next(e?e(v,x,S,I++):x),()=>{s=null,p()}))},()=>{c=!0,p()}))})}var Jo=P(5698);function Ni(...n){const e=(0,Ln.yG)(n);return(0,kr.e)((t,r)=>{(e?_d(n,t,e):_d(n,t)).subscribe(r)})}function Xo(n,e,t,r,s){return(u,c)=>{let p=t,v=e,I=0;u.subscribe((0,Gn.x)(c,S=>{const x=I++;v=p?n(v,S,x):(p=!0,S),r&&c.next(v)},s&&(()=>{p&&c.next(v),c.complete()})))}}function Tr(n,e){return(0,kr.e)(Xo(n,e,arguments.length>=2,!0))}function ps(n,e){return(0,kr.e)((t,r)=>{let s=0;t.subscribe((0,Gn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}function qi(n){return(0,kr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Gn.x)(t,void 0,void 0,c=>{u=(0,Yo.Xf)(n(c,qi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}var An=P(5577);function zs(n,e){return(0,ka.m)(e)?(0,An.z)(n,e,1):(0,An.z)(n,1)}function Ed(n){return n<=0?()=>Qo.E:(0,kr.e)((e,t)=>{let r=[];e.subscribe((0,Gn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Sn(n=Jp){return(0,kr.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Jp(){return new qs}function Xp(n){return(0,kr.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Ws(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ps((s,u)=>n(s,u,r)):di.y,(0,Jo.q)(1),t?Xp(e):Sn(()=>new qs))}var Jr=P(8505);class Ks{constructor(e,t){this.id=e,this.url=t}}class gs extends Ks{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Su extends Ks{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wn extends Ks{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vl extends Ks{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ea extends Ks{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ng extends Ks{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ul extends Ks{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ar extends Ks{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fi extends Ks{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ms{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ri{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class La{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $l{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const kt="primary";class Hl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qn(n){return new Hl(n)}const Gl="ngNavigationCancelingError";function Zs(n){const e=Error("NavigationCancelingError: "+n);return e[Gl]=!0,e}function vo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))s[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Wi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!xu(n[s],e[s]))return!1;return!0}function xu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Ki(n){return Array.prototype.concat.apply([],n)}function bd(n){return n.length>0?n[n.length-1]:null}function Jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function pi(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Fn.D)(Promise.resolve(n)):yt(n)}const Eo={exact:function C(n,e,t){if(!Rt(n.segments,e.segments)||!ee(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:F},ta={exact:function D(n,e){return Wi(n,e)},subset:function N(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xu(n[t],e[t]))},ignored:()=>!0};function Nu(n,e,t){return Eo[t.paths](n.root,e.root,t.matrixParams)&&ta[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return W(n,e,e.segments,t)}function W(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Rt(s,t)||e.hasChildren()||!ee(s,t,r))}if(n.segments.length===t.length){if(!Rt(n.segments,t)||!ee(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!F(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Rt(n.segments,s)&&ee(n.segments,s,r)&&n.children[kt])&&W(n.children[kt],e,u,r)}}function ee(n,e,t){return e.every((r,s)=>ta[t](n[s].parameters,r.parameters))}class Se{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return na.serialize(this)}}class Me{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jn(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wo(this)}}class Ye{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qn(this.parameters)),this._parameterMap}toString(){return Va(this)}}function Rt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class qn{}class Mn{parse(e){const t=new Dd(e);return new Se(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Fr(e.root,!0)}`,r=function fy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Oi(t)}=${Oi(s)}`).join("&"):`${Oi(t)}=${Oi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function bo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const na=new Mn;function wo(n){return n.segments.map(e=>Va(e)).join("/")}function Fr(n,e){if(!n.hasChildren())return wo(n);if(e){const t=n.children[kt]?Fr(n.children[kt],!1):"",r=[];return Jn(n.children,(s,u)=>{u!==kt&&r.push(`${u}:${Fr(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ct(n,e){let t=[];return Jn(n.children,(r,s)=>{s===kt&&(t=t.concat(e(r,s)))}),Jn(n.children,(r,s)=>{s!==kt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===kt?[Fr(n.children[kt],!1)]:[`${s}:${Fr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${wo(n)}/${t[0]}`:`${wo(n)}/(${t.join("//")})`}}function gi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oi(n){return gi(n).replace(/%3B/gi,";")}function Id(n){return gi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zl(n){return decodeURIComponent(n)}function Wl(n){return zl(n.replace(/\+/g,"%20"))}function Va(n){return`${Id(n.path)}${function rg(n){return Object.keys(n).map(e=>`;${Id(e)}=${Id(n[e])}`).join("")}(n.parameters)}`}const py=/^[^\/()?;=#]+/;function ys(n){const e=n.match(py);return e?e[0]:""}const Kl=/^[^=?&#]+/,my=/^[^&#]+/;class Dd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new Me(e,t)),r}parseSegment(){const e=ys(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ye(zl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ys(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=ys(this.remaining);s&&(r=s,this.capture(r))}e[zl(t)]=zl(r)}parseQueryParam(e){const t=function gy(n){const e=n.match(Kl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function ig(n){const e=n.match(my);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const s=Wl(t),u=Wl(r);if(e.hasOwnProperty(s)){let c=e[s];Array.isArray(c)||(c=[c],e[s]=c),c.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ys(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=kt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[kt]:new Me([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class yy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Hh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Hh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Gh(e,this._root).map(t=>t.value)}}function Hh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Hh(n,t);if(r)return r}return null}function Gh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Gh(n,t);if(r.length)return r.unshift(e),r}return[]}class Io{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Do(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Cd extends yy{constructor(e,t){super(e),this.snapshot=t,Ad(this,e)}toString(){return this.snapshot.toString()}}function Ua(n,e){const t=function _y(n,e){const c=new Ru([],{},{},"",{},kt,e,null,n.root,-1,{});return new qh("",new Io(c,[]))}(n,e),r=new Yr([new Ye("",{})]),s=new Yr({}),u=new Yr({}),c=new Yr({}),p=new Yr(""),v=new ra(r,s,c,p,u,kt,e,t.root);return v.snapshot=t.root,new Cd(new Io(v,[]),t)}class ra{constructor(e,t,r,s,u,c,p,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Pt.U)(e=>Qn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Pt.U)(e=>Qn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Td(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ru{constructor(e,t,r,s,u,c,p,v,I,S,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=p,this.routeConfig=v,this._urlSegment=I,this._lastPathIndex=S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qh extends yy{constructor(e,t){super(t),this.url=e,Ad(this,t)}toString(){return Sd(this._root)}}function Ad(n,e){e.value._routerState=n,e.children.forEach(t=>Ad(n,t))}function Sd(n){const e=n.children.length>0?` { ${n.children.map(Sd).join(", ")} } `:"";return`${n.value}${e}`}function Md(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Wi(e.params,t.params)||n.params.next(t.params),function Mu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function zh(n,e){const t=Wi(n.params,e.params)&&function bt(n,e){return Rt(n,e)&&n.every((t,r)=>Wi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zh(n.parent,e.parent))}function Zl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Wh(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Zl(n,r,s);return Zl(n,r)})}(n,e,t);return new Io(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Zl(n,p)),c}}const r=function wy(n){return new ra(new Yr(n.url),new Yr(n.params),new Yr(n.queryParams),new Yr(n.fragment),new Yr(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Zl(n,u));return new Io(r,s)}}function ia(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ou(n){return"object"==typeof n&&null!=n&&n.outlets}function sg(n,e,t,r,s){let u={};if(r&&Jn(r,(p,v)=>{u[v]=Array.isArray(p)?p.map(I=>`${I}`):`${p}`}),n===e)return new Se(t,u,s);const c=Kh(n,e,t);return new Se(c,u,s)}function Kh(n,e,t){const r={};return Jn(n.children,(s,u)=>{r[u]=s===e?t:Kh(s,e,t)}),new Me(n.segments,r)}class by{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ia(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(Ou);if(s&&s!==bd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ty(n,e,t){if(n||(n=new Me([],{})),0===n.segments.length&&n.hasChildren())return Qs(n,e,t);const r=function BE(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const c=n.segments[s],p=t[r];if(Ou(p))break;const v=`${p}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&I&&"object"==typeof I&&void 0===I.outlets){if(!Pi(v,I,c))return u;r+=2}else{if(!Pi(v,{},c))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Me(n.segments.slice(0,r.pathIndex),{});return u.children[kt]=new Me(n.segments.slice(r.pathIndex),n.children),Qs(u,0,s)}return r.match&&0===s.length?new Me(n.segments,{}):r.match&&!n.hasChildren()?Yh(n,e,t):r.match?Qs(n,0,s):Yh(n,e,t)}function Qs(n,e,t){if(0===t.length)return new Me(n.segments,{});{const r=function Cy(n){return Ou(n[0])?n[0].outlets:{[kt]:n}}(t),s={};return Jn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=Ty(n.children[c],e,u))}),Jn(n.children,(u,c)=>{void 0===r[c]&&(s[c]=u)}),new Me(n.segments,s)}}function Yh(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Ou(u)){const v=Pu(u.outlets);return new Me(r,v)}if(0===s&&ia(t[0])){r.push(new Ye(n.segments[e].path,Qh(t[0]))),s++;continue}const c=Ou(u)?u.outlets[kt]:`${u}`,p=s<t.length-1?t[s+1]:null;c&&p&&ia(p)?(r.push(new Ye(c,Qh(p))),s+=2):(r.push(new Ye(c,{})),s++)}return new Me(r,{})}function Pu(n){const e={};return Jn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Yh(new Me([],{}),0,t))}),e}function Qh(n){const e={};return Jn(n,(t,r)=>e[r]=`${t}`),e}function Pi(n,e,t){return n==t.path&&Wi(e,t.parameters)}class ag{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Md(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Do(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,s[c],r),delete s[c]}),Jn(s,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const c=r.getContext(s.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Do(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Do(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Do(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new jl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new zi(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Md(s),s===u)if(s.component){const c=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const c=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const p=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Md(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function xd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),v=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=s,c.resolver=v,c.outlet&&c.outlet.activateWith(s,v),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Nd{constructor(e,t){this.routes=e,this.module=t}}function Ba(n){return"function"==typeof n}function ku(n){return n instanceof Se}const Ql=Symbol("INITIAL_VALUE");function sa(){return Vn(n=>function Zo(...n){const e=(0,Ln.yG)(n),t=(0,Ln.jO)(n),{args:r,keys:s}=Si(n);if(0===r.length)return(0,Fn.D)([],e);const u=new Qr.y(function hi(n,e,t=di.y){return r=>{Gs(e,()=>{const{length:s}=n,u=new Array(s);let c=s,p=s;for(let v=0;v<s;v++)Gs(e,()=>{const I=(0,Fn.D)(n[v],e);let S=!1;I.subscribe((0,Gn.x)(r,x=>{u[v]=x,S||(S=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,s?c=>_o(s,c):di.y));return t?u.pipe(yd(t)):u}(n.map(e=>e.pipe((0,Jo.q)(1),Ni(Ql)))).pipe(Tr((e,t)=>{let r=!1;return t.reduce((s,u,c)=>s!==Ql?s:(u===Ql&&(r=!0),r||!1!==u&&c!==t.length-1&&!ku(u)?s:u),e)},Ql),ps(e=>e!==Ql),(0,Pt.U)(e=>ku(e)?e:!0===e),(0,Jo.q)(1)))}class Ay{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Jl,this.attachRef=null}}class Jl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ay,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Fu=(()=>{class n{constructor(t,r,s,u,c){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=u||kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,v=new tf(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Jl),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class tf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ra?this.route:e===Jl?this.childContexts:this.parent.get(e,t)}}let nf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[Fu],encapsulation:2}),n})();function Xl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Rd(r,rf(e,r))}}function Rd(n,e){n.children&&Xl(n.children,e)}function rf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function sf(n){const e=n.children&&n.children.map(sf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=nf),t}function nn(n){return n.outlet||kt}function of(n,e){const t=n.filter(r=>nn(r)===e);return t.push(...n.filter(r=>nn(r)!==e)),t}const lg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},lg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||vo)(t,n,e);if(!u)return Object.assign({},lg);const c={};Jn(u.posParams,(v,I)=>{c[I]=v.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function ec(n,e,t,r,s="corrected"){if(t.length>0&&function My(n,e,t){return t.some(r=>Pd(n,e,r)&&nn(r)!==kt)}(n,t,r)){const c=new Me(e,function Od(n,e,t,r){const s={};s[kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&nn(u)!==kt){const c=new Me([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,s[nn(u)]=c}return s}(n,e,r,new Me(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function cg(n,e,t){return t.some(r=>Pd(n,e,r))}(n,t,r)){const c=new Me(n.segments,function Sy(n,e,t,r,s,u){const c={};for(const p of r)if(Pd(n,t,p)&&!s[nn(p)]){const v=new Me([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[nn(p)]=v}return Object.assign(Object.assign({},s),c)}(n,e,t,r,n.children,s));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Me(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Pd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function xy(n,e,t,r){return!!(nn(n)===r||r!==kt&&Pd(e,t,n))&&("**"===n.path||Lu(e,n,t).matched)}function Ny(n,e,t){return 0===e.length&&!n.children[t]}class oa{constructor(e){this.segmentGroup=e||null}}class Sr{constructor(e){this.urlTree=e}}function Co(n){return Hi(new oa(n))}function tc(n){return Hi(new Sr(n))}class uf{constructor(e,t,r,s,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=ec(this.urlTree.root,[],[],this.config).segmentGroup,t=new Me(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,kt).pipe((0,Pt.U)(u=>this.createUrlTree($a(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qi(u=>{if(u instanceof Sr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof oa?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,kt).pipe((0,Pt.U)(s=>this.createUrlTree($a(s),e.queryParams,e.fragment))).pipe(qi(s=>{throw s instanceof oa?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new Me([],{[kt]:e}):e;return new Se(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Pt.U)(u=>new Me([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Fn.D)(s).pipe(zs(u=>{const c=r.children[u],p=of(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,Pt.U)(v=>({segment:v,outlet:u})))}),Tr((u,c)=>(u[c.outlet]=c.segment,u),{}),function eg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ps((s,u)=>n(s,u,r)):di.y,Ed(1),t?Xp(e):Sn(()=>new qs))}())}expandSegment(e,t,r,s,u,c){return(0,Fn.D)(r).pipe(zs(p=>this.expandSegmentAgainstRoute(e,t,r,p,s,u,c).pipe(qi(I=>{if(I instanceof oa)return yt(null);throw I}))),Ws(p=>!!p),qi((p,v)=>{if(p instanceof qs||"EmptyError"===p.name)return Ny(t,s,u)?yt(new Me([],{})):Co(t);throw p}))}expandSegmentAgainstRoute(e,t,r,s,u,c,p){return xy(s,t,u,c)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c):Co(t):Co(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?tc(u):this.lineralizeSegments(r,u).pipe((0,An.z)(c=>{const p=new Me(c,{});return this.expandSegment(e,p,t,c,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){const{matched:p,consumedSegments:v,remainingSegments:I,positionalParamSegments:S}=Lu(t,s,u);if(!p)return Co(t);const x=this.applyRedirectCommands(v,s.redirectTo,S);return s.redirectTo.startsWith("/")?tc(x):this.lineralizeSegments(s,x).pipe((0,An.z)(V=>this.expandSegment(e,t,r,V.concat(I),c,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?yt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Pt.U)(x=>(r._loadedConfig=x,new Me(s,{})))):yt(new Me(s,{}));const{matched:c,consumedSegments:p,remainingSegments:v}=Lu(t,r,s);return c?this.getChildConfig(e,r,s).pipe((0,An.z)(S=>{const x=S.module,V=S.routes,{segmentGroup:H,slicedSegments:z}=ec(t,p,v,V),ge=new Me(H.segments,H.children);if(0===z.length&&ge.hasChildren())return this.expandChildren(x,V,ge).pipe((0,Pt.U)(Et=>new Me(p,Et)));if(0===V.length&&0===z.length)return yt(new Me(p,{}));const ke=nn(r)===u;return this.expandSegment(x,ge,V,z,ke?kt:u,!0).pipe((0,Pt.U)(gt=>new Me(p.concat(gt.segments),gt.children)))})):Co(t)}getChildConfig(e,t,r){return t.children?yt(new Nd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?yt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,An.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,Pt.U)(u=>(t._loadedConfig=u,u))):function Lr(n){return Hi(Zs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):yt(new Nd([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?yt(s.map(c=>{const p=e.get(c);let v;if(function Jh(n){return n&&Ba(n.canLoad)}(p))v=p.canLoad(t,r);else{if(!Ba(p))throw new Error("Invalid CanLoad guard");v=p(t,r)}return pi(v)})).pipe(sa(),(0,Jr.b)(c=>{if(!ku(c))return;const p=Zs(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,Pt.U)(c=>!0===c)):yt(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return yt(r);if(s.numberOfChildren>1||!s.children[kt])return Hi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Se(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Jn(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const p=s.substring(1);r[u]=t[p]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let c={};return Jn(t.children,(p,v)=>{c[v]=this.createSegmentGroup(e,p,r,s)}),new Me(u,c)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function $a(n){const e={};for(const r of Object.keys(n.children)){const u=$a(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ki(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new Me(n.segments.concat(e.segments),e.children)}return n}(new Me(n.segments,e))}class dg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ha{constructor(e,t){this.component=e,this.route=t}}function cf(n,e,t){const r=n._root;return mi(r,e?e._root:null,t,[r.value])}function nc(n,e,t){const r=function Ry(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function mi(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Do(e);return n.children.forEach(c=>{(function fg(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const v=function Oy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Rt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rt(n.url,e.url)||!Wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zh(n,e)||!Wi(n.queryParams,e.queryParams);default:return!zh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new dg(r)):(u.data=c.data,u._resolvedData=c._resolvedData),mi(n,e,u.component?p?p.children:null:t,r,s),v&&p&&p.outlet&&p.outlet.isActivated&&s.canDeactivateChecks.push(new Ha(p.outlet.component,c))}else c&&Ga(e,p,s),s.canActivateChecks.push(new dg(r)),mi(n,null,u.component?p?p.children:null:t,r,s)})(c,u[c.value.outlet],t,r.concat([c.value]),s),delete u[c.value.outlet]}),Jn(u,(c,p)=>Ga(c,t.getContext(p),s)),s}function Ga(n,e,t){const r=Do(n),s=n.value;Jn(r,(u,c)=>{Ga(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Ha(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class ff{}function pf(n){return new Qr.y(e=>e.error(n))}class gf{constructor(e,t,r,s,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=ec(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,kt);if(null===t)return null;const r=new Ru([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Io(r,t),u=new qh(this.url,s);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=vy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=of(e,u),v=this.processSegmentGroup(p,c,u);if(null===v)return null;r.push(...v)}const s=gg(r);return function Ly(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,s);if(null!==c)return c}return Ny(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!xy(e,t,r,s))return null;let u,c=[],p=[];if("**"===e.path){const H=r.length>0?bd(r).parameters:{};u=new Ru(r,H,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),nn(e),e.component,e,h(t),g(t)+r.length,T(e))}else{const H=Lu(t,e,r);if(!H.matched)return null;c=H.consumedSegments,p=H.remainingSegments,u=new Ru(c,H.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),nn(e),e.component,e,h(t),g(t)+c.length,T(e))}const v=function Vy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:S}=ec(t,c,p,v.filter(H=>void 0===H.redirectTo),this.relativeLinkResolution);if(0===S.length&&I.hasChildren()){const H=this.processChildren(v,I);return null===H?null:[new Io(u,H)]}if(0===v.length&&0===S.length)return[new Io(u,[])];const x=nn(e)===s,V=this.processSegment(v,I,S,x?kt:s);return null===V?null:[new Io(u,V)]}}function Uy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function gg(n){const e=[],t=new Set;for(const r of n){if(!Uy(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=gg(r.children);e.push(new Io(r.value,s))}return e.filter(r=>!t.has(r))}function h(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function E(n){return n.data||{}}function T(n){return n.resolve||{}}function Je(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function it(n){return Vn(e=>{const t=n(e);return t?(0,Fn.D)(t).pipe((0,Pt.U)(()=>e)):yt(e)})}class ic extends class Yi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Vu=new m.OlP("ROUTES");class Uu{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,Pt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Nd(Ki(c.injector.get(Vu,void 0,m.XFs.Self|m.XFs.Optional)).map(sf),c)}),qi(u=>{throw t._loader$=void 0,u}));return t._loader$=new vd(s,()=>new mr.x).pipe(xi()),t._loader$}loadModuleFactory(e){return pi(e()).pipe((0,An.z)(t=>t instanceof m.YKP?yt(t):(0,Fn.D)(this.compiler.compileModuleAsync(t))))}}class By{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function aa(n){throw n}function kd(n,e,t){return e.parse("/")}function Fd(n,e){return yt(null)}const yf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ld={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yi=(()=>{class n{constructor(t,r,s,u,c,p,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mr.x,this.errorHandler=aa,this.malformedUriErrorHandler=kd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fd,afterPreactivation:Fd},this.urlHandlingStrategy=new By,this.routeReuseStrategy=new ic,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const x=c.get(m.R0b);this.isNgZoneEnabled=x instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function ql(){return new Se(new Me([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Uu(c,p,V=>this.triggerEvent(new Bl(V)),V=>this.triggerEvent(new ms(V))),this.routerState=Ua(this.currentUrlTree,this.rootComponentType),this.transitions=new Yr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ps(s=>0!==s.id),(0,Pt.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Vn(s=>{let u=!1,c=!1;return yt(s).pipe((0,Jr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Vn(p=>{const v=this.browserUrlTree.toString(),I=!this.navigated||p.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return mg(p.source)&&(this.browserUrlTree=p.extractedUrl),yt(p).pipe(Vn(x=>{const V=this.transitions.getValue();return r.next(new gs(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),V!==this.transitions.getValue()?Qo.E:Promise.resolve(x)}),function lf(n,e,t,r){return Vn(s=>function ja(n,e,t,r,s){return new uf(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,Pt.U)(u=>Object.assign(Object.assign({},s),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Jr.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function R(n,e,t,r,s){return(0,An.z)(u=>function Fy(n,e,t,r,s="emptyOnly",u="legacy"){try{const c=new gf(n,e,t,r,s,u).recognize();return null===c?pf(new ff):yt(c)}catch(c){return pf(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,s).pipe((0,Pt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Jr.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(H,x)}this.browserUrlTree=x.urlAfterRedirects}const V=new ea(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(V)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:H,source:z,restoredState:ge,extras:ke}=p,ft=new gs(V,this.serializeUrl(H),z,ge);r.next(ft);const gt=Ua(H,this.rootComponentType).snapshot;return yt(Object.assign(Object.assign({},p),{targetSnapshot:gt,urlAfterRedirects:H,extras:Object.assign(Object.assign({},ke),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Qo.E}),it(p=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:H}}=p;return this.hooks.beforePreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!H})}),(0,Jr.b)(p=>{const v=new ng(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}),(0,Pt.U)(p=>Object.assign(Object.assign({},p),{guards:cf(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Py(n,e){return(0,An.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?yt(Object.assign(Object.assign({},t),{guardsResult:!0})):function pg(n,e,t,r){return(0,Fn.D)(n).pipe((0,An.z)(s=>function rc(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?yt(u.map(p=>{const v=nc(p,e,s);let I;if(function jE(n){return n&&Ba(n.canDeactivate)}(v))I=pi(v.canDeactivate(n,e,t,r));else{if(!Ba(v))throw new Error("Invalid CanDeactivate guard");I=pi(v(n,e,t,r))}return I.pipe(Ws())})).pipe(sa()):yt(!0)}(s.component,s.route,t,e,r)),Ws(s=>!0!==s,!0))}(c,r,s,n).pipe((0,An.z)(p=>p&&function ug(n){return"boolean"==typeof n}(p)?function Mr(n,e,t,r){return(0,Fn.D)(e).pipe(zs(s=>_d(function hf(n,e){return null!==n&&e&&e(new Ri(n)),yt(!0)}(s.route.parent,r),function df(n,e){return null!==n&&e&&e(new La(n)),yt(!0)}(s.route,r),function To(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function hg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Mi(()=>yt(c.guards.map(v=>{const I=nc(v,c.node,t);let S;if(function ef(n){return n&&Ba(n.canActivateChild)}(I))S=pi(I.canActivateChild(r,n));else{if(!Ba(I))throw new Error("Invalid CanActivateChild guard");S=pi(I(r,n))}return S.pipe(Ws())})).pipe(sa())));return yt(u).pipe(sa())}(n,s.path,t),function ky(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return yt(!0);const s=r.map(u=>Mi(()=>{const c=nc(u,e,t);let p;if(function Xh(n){return n&&Ba(n.canActivate)}(c))p=pi(c.canActivate(e,n));else{if(!Ba(c))throw new Error("Invalid CanActivate guard");p=pi(c(e,n))}return p.pipe(Ws())}));return yt(s).pipe(sa())}(n,s.route,t))),Ws(s=>!0!==s,!0))}(r,u,n,e):yt(p)),(0,Pt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Jr.b)(p=>{if(ku(p.guardsResult)){const I=Zs(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw I.url=p.guardsResult,I}const v=new Ul(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(v)}),ps(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),it(p=>{if(p.guards.canActivateChecks.length)return yt(p).pipe((0,Jr.b)(v=>{const I=new Ar(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}),Vn(v=>{let I=!1;return yt(v).pipe(function q(n,e){return(0,An.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return yt(t);let u=0;return(0,Fn.D)(s).pipe(zs(c=>function ie(n,e,t,r){return function Ue(n,e,t,r){const s=Je(n);if(0===s.length)return yt({});const u={};return(0,Fn.D)(s).pipe((0,An.z)(c=>function _t(n,e,t,r){const s=nc(n,e,r);return pi(s.resolve?s.resolve(e,t):s(e,t))}(n[c],e,t,r).pipe((0,Jr.b)(p=>{u[c]=p}))),Ed(1),(0,An.z)(()=>Je(u).length===s.length?yt(u):Qo.E))}(n._resolve,n,e,r).pipe((0,Pt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),vy(n,t).resolve),null)))}(c.route,r,n,e)),(0,Jr.b)(()=>u++),Ed(1),(0,An.z)(c=>u===s.length?yt(t):Qo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Jr.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,Jr.b)(v=>{const I=new fi(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}))}),it(p=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:H}}=p;return this.hooks.afterPreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!H})}),(0,Pt.U)(p=>{const v=function Ey(n,e,t){const r=Zl(n,e._root,t?t._root:void 0);return new Cd(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:v})}),(0,Jr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,Pt.U)(r=>(new ag(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Jr.b)({next(){u=!0},complete(){u=!0}}),function tg(n){return(0,kr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===s.id&&(this.currentNavigation=null)}),qi(p=>{if(c=!0,function wd(n){return n&&n[Gl]}(p)){const v=ku(p.url);v||(this.navigated=!0,this.restoreHistory(s,!0));const I=new wn(s.id,this.serializeUrl(s.extractedUrl),p.message);r.next(I),v?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),x={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mg(s.source)};this.scheduleNavigation(S,"imperative",null,x,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const v=new Vl(s.id,this.serializeUrl(s.extractedUrl),p);r.next(v);try{s.resolve(this.errorHandler(p))}catch(I){s.reject(I)}}return Qo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const u={replaceUrl:!0},c=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(c){const v=Object.assign({},c);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Xl(t),this.config=t.map(sf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:v}=r,I=s||this.routerState.root,S=v?this.currentUrlTree.fragment:c;let x=null;switch(p){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function Ys(n,e,t,r,s){if(0===t.length)return sg(e.root,e.root,e.root,r,s);const u=function Iy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new by(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Jn(u.outlets,(v,I)=>{p[I]="string"==typeof v?v.split("/"):v}),[...s,{outlets:p}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===c?(u.split("/").forEach((p,v)=>{0==v&&"."===p||(0==v&&""===p?t=!0:".."===p?e++:""!=p&&s.push(p))}),s):[...s,u]},[]);return new by(t,e,r)}(t);if(u.toRoot())return sg(e.root,e.root,new Me([],{}),r,s);const c=function og(n,e,t){if(n.isAbsolute)return new Zh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Zh(u,u===e.root,0)}const r=ia(n.commands[0])?0:1;return function Dy(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Zh(r,!1,s-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?Qs(c.segmentGroup,c.index,u.commands):Ty(c.segmentGroup,c.index,u.commands);return sg(e.root,c.segmentGroup,p,r,s)}(I,this.currentUrlTree,t,x,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=ku(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function _f(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},yf):!1===r?Object.assign({},Ld):r,ku(t))return Nu(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Nu(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Su(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,c){var p,v;if(this.disposed)return Promise.resolve(!1);let I,S,x;c?(I=c.resolve,S=c.reject,x=c.promise):x=new Promise((z,ge)=>{I=z,S=ge});const V=++this.navigationId;let H;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),H=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):H=0,this.setTransition({id:V,targetPageId:H,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:I,reject:S,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){var s,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new wn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function mg(n){return"imperative"!==n}let yg=(()=>{class n{constructor(t,r,s,u,c){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new mr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Vd(this.skipLocationChange),replaceUrl:Vd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(yi),m.Y36(ra),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})();function Vd(n){return""===n||!!n}class Hy{}class HE{preload(e,t){return yt(null)}}let GE=(()=>{class n{constructor(t,r,s,u){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=new Uu(s,r,v=>t.triggerEvent(new Bl(v)),v=>t.triggerEvent(new ms(v)))}setUpPreloading(){this.subscription=this.router.events.pipe(ps(t=>t instanceof Su),zs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;s.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?s.push(this.preloadConfig(t,u)):u.children&&s.push(this.processRoutes(t,u.children));return(0,Fn.D)(s).pipe((0,Gi.J)(),(0,Pt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?yt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,An.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(yi),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(Hy))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),_g=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Su&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $l&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new $l(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const _s=new m.OlP("ROUTER_CONFIGURATION"),qy=new m.OlP("ROUTER_FORROOT_GUARD"),qE=[ye,{provide:qn,useClass:Mn},{provide:yi,useFactory:function Wy(n,e,t,r,s,u,c={},p,v){const I=new yi(null,n,e,t,r,s,Ki(u));return p&&(I.urlHandlingStrategy=p),v&&(I.routeReuseStrategy=v),function KE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,I),c.enableTracing&&I.events.subscribe(S=>{var x,V;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(V=console.groupEnd)||void 0===V||V.call(console)}),I},deps:[qn,Jl,ye,m.zs3,m.Sil,Vu,_s,[class mf{},new m.FiY],[class xn{},new m.FiY]]},Jl,{provide:ra,useFactory:function vg(n){return n.routerState.root},deps:[yi]},GE,HE,class Gy{preload(e,t){return t().pipe(qi(()=>yt(null)))}},{provide:_s,useValue:{enableTracing:!1}}];function nD(){return new m.PXZ("Router",yi)}let Bu=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[qE,zy(t),{provide:qy,useFactory:WE,deps:[[yi,new m.FiY,new m.tp0]]},{provide:_s,useValue:r||{}},{provide:de,useFactory:zE,deps:[ce,[new m.tBr(Xe),new m.FiY],_s]},{provide:_g,useFactory:rD,deps:[yi,gu,_s]},{provide:Hy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:HE},{provide:m.PXZ,multi:!0,useFactory:nD},[Ud,{provide:m.ip1,multi:!0,useFactory:ZE,deps:[Ud]},{provide:Zy,useFactory:Ky,deps:[Ud]},{provide:m.tb,multi:!0,useExisting:Zy}]]}}static forChild(t){return{ngModule:n,providers:[zy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(qy,8),m.LFG(yi,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function rD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new _g(n,e,t)}function zE(n,e,t={}){return t.useHash?new De(n,e):new Ke(n,e)}function WE(n){return"guarded"}function zy(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:Vu,multi:!0,useValue:n}]}let Ud=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new mr.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(p=>r=p),u=this.injector.get(yi),c=this.injector.get(_s);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?yt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(_s),s=this.injector.get(GE),u=this.injector.get(_g),c=this.injector.get(yi),p=this.injector.get(m.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),s.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function ZE(n){return n.appInitializer.bind(n)}function Ky(n){return n.bootstrapListener.bind(n)}const Zy=new m.OlP("Router Initializer"),Qy=new m.OlP("GETS_ALL_TASK_DTO");let QE=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),sc=(()=>{class n extends QE{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const Ao=new m.OlP("NgValueAccessor"),fS={provide:Ao,useExisting:(0,m.Gpc)(()=>vf),multi:!0},iD=new m.OlP("CompositionEventMode");let vf=(()=>{class n extends QE{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function JE(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(iD,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[m._Bn([fS]),m.qOj]}),n})();const bn=new m.OlP("NgValidators"),$u=new m.OlP("NgAsyncValidators");function t_(n){return null!=n}function n_(n){const e=(0,m.QGY)(n)?(0,Fn.D)(n):n;return(0,m.CqO)(e),e}function wf(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Js(n,e){return e.map(t=>t(n))}function l0(n){return n.map(e=>function u0(n){return!n.validate}(e)?e:t=>e.validate(t))}function So(n){return null!=n?function wg(n){if(!n)return null;const e=n.filter(t_);return 0==e.length?null:function(t){return wf(Js(t,e))}}(l0(n)):null}function Ig(n){return null!=n?function bg(n){if(!n)return null;const e=n.filter(t_);return 0==e.length?null:function(t){return function YE(...n){const e=(0,Ln.jO)(n),{args:t,keys:r}=Si(n),s=new Qr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let v=c,I=c;for(let S=0;S<c;S++){let x=!1;(0,Yo.Xf)(t[S]).subscribe((0,Gn.x)(u,V=>{x||(x=!0,I--),p[S]=V},()=>v--,void 0,()=>{(!v||!x)&&(I||u.next(r?_o(r,p):p),u.complete())}))}});return e?s.pipe(yd(e)):s}(Js(t,e).map(n_)).pipe((0,Pt.U)(wf))}}(l0(n)):null}function Dg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function sD(n){return n._rawValidators}function r_(n){return n._rawAsyncValidators}function c0(n){return n?Array.isArray(n)?n:[n]:[]}function oc(n,e){return Array.isArray(n)?n.includes(e):n===e}function bf(n,e){const t=c0(e);return c0(n).forEach(s=>{oc(t,s)||t.push(s)}),t}function Cg(n,e){return c0(e).filter(t=>!oc(n,t))}class Tg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=So(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ig(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ua extends Tg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Qi extends Tg{get formDirective(){return null}get path(){return null}}class d0{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let h0=(()=>{class n extends d0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ua,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[m.qOj]}),n})(),i_=(()=>{class n extends d0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Qi,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[m.qOj]}),n})();function Xs(n,e){If(n,e),e.valueAccessor.writeValue(n.value),function o_(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qa(n,e)})}(n,e),function y0(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function aD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qa(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function m0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Bd(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Df(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Mg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function If(n,e){const t=sD(n);null!==e.validator?n.setValidators(Dg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=r_(n);null!==e.asyncValidator?n.setAsyncValidators(Dg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Mg(e._rawValidators,s),Mg(e._rawAsyncValidators,s)}function Df(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=sD(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(c=>c!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=r_(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(c=>c!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Mg(e._rawValidators,r),Mg(e._rawAsyncValidators,r),t}function qa(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function uc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $d="VALID",Tf="INVALID",Gu="PENDING",lc="DISABLED";function Hd(n){return(Af(n)?n.validators:n)||null}function b0(n){return Array.isArray(n)?So(n):n||null}function Ng(n,e){return(Af(e)?e.asyncValidators:n)||null}function uD(n){return Array.isArray(n)?Ig(n):n||null}function Af(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const l_=n=>n instanceof h_,c_=n=>n instanceof f_;function D0(n){return l_(n)?n.value:n.getRawValue()}function C0(n,e){const t=c_(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[e])throw new m.vHH(1001,"")}function Ji(n,e){c_(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new m.vHH(1002,"")})}class d_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=b0(this._rawValidators),this._composedAsyncValidatorFn=uD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===$d}get invalid(){return this.status===Tf}get pending(){return this.status==Gu}get disabled(){return this.status===lc}get enabled(){return this.status!==lc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=b0(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=uD(e)}addValidators(e){this.setValidators(bf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Cg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Cg(e,this._rawAsyncValidators))}hasValidator(e){return oc(this._rawValidators,e)}hasAsyncValidator(e){return oc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Gu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lc,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$d,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$d||this.status===Gu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lc:$d}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Gu,this._hasOwnPendingAsyncValidator=!0;const t=n_(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function w0(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=c_(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:(n=>n instanceof CS)(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?lc:this.errors?Tf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gu)?Gu:this._anyControlsHaveStatus(Tf)?Tf:$d}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Af(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class h_ extends d_{constructor(e=null,t,r){super(Hd(t),Ng(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Af(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){uc(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){uc(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class f_ extends d_{constructor(e,t,r){super(Hd(t),Ng(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ji(this,e),Object.keys(e).forEach(r=>{C0(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=D0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class CS extends d_{constructor(e,t,r){super(Hd(t),Ng(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Ji(this,e),e.forEach((r,s)=>{C0(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>D0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let g_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),k0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const m_=new m.OlP("NgModelWithFormControlWarning"),fD={provide:Qi,useExisting:(0,m.Gpc)(()=>kg)};let kg=(()=>{class n extends Qi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Df(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Xs(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Bd(t.control||null,t,!1),uc(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function xg(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(Bd(r||null,t),l_(s)&&(Xs(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function _0(n,e){If(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function a_(n,e){return Df(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){If(this.form,this),this._oldForm&&Df(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(bn,10),m.Y36($u,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&m.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([fD]),m.qOj,m.TTD]}),n})();const V0={provide:ua,useExisting:(0,m.Gpc)(()=>y_)};let y_=(()=>{class n extends ua{constructor(t,r,s,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new m.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Hu(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===vf?t=u:function jd(n){return Object.getPrototypeOf(n.constructor)===sc}(u)?r=u:s=u}),s||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function ac(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function s_(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(m.Y36(Qi,13),m.Y36(bn,10),m.Y36($u,10),m.Y36(Ao,10),m.Y36(m_,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[m._Bn([V0]),m.qOj,m.TTD]}),n})(),wD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[k0]]}),n})(),bD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:m_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[wD]}),n})();const b_=new m.OlP("ADDS_TASK_DTO");let Q0=(()=>{class n{constructor(t,r){this._addsTaskDto=t,this._getsAllTaskDto=r,this.taskList=new f_({task:new h_}),this.taskList$=this._getsAllTaskDto.getAll()}onTaskListSubmited(t){var r;t.invalid||(this._addsTaskDto.add({task:null===(r=t.get("task"))||void 0===r?void 0:r.value,done:!1,created:Date.now()}),this.taskList.reset())}onclear(){this.taskList.reset()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(b_),m.Y36(Qy))},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-taskadd"]],decls:8,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-12","col-md-12","text-center"],[3,"formGroup","ngSubmit"],["type","text","formControlName","task","placeholder","Task"],["type","submit","value","Add Task",1,"btn","btn-info"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),m.NdJ("ngSubmit",function(){return r.onTaskListSubmited(r.taskList)}),m._UZ(4,"input",4)(5,"input",5),m.TgZ(6,"button",6),m.NdJ("click",function(){return r.onclear()}),m._uU(7,"Cancel"),m.qZA()()()()()),2&t&&(m.xp6(3),m.Q6J("formGroup",r.taskList))},directives:[g_,i_,kg,vf,h0,y_],encapsulation:2,changeDetection:0}),n})();const I_=new m.OlP("SETS_TASK_DTO"),J0=new m.OlP("REMOVES_TASK_DTO");function DD(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"ul")(1,"li",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8),m._uU(7,"Do zrobienia:"),m.qZA(),m.TgZ(8,"input",9),m.NdJ("click",function(){const u=m.CHM(t).$implicit;return m.oxw().onTaskChecked(u)}),m.qZA(),m.TgZ(9,"label",10),m._uU(10),m.qZA()(),m.TgZ(11,"span",11)(12,"button",12),m.NdJ("click",function(){const u=m.CHM(t).$implicit;return m.oxw().onTaskRemoveed(u.id)}),m._uU(13," Delete "),m.qZA()()()()()()()}if(2&n){const t=e.$implicit;m.xp6(8),m.Q6J("checked",t.done),m.xp6(2),m.hij(" ",t.task," ")}}let X0=(()=>{class n{constructor(t,r,s,u){this._getsAllTaskDto=t,this._setsTaskDto=r,this._removesTaskDto=s,this.router=u,this.task$=this._getsAllTaskDto.getAll().pipe((0,Pt.U)(c=>c.sort((p,v)=>p.created-v.created)))}onTaskChecked(t){this._setsTaskDto.set({done:!t.done,task:t.task,id:t.id})}onTaskRemoveed(t){this._removesTaskDto.remove(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Qy),m.Y36(I_),m.Y36(J0),m.Y36(yi))},n.\u0275cmp=m.Xpm({type:n,selectors:[["lib-task-list"]],decls:4,vars:3,consts:[[1,"container","container-fliud"],[1,"form-group"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","col-8"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-start"],[1,"ms-3","me-auto"],[1,"fw-bold"],["type","checkbox","name","flexRadioDefault",1,"form-check-input","rounded","circle","pointer","text-decoration-line-trought",3,"checked","click"],[1,"form-check-label","striketrought"],[1,"badge","bg-primary","rounded-pill"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleMOdal",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1),m.YNc(2,DD,14,2,"ul",2),m.ALo(3,"async"),m.qZA()()),2&t&&(m.xp6(2),m.Q6J("ngForOf",m.lcZ(3,1,r.task$)))},directives:[fr],pipes:[ml],encapsulation:2,changeDetection:0}),n})(),CD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-add-task-page"]],decls:2,vars:0,template:function(t,r){1&t&&m._UZ(0,"lib-taskadd")(1,"lib-task-list")},directives:[Q0,X0],encapsulation:2,changeDetection:0}),n})(),ew=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Ci,bD]]}),n})();var OS=P(4986),Vr=P(5813);function D_(){return(0,kr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Gn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function PS(n,e){return n===e}var et,da=P(2011),AD=(P(820),P(3942)),_e=P(5861),qu=P(9681),C_=P(4859),Ur=P(1877),Yt=P(2090),kS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ha={},Hg=Hg||{},xt=kS||self;function T_(){}function Gg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function dc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Rf="closure_uid_"+(1e9*Math.random()>>>0),MD=0;function xD(n,e,t){return n.call.apply(n.bind,arguments)}function ND(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Xr(n,e,t){return(Xr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xD:ND).apply(null,arguments)}function qg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ei(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[s].apply(r,c)}}function xo(){this.s=this.s,this.o=this.o}var RD={};xo.prototype.s=!1,xo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function SD(n){return Object.prototype.hasOwnProperty.call(n,Rf)&&n[Rf]||(n[Rf]=++MD)}(this);delete RD[n]}},xo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qd=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},nw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function zg(n){return Array.prototype.concat.apply([],arguments)}function eo(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function zu(n){return/^[\s\xa0]*$/.test(n)}var In,ti=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function sr(n,e){return-1!=n.indexOf(e)}function zd(n,e){return n<e?-1:n>e?1:0}e:{var Wg=xt.navigator;if(Wg){var hc=Wg.userAgent;if(hc){In=hc;break e}}In=""}function Wu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function fc(n){const e={};for(const t in n)e[t]=n[t];return e}var pc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gc(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<pc.length;u++)t=pc[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ku(n){return Ku[" "](n),n}Ku[" "]=T_;var Of,n,Kd=sr(In,"Opera"),No=sr(In,"Trident")||sr(In,"MSIE"),A_=sr(In,"Edge"),Kg=A_||No,S_=sr(In,"Gecko")&&!(sr(In.toLowerCase(),"webkit")&&!sr(In,"Edge"))&&!(sr(In,"Trident")||sr(In,"MSIE"))&&!sr(In,"Edge"),rw=sr(In.toLowerCase(),"webkit")&&!sr(In,"Edge");function M_(){var n=xt.document;return n?n.documentMode:void 0}e:{var Zg="",Yg=(n=In,S_?/rv:([^\);]+)(\)|;)/.exec(n):A_?/Edge\/([\d\.]+)/.exec(n):No?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):rw?/WebKit\/(\S+)/.exec(n):Kd?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yg&&(Zg=Yg?Yg[1]:""),No){var Qg=M_();if(null!=Qg&&Qg>parseFloat(Zg)){Of=String(Qg);break e}}Of=Zg}var PD={};var ow=xt.document&&No&&(M_()||parseInt(Of,10))||void 0,kD=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",T_,e),xt.removeEventListener("test",T_,e)}catch(t){}return n}();function _i(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Zd(n,e){if(_i.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(S_){e:{try{Ku(e.nodeName);var s=!0;break e}catch(u){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:FD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Zd.Z.h.call(this)}}_i.prototype.h=function(){this.defaultPrevented=!0},ei(Zd,_i);var FD={2:"touch",3:"pen",4:"mouse"};Zd.prototype.h=function(){Zd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Yd="closure_listenable_"+(1e6*Math.random()|0),LD=0;function VD(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++LD,this.ca=this.fa=!1}function N_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Jg(n){this.src=n,this.g={},this.h=0}function Pf(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=qd(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(N_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kf(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}Jg.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=kf(n,e,r,s);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new VD(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var R_="closure_lm_"+(1e6*Math.random()|0),aw={};function UD(n,e,t,r,s){if(r&&r.once)return O_(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)UD(n,e[u],t,r,s);return null}return t=em(t),n&&n[Yd]?n.N(e,t,dc(r)?!!r.capture:!!r,s):BD(n,e,t,!1,r,s)}function BD(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=dc(s)?!!s.capture:!!s,p=Xg(n);if(p||(n[R_]=p=new Jg(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function jD(){var e=HD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)kD||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(mc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function O_(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)O_(n,e[u],t,r,s);return null}return t=em(t),n&&n[Yd]?n.O(e,t,dc(r)?!!r.capture:!!r,s):BD(n,e,t,!0,r,s)}function $D(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)$D(n,e[u],t,r,s);else r=dc(r)?!!r.capture:!!r,t=em(t),n&&n[Yd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kf(u=n.g[e],t,r,s))&&(N_(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Xg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kf(e,t,r,s)),(t=-1<n?e[n]:null)&&P_(t))}function P_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Yd])Pf(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(mc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Xg(e))?(Pf(t,n),0==t.h&&(t.src=null,e[R_]=null)):N_(n)}}}function mc(n){return n in aw?aw[n]:aw[n]="on"+n}function HD(n,e){if(n.ca)n=!0;else{e=new Zd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&P_(n),n=t.call(r,e)}return n}function Xg(n){return(n=n[R_])instanceof Jg?n:null}var k_="__closure_events_fn_"+(1e9*Math.random()>>>0);function em(n){return"function"==typeof n?n:(n[k_]||(n[k_]=function(e){return n.handleEvent(e)}),n[k_])}function or(){xo.call(this),this.i=new Jg(this),this.P=this,this.I=null}function ni(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new _i(e,n);else if(e instanceof _i)e.target=e.target||n;else{var s=e;gc(e=new _i(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=Ff(c,r,!0,e)&&s}if(s=Ff(c=e.g=n,r,!0,e)&&s,s=Ff(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Ff(c=e.g=t[u],r,!1,e)&&s}function Ff(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,v=c.ia||c.src;c.fa&&Pf(n.i,c),s=!1!==p.call(v,r)&&s}}return s&&!r.defaultPrevented}ei(or,xo),or.prototype[Yd]=!0,or.prototype.removeEventListener=function(n,e,t,r){$D(this,n,e,t,r)},or.prototype.M=function(){if(or.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)N_(t[r]);delete n.g[e],n.h--}}this.I=null},or.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var F_=xt.JSON.stringify;function GD(){var n=WD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var tm,uw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zD,n=>n.reset());class zD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lw(n){xt.setTimeout(()=>{throw n},0)}function L_(n,e){tm||function cw(){var n=xt.Promise.resolve(void 0);tm=function(){n.then(V_)}}(),Lf||(tm(),Lf=!0),WD.add(n,e)}var Lf=!1,WD=new class qD{constructor(){this.h=this.g=null}add(e,t){const r=uw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function V_(){for(var n;n=GD();){try{n.h.call(n.g)}catch(t){lw(t)}var e=uw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Lf=!1}function nm(n,e){or.call(this),this.h=n||1,this.g=e||xt,this.j=Xr(this.kb,this),this.l=Date.now()}function dw(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function yc(n,e,t){if("function"==typeof n)t&&(n=Xr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xr(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function U_(n){n.g=yc(()=>{n.g=null,n.i&&(n.i=!1,U_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ei(nm,or),(et=nm.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ni(this,"tick"),this.da&&(dw(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){nm.Z.M.call(this),dw(this),delete this.g};class B_ extends xo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:U_(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _c(n){xo.call(this),this.h=n,this.g={}}ei(_c,xo);var hw=[];function Vf(n,e,t,r){Array.isArray(t)||(t&&(hw[0]=t.toString()),t=hw);for(var s=0;s<t.length;s++){var u=UD(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Uf(n){Wu(n.g,function(e,t){this.g.hasOwnProperty(t)&&P_(e)},n),n.g={}}function Qd(){this.g=!0}function Zu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function fw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return F_(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}_c.prototype.M=function(){_c.Z.M.call(this),Uf(this)},_c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qd.prototype.Aa=function(){this.g=!1},Qd.prototype.info=function(){};var Yu={},rm=null;function Bf(){return rm=rm||new or}function $_(n){_i.call(this,Yu.Ma,n)}function vc(n){const e=Bf();ni(e,new $_(e,n))}function H_(n,e){_i.call(this,Yu.STAT_EVENT,n),this.stat=e}function Fi(n){const e=Bf();ni(e,new H_(e,n))}function G_(n,e){_i.call(this,Yu.Na,n),this.size=e}function Jd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}Yu.Ma="serverreachability",ei($_,_i),Yu.STAT_EVENT="statevent",ei(H_,_i),Yu.Na="timingevent",ei(G_,_i);var Xd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},q_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function z_(){}function gw(){}z_.prototype.h=null;var sm,eh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function jf(){_i.call(this,"d")}function im(){_i.call(this,"c")}function $f(){}function th(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new _c(this),this.P=mw,this.W=new nm(n=Kg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new W_}function W_(){this.i=null,this.g="",this.h=!1}ei(jf,_i),ei(im,_i),ei($f,z_),$f.prototype.g=function(){return new XMLHttpRequest},$f.prototype.i=function(){return{}},sm=new $f;var mw=45e3,om={},Hf={};function yw(n,e,t){n.K=1,n.v=Es(Xu(e)),n.s=t,n.U=!0,_w(n,null)}function _w(n,e){n.F=Date.now(),zn(n),n.A=Xu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),tv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new W_,n.g=tp(n.l,t?e:null,!n.s),0<n.O&&(n.L=new B_(Xr(n.Ia,n,n.g),n.O)),Vf(n.V,n.g,"readystatechange",n.gb),e=n.H?fc(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),vc(1),function FS(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),v=0;v<p.length;v++){var I=p[v].split("=");if(1<I.length){var S=I[0];I=I[1];var x=S.split("_");c=2<=x.length&&"type"==x[1]?c+(S+"=")+I+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function vw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function K_(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=ZD(n,t),s==Hf){4==e&&(n.o=4,Fi(14),r=!1),Zu(n.j,n.m,null,"[Incomplete Response]");break}if(s==om){n.o=4,Fi(15),Zu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zu(n.j,n.m,s,null),Y_(n,s)}vw(n)&&s!=Hf&&s!=om&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Fi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Em(e),e.L=!0,Fi(11))):(Zu(n.j,n.m,t,"[Invalid Chunked Response]"),Qu(n),Gf(n))}function ZD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Hf:(t=Number(e.substring(t,r)),isNaN(t)?om:(r+=1)+t>e.length?Hf:(e=e.substr(r,t),n.C=r+t,e))}function zn(n){n.Y=Date.now()+n.P,Z_(n,n.P)}function Z_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Jd(Xr(n.eb,n),e)}function am(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function Gf(n){0==n.l.G||n.I||Pw(n.l,n)}function Qu(n){am(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,dw(n.W),Uf(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Y_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||lm(t.i,n)))if(t.I=n.N,!n.J&&lm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=Jd(Xr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;pt(t),Xf(t)}vm(t),Fi(18)}if(1>=rv(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else bc(t,11)}else if((n.J||t.g==n)&&pt(t),!zu(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const S=I[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const x=I[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const V=I[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const z=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var u=r.i;!u.g&&(sr(z,"spdy")||sr(z,"quic")||sr(z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(cm(u,u.h),u.h=null))}if(r.D){const ge=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;ge&&(r.sa=ge,Un(r.F,r.D,ge))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Fw(r,r.H?r.la:null,r.W),c.J){iv(r.i,c);var p=c,v=r.K;v&&p.setTimeout(v),p.B&&(am(p),zn(p)),r.g=c}else uC(r);0<t.l.length&&mm(t)}else"stop"!=I[0]&&"close"!=I[0]||bc(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?bc(t,7):gm(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}vc(4)}catch(I){}}function um(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Gg(n)||"string"==typeof n)nw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Gg(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function Ew(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Gg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function Ro(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ro)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Q_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ec(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)Ec(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function Ec(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=th.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==fa(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const S=fa(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>S)&&(3!=S||Kg||this.g&&(this.h.h||this.g.ga()||uv(this.g)))){this.I||4!=S||7==e||vc(8==e||0>=x?3:2),am(this);var t=this.g.ba();this.N=t;t:if(vw(this)){var r=uv(this.g);n="";var s=r.length,u=4==fa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qu(this),Gf(this);var c="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function KD(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,v=this.g;if((p=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zu(p)){var I=p;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Fi(12),Qu(this),Gf(this);break e}Zu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Y_(this,t)}this.U?(K_(this,S,c),Kg&&this.i&&3==S&&(Vf(this.V,this.W,"tick",this.fb),this.W.start())):(Zu(this.j,this.m,c,null),Y_(this,c)),4==S&&Qu(this),this.i&&!this.I&&(4==S?Pw(this.l,this):(this.i=!1,zn(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Fi(12)):(this.o=0,Fi(13)),Qu(this),Gf(this)}}}catch(S){}},et.fb=function(){if(this.g){var n=fa(this.g),e=this.g.ga();this.C<e.length&&(am(this),K_(this,n,e),this.i&&4!=n&&zn(this))}},et.cancel=function(){this.I=!0,Qu(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function j_(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(vc(3),Fi(17)),Qu(this),this.o=2,Gf(this)):Z_(this,this.Y-n)},(et=Ro.prototype).R=function(){Q_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return Q_(this),this.g.concat()},et.get=function(n,e){return Ec(this.h,n)?this.h[n]:e},et.set=function(n,e){Ec(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var J_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ju(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ju){this.g=void 0!==e?e:n.g,qf(this,n.j),this.s=n.s,nh(this,n.i),vs(this,n.m),this.l=n.l,e=n.h;var t=new Wf;t.i=e.i,e.g&&(t.g=new Ro(e.g),t.h=e.h),ww(this,t),this.o=n.o}else n&&(t=String(n).match(J_))?(this.g=!!e,qf(this,t[1]||"",!0),this.s=rh(t[2]||""),nh(this,t[3]||"",!0),vs(this,t[4]),this.l=rh(t[5]||"",!0),ww(this,t[6]||"",!0),this.o=rh(t[7]||"")):(this.g=!!e,this.h=new Wf(null,this.g))}function Xu(n){return new Ju(n)}function qf(n,e,t){n.j=t?rh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function nh(n,e,t){n.i=t?rh(e,!0):e}function vs(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ww(n,e,t){e instanceof Wf?(n.h=e,function eC(n,e){e&&!n.j&&(Wa(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Iw(this,r),tv(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ih(e,X_)),n.h=new Wf(e,n.g))}function Un(n,e,t){n.h.set(e,t)}function Es(n){return Un(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ih(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,QD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function QD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ju.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ih(e,bw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ih(e,bw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ih(t,"/"==t.charAt(0)?XD:JD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ih(t,zf)),n.join("")};var bw=/[#\/\?@]/g,JD=/[#\?:]/g,XD=/[#\?]/g,X_=/[#\?@]/g,zf=/#/g;function Wf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wa(n){n.g||(n.g=new Ro,n.h=0,n.i&&function YD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Iw(n,e){Wa(n),e=Ka(n,e),Ec(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ec((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Q_(n)))}function ev(n,e){return Wa(n),e=Ka(n,e),Ec(n.g.h,e)}function tv(n,e,t){Iw(n,e),0<t.length&&(n.i=null,n.g.set(Ka(n,e),eo(t)),n.h+=t.length)}function Ka(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function nv(n){this.l=n||Cw,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ea&&xt.g.Ea()&&xt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=Wf.prototype).add=function(n,e){Wa(this),this.i=null,n=Ka(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Wa(this),this.g.forEach(function(t,r){nw(t,function(s){n.call(e,s,r,this)},this)},this)},et.T=function(){Wa(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},et.R=function(n){Wa(this);var e=[];if("string"==typeof n)ev(this,n)&&(e=zg(e,this.g.get(Ka(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=zg(e,n[t])}return e},et.set=function(n,e){return Wa(this),this.i=null,ev(this,n=Ka(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=s;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var Cw=10;function Kf(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rv(n){return n.h?1:n.g?n.g.size:0}function lm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function cm(n,e){n.g?n.g.add(e):n.h=e}function iv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return eo(n.i)}function dm(){}function Tw(){this.g=new dm}function Aw(n,e,t){const r=t||"";try{um(n,function(s,u){let c=s;dc(s)&&(c=F_(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function hm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(u){}}function Zf(n){this.l=n.$b||null,this.j=n.ib||!1}function fm(n,e){or.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ov,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nv.prototype.cancel=function(){if(this.i=sv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},dm.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},dm.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},ei(Zf,z_),Zf.prototype.g=function(){return new fm(this.l,this.j)},Zf.prototype.i=function(n){return function(){return n}}({}),ei(fm,or);var ov=0;function Sw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Yf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Qf(n)}function Qf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=fm.prototype).open=function(n,e){if(this.readyState!=ov)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Qf(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yf(this)),this.readyState=ov},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Qf(this)),this.g&&(this.readyState=3,Qf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==xt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Yf(this):Qf(this),3==this.readyState&&Sw(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,Yf(this))},et.Ta=function(n){this.g&&(this.response=n,Yf(this))},et.ha=function(){this.g&&Yf(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nC=xt.JSON.parse;function yr(n){or.call(this),this.headers=new Ro,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Mw,this.K=this.L=!1}ei(yr,or);var Mw="",rC=/^https?$/i,iC=["POST","PUT"];function oC(n){return"content-type"==n.toLowerCase()}function xw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Nw(n),Jf(n)}function Nw(n){n.D||(n.D=!0,ni(n,"complete"),ni(n,"error"))}function Rw(n){if(n.h&&void 0!==Hg&&(!n.C[1]||4!=fa(n)||2!=n.ba()))if(n.v&&4==fa(n))yc(n.Fa,0,n);else if(ni(n,"readystatechange"),4==fa(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var s=String(n.H).match(J_)[1]||null;if(!s&&xt.self&&xt.self.location){var u=xt.self.location.protocol;s=u.substr(0,u.length-1)}r=!rC.test(s?s.toLowerCase():"")}t=r}if(t)ni(n,"complete"),ni(n,"success");else{n.m=6;try{var c=2<fa(n)?n.g.statusText:""}catch(v){c=""}n.j=c+" ["+n.ba()+"]",Nw(n)}}finally{Jf(n)}}}function Jf(n,e){if(n.g){av(n);const t=n.g,r=n.C[0]?T_:null;n.g=null,n.C=null,e||ni(n,"ready");try{t.onreadystatechange=r}catch(s){}}}function av(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function fa(n){return n.g?n.g.readyState:0}function uv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Mw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function pm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Ow(n){let e="";return Wu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Un(n,e,t))}function sh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lv(n){this.za=0,this.l=[],this.h=new Qd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=sh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=sh("baseRetryDelayMs",5e3,n),this.$a=sh("retryDelaySeedMs",1e4,n),this.Ya=sh("forwardChannelMaxRetries",2,n),this.ra=sh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new nv(n&&n.concurrentRequestLimit),this.Ca=new Tw,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function gm(n){if(cv(n),3==n.G){var e=n.V++,t=Xu(n.F);Un(t,"SID",n.J),Un(t,"RID",e),Un(t,"TYPE","terminate"),ym(n,t),(e=new th(n,n.h,e,void 0)).K=2,e.v=Es(Xu(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=tp(e.l,null),e.g.ea(e.v)),e.F=Date.now(),zn(e)}ep(n)}function Xf(n){n.g&&(Em(n),n.g.cancel(),n.g=null)}function cv(n){Xf(n),n.u&&(xt.clearTimeout(n.u),n.u=null),pt(n),n.i.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function Za(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&mm(n)}function mm(n){Kf(n.i)||n.m||(n.m=!0,L_(n.Ha,n),n.C=0)}function wc(n,e){var t;t=e?e.m:n.V++;const r=Xu(n.F);Un(r,"SID",n.J),Un(r,"RID",t),Un(r,"AID",n.U),ym(n,r),n.o&&n.s&&pm(r,n.o,n.s),t=new th(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=_m(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),cm(n.i,t),yw(t,r,e)}function ym(n,e){n.j&&um({},function(t,r){Un(e,r,t)})}function _m(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Xr(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let v=0;v<t;v++){let I=s[v].h;const S=s[v].g;if(I-=u,0>I)u=Math.max(0,s[v].h-100),p=!1;else try{Aw(S,c,"req"+I+"_")}catch(x){r&&r(S)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function uC(n){n.g||n.u||(n.Y=1,L_(n.Ga,n),n.A=0)}function vm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Jd(Xr(n.Ga,n),kw(n,n.A)),n.A++,0))}function Em(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function lC(n){n.g=new th(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Xu(n.oa);Un(e,"RID","rpc"),Un(e,"SID",n.J),Un(e,"CI",n.N?"0":"1"),Un(e,"AID",n.U),ym(n,e),Un(e,"TYPE","xmlhttp"),n.o&&n.s&&pm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Es(Xu(e)),t.s=null,t.U=!0,_w(t,n)}function pt(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function Pw(n,e){var t=null;if(n.g==e){pt(n),Em(n),n.g=null;var r=2}else{if(!lm(n.i,e))return;t=e.D,iv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ni(r=Bf(),new G_(r,t,e,s)),mm(n)}else uC(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function aC(n,e){return!(rv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Jd(Xr(n.Ha,n,e),kw(n,n.C)),n.C++,0)))}(n,e)||2==r&&vm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:bc(n,5);break;case 4:bc(n,10);break;case 3:bc(n,6);break;default:bc(n,2)}}function kw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function bc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Xr(n.jb,n);t||(t=new Ju("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||qf(t,"https"),Es(t)),function tC(n,e){const t=new Qd;if(xt.Image){const r=new Image;r.onload=qg(hm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=qg(hm,t,r,"TestLoadImage: error",!1,e),r.onabort=qg(hm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=qg(hm,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Fi(2);n.G=0,n.j&&n.j.va(e),ep(n),cv(n)}function ep(n){n.G=0,n.I=-1,n.j&&((0!=sv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,eo(n.l),n.l.length=0),n.j.ua())}function Fw(n,e,t){let r=function Oo(n){return n instanceof Ju?Xu(n):new Ju(n,void 0)}(t);if(""!=r.i)e&&nh(r,e+"."+r.i),vs(r,r.m);else{const s=xt.location;r=function Po(n,e,t,r){var s=new Ju(null,void 0);return n&&qf(s,n),e&&nh(s,e),t&&vs(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&Wu(n.aa,function(s,u){Un(r,u,s)}),t=n.sa,(e=n.D)&&t&&Un(r,e,t),Un(r,"VER",n.ma),ym(n,r),r}function tp(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yr(t&&n.Ba&&!n.qa?new Zf({ib:!0}):n.qa)).L=n.H,e}function np(){}function Nn(){if(No&&!(10<=Number(ow)))throw Error("Environmental error: no available transport.")}function to(n,e){or.call(this),this.g=new lv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!zu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zu(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new oh(this)}function dv(n){jf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Lw(){im.call(this),this.status=1}function oh(n){this.g=n}(et=yr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():sm.g(),this.C=function pw(n){return n.h||(n.h=n.i())}(this.u?this.u:sm),this.g.onreadystatechange=Xr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void xw(this,u)}n=t||"";const s=new Ro(this.headers);r&&um(r,function(u,c){s.set(c,u)}),r=function OD(n){e:{var e=oC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=xt.FormData&&n instanceof xt.FormData,!(0<=qd(iC,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{av(this),0<this.B&&((this.K=function sC(n){return No&&function iw(){return function Wd(n){var e=PD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ti(String(Of)).split("."),t=ti("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var s=e[c]||"",u=t[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=zd(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||zd(0==s[2].length,0==u[2].length)||zd(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xr(this.pa,this)):this.A=yc(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){xw(this,u)}},et.pa=function(){void 0!==Hg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ni(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ni(this,"complete"),ni(this,"abort"),Jf(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jf(this,!0)),yr.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?Rw(this):this.cb())},et.cb=function(){Rw(this)},et.ba=function(){try{return 2<fa(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nC(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=lv.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new th(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=fc(u),gc(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_m(this,s,e),Un(t=Xu(this.F),"RID",n),Un(t,"CVER",22),this.D&&Un(t,"X-HTTP-Session-Id",this.D),ym(this,t),this.o&&u&&pm(t,this.o,u),cm(this.i,s),this.Ra&&Un(t,"TYPE","init"),this.ja?(Un(t,"$req",e),Un(t,"SID","null"),s.$=!0,yw(s,t,null)):yw(s,t,e),this.G=2}}else 3==this.G&&(n?wc(this,n):0==this.l.length||Kf(this.i)||wc(this))},et.Ga=function(){if(this.u=null,lC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Jd(Xr(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fi(10),Xf(this),lC(this))},et.ab=function(){null!=this.v&&(this.v=null,Xf(this),vm(this),Fi(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Fi(2)):(this.h.info("Failed to ping google.com"),Fi(1))},(et=np.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},Nn.prototype.g=function(n,e){return new to(n,e)},ei(to,or),to.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),L_(Xr(n.hb,n,e))),Fi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Fw(n,null,n.W),mm(n)},to.prototype.close=function(){gm(this.g)},to.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Za(this.g,e)}else this.v?((e={}).__data__=F_(n),Za(this.g,e)):Za(this.g,n)},to.prototype.M=function(){this.g.j=null,delete this.j,gm(this.g),delete this.g,to.Z.M.call(this)},ei(dv,jf),ei(Lw,im),ei(oh,np),oh.prototype.xa=function(){ni(this.g,"a")},oh.prototype.wa=function(n){ni(this.g,new dv(n))},oh.prototype.va=function(n){ni(this.g,new Lw(n))},oh.prototype.ua=function(){ni(this.g,"b")},Nn.prototype.createWebChannel=Nn.prototype.g,to.prototype.send=to.prototype.u,to.prototype.open=to.prototype.m,to.prototype.close=to.prototype.close,Xd.NO_ERROR=0,Xd.TIMEOUT=8,Xd.HTTP_ERROR=6,q_.COMPLETE="complete",gw.EventType=eh,eh.OPEN="a",eh.CLOSE="b",eh.ERROR="c",eh.MESSAGE="d",or.prototype.listen=or.prototype.N,yr.prototype.listenOnce=yr.prototype.O,yr.prototype.getLastError=yr.prototype.La,yr.prototype.getLastErrorCode=yr.prototype.Da,yr.prototype.getStatus=yr.prototype.ba,yr.prototype.getResponseJson=yr.prototype.Qa,yr.prototype.getResponseText=yr.prototype.ga,yr.prototype.send=yr.prototype.ea;var Vw=ha.createWebChannelTransport=function(){return new Nn},Uw=ha.getStatEventTarget=function(){return Bf()},wm=ha.ErrorCode=Xd,Bw=ha.EventType=q_,cC=ha.Event=Yu,jw=ha.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dC=ha.FetchXmlHttpFactory=Zf,el=ha.WebChannel=gw,hC=ha.XhrIo=yr;const $w="@firebase/firestore";class ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let Ya="9.6.11";const Qa=new Ur.Yd("@firebase/firestore");function bm(){return Qa.logLevel}function Pe(n,...e){if(Qa.logLevel<=Ur.in.DEBUG){const t=e.map(hv);Qa.debug(`Firestore (${Ya}): ${n}`,...t)}}function Bn(n,...e){if(Qa.logLevel<=Ur.in.ERROR){const t=e.map(hv);Qa.error(`Firestore (${Ya}): ${n}`,...t)}}function Ja(n,...e){if(Qa.logLevel<=Ur.in.WARN){const t=e.map(hv);Qa.warn(`Firestore (${Ya}): ${n}`,...t)}}function hv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Ya}) INTERNAL ASSERTION FAILED: `+n;throw Bn(e),new Error(e)}function Tt(n,e){n||nt()}function qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Yt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ri.UNAUTHENTICATED))}shutdown(){}}class LS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class VS{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let c=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new xr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const I=c;e.enqueueRetryable((0,_e.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},v=I=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(I=>v(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new xr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new qw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new ri(e)}}class US{constructor(e,t,r){this.type="FirstParty",this.user=ri.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class BS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new US(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Im{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?s(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.p=t.token,new fv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ws{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function zw(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ws.A=-1;class ah{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=zw(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function uh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Ww(n){return n+"\0"}class ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ar.fromMillis(Date.now())}static fromDate(e){return ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ar(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new ar(0,0))}static max(){return new It(new ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function pv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ic(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Kw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pa{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===pa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pa?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class en extends pa{construct(e,t,r){return new en(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new en(t)}static emptyPath(){return new en([])}}const Zw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Br extends pa{construct(e,t,r){return new Br(e,t,r)}static isValidIdentifier(e){return Zw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Br(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new xe(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const p=e[s];if("\\"===p){if(s+1===e.length)throw new xe(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new xe(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===p?(c=!c,s++):"."!==p||c?(r+=p,s++):(u(),s++)}if(u(),c)throw new xe(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Br(t)}static emptyPath(){return new Br([])}}class Dc{constructor(e){this.fields=e,e.sort(Br.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const gC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=gC.exec(n);if(Tt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(n.seconds),nanos:Xn(n.nanos)}}function Xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function tl(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function Dm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Yw(n){const e=n.mapValue.fields.__previous_value__;return Dm(e)?Yw(e):e}function rp(n){const e=ga(n.mapValue.fields.__local_write_time__.timestampValue);return new ar(e.seconds,e.nanos)}class mC{constructor(e,t,r,s,u,c,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=v}}class ko{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ko("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ko&&e.projectId===this.projectId&&e.database===this.database}}function Cc(n){return null==n}function lh(n){return 0===n&&1/n==-1/0}function Qw(n){return"number"==typeof n&&Number.isInteger(n)&&!lh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(en.fromString(e))}static fromName(e){return new $e(en.fromString(e).popFirst(5))}static empty(){return new $e(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===en.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new en(e.slice()))}}const Jw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xw={nullValue:"NULL_VALUE"};function Tc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dm(n)?4:yv(n)?9:10:nt()}function ma(n,e){if(n===e)return!0;const t=Tc(n);if(t!==Tc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rp(n).isEqual(rp(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=ga(r.timestampValue),c=ga(s.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,tl(n.bytesValue).isEqual(tl(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Xn(r.geoPointValue.latitude)===Xn(s.geoPointValue.latitude)&&Xn(r.geoPointValue.longitude)===Xn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Xn(r.integerValue)===Xn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Xn(r.doubleValue),c=Xn(s.doubleValue);return u===c?lh(u)===lh(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return uh(n.arrayValue.values||[],e.arrayValue.values||[],ma);case 10:return function(r,s){const u=r.mapValue.fields||{},c=s.mapValue.fields||{};if(pv(u)!==pv(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!ma(u[p],c[p])))return!1;return!0}(n,e);default:return nt()}var s}function ip(n,e){return void 0!==(n.values||[]).find(t=>ma(t,e))}function nl(n,e){if(n===e)return 0;const t=Tc(n),r=Tc(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(s,u){const c=Xn(s.integerValue||s.doubleValue),p=Xn(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return gv(n.timestampValue,e.timestampValue);case 4:return gv(rp(n),rp(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(s,u){const c=tl(s),p=tl(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const c=s.split("/"),p=u.split("/");for(let v=0;v<c.length&&v<p.length;v++){const I=Ut(c[v],p[v]);if(0!==I)return I}return Ut(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const c=Ut(Xn(s.latitude),Xn(u.latitude));return 0!==c?c:Ut(Xn(s.longitude),Xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const c=s.values||[],p=u.values||[];for(let v=0;v<c.length&&v<p.length;++v){const I=nl(c[v],p[v]);if(I)return I}return Ut(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){const c=s.fields||{},p=Object.keys(c),v=u.fields||{},I=Object.keys(v);p.sort(),I.sort();for(let S=0;S<p.length&&S<I.length;++S){const x=Ut(p[S],I[S]);if(0!==x)return x;const V=nl(c[p[S]],v[I[S]]);if(0!==V)return V}return Ut(p.length,I.length)}(n.mapValue,e.mapValue);default:throw nt()}}function gv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=ga(n),r=ga(e),s=Ut(t.seconds,r.seconds);return 0!==s?s:Ut(t.nanos,r.nanos)}function Ac(n){return mv(n)}function mv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=ga(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?tl(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const c of r.values||[])u?u=!1:s+=",",s+=mv(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of s)c?c=!1:u+=",",u+=`${p}:${mv(r.fields[p])}`;return u+"}"}(n.mapValue):nt();var e}function Sc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cm(n){return!!n&&"integerValue"in n}function sp(n){return!!n&&"arrayValue"in n}function eb(n){return!!n&&"nullValue"in n}function tb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ch(n){return!!n&&"mapValue"in n}function Mc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ic(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function _v(n){return"nullValue"in n?Xw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sc(ko.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function yC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sc(ko.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Jw:nt()}function nb(n,e){return void 0===n?e:void 0===e||nl(n,e)>0?n:e}function Tm(n,e){return void 0===n?e:void 0===e||nl(n,e)<0?n:e}class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mc(t)}setAll(e){let t=Br.emptyPath(),r={},s=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=p.popLast()}c?r[p.lastSegment()]=Mc(c):s.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ma(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];ch(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ic(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new vi(Mc(this.value))}}function vv(n){const e=[];return Ic(n.fields,(t,r)=>{const s=new Br([t]);if(ch(r)){const u=vv(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new Dc(e)}class Rn{constructor(e,t,r,s,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Rn(e,0,It.min(),It.min(),vi.empty(),0)}static newFoundDocument(e,t,r){return new Rn(e,1,t,It.min(),r,0)}static newNoDocument(e,t){return new Rn(e,2,t,It.min(),vi.empty(),0)}static newUnknownDocument(e,t){return new Rn(e,3,t,It.min(),vi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class op{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Ev(n){return n.fields.find(e=>2===e.kind)}function rl(n){return n.fields.filter(e=>2!==e.kind)}op.UNKNOWN_ID=-1;class wv{constructor(e,t){this.fieldPath=e,this.kind=t}}class ap{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ap(0,Xi.min())}}function up(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=It.fromTimestamp(1e9===r?new ar(t+1,0):new ar(t,r));return new Xi(s,$e.empty(),e)}function _C(n){return new Xi(n.readTime,n.key,-1)}class Xi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xi(It.min(),$e.empty(),-1)}static max(){return new Xi(It.max(),$e.empty(),-1)}}function lp(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}class vC{constructor(e,t=null,r=[],s=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function EC(n,e=null,t=[],r=[],s=null,u=null,c=null){return new vC(n,e,t,r,s,u,c)}function il(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+Ac(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Cc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ac(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ac(r)).join(",")),e.P=t}return e.P}function cp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!CC(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!ma(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xc(n.startAt,e.startAt)&&xc(n.endAt,e.endAt)}function Am(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Sm(n,e){return n.filters.filter(t=>t instanceof Nr&&t.field.isEqual(e))}function bv(n,e,t){let r,s=!0;for(const u of Sm(n,e)){let c,p=!0;switch(u.op){case"<":case"<=":c=_v(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=Xw}nb(r,c)===c&&(r=c,s=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];nb(r,c)===c&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function Iv(n,e,t){let r,s=!0;for(const u of Sm(n,e)){let c,p=!0;switch(u.op){case">=":case">":c=yC(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=Jw}Tm(r,c)===c&&(r=c,s=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Tm(r,c)===c&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class Nr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Mm(e,t,r):"array-contains"===t?new rb(e,r):"in"===t?new IC(e,r):"not-in"===t?new DC(e,r):"array-contains-any"===t?new Cv(e,r):new Nr(e,t,r)}static V(e,t,r){return"in"===t?new dp(e,r):new bC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(nl(t,this.value)):null!==t&&Tc(this.value)===Tc(t)&&this.v(nl(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Mm extends Nr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.v(t)}}class dp extends Nr{constructor(e,t){super(e,"in",t),this.keys=Dv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bC extends Nr{constructor(e,t){super(e,"not-in",t),this.keys=Dv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Dv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class rb extends Nr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sp(t)&&ip(t.arrayValue,this.value)}}class IC extends Nr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ip(this.value.arrayValue,t)}}class DC extends Nr{constructor(e,t){super(e,"not-in",t)}matches(e){if(ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ip(this.value.arrayValue,t)}}class Cv extends Nr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ip(this.value.arrayValue,r))}}class sl{constructor(e,t){this.position=e,this.inclusive=t}}class hp{constructor(e,t="asc"){this.field=e,this.dir=t}}function CC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ib(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?$e.comparator($e.fromName(c.referenceValue),t.key):nl(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function xc(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ma(n.position[t],e.position[t]))return!1;return!0}class ya{constructor(e,t=null,r=[],s=[],u=null,c="F",p=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=v,this.D=null,this.C=null}}function Nc(n,e,t,r,s,u,c,p){return new ya(n,e,t,r,s,u,c,p)}function fp(n){return new ya(n)}function pp(n){return!Cc(n.limit)&&"F"===n.limitType}function xm(n){return!Cc(n.limit)&&"L"===n.limitType}function sb(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Nm(n){for(const e of n.filters)if(e.S())return e.field;return null}function ob(n){return null!==n.collectionGroup}function Rc(n){const e=qe(n);if(null===e.D){e.D=[];const t=Nm(e),r=sb(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new hp(t)),e.D.push(new hp(Br.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new hp(Br.keyField(),u))}}}return e.D}function es(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=EC(e.path,e.collectionGroup,Rc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Rc(e))t.push(new hp(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new sl(e.endAt.position,!e.endAt.inclusive):null,s=e.startAt?new sl(e.startAt.position,!e.startAt.inclusive):null;e.C=EC(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.C}function ab(n,e,t){return new ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gp(n,e){return cp(es(n),es(e))&&n.limitType===e.limitType}function ub(n){return`${il(es(n))}|lt:${n.limitType}`}function Tv(n){return`Query(target=${function wC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ac(r.value)}`;var r}).join(", ")}]`),Cc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ac(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ac(t)).join(",")),`Target(${e})`}(es(n))}; limitType=${n.limitType})`}function Av(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):$e.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,c){const p=ib(s,u,c);return s.inclusive?p<=0:p<0}(t.startAt,Rc(t),r)||t.endAt&&!function(s,u,c){const p=ib(s,u,c);return s.inclusive?p>=0:p>0}(t.endAt,Rc(t),r)));var t,r}function lb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cb(n){return(e,t)=>{let r=!1;for(const s of Rc(n)){const u=TC(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function TC(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(s,u,c){const p=u.data.field(s),v=c.data.field(s);return null!==p&&null!==v?nl(p,v):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function db(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function hb(n){return{integerValue:""+n}}function dh(n,e){return Qw(e)?hb(e):db(n,e)}class mp{constructor(){this._=void 0}}function fb(n,e,t){return n instanceof Oc?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof ol?gb(n,e):n instanceof al?mb(n,e):function(r,s){const u=Sv(r,s),c=yb(u)+yb(r.k);return Cm(u)&&Cm(r.k)?hb(c):db(r.M,c)}(n,e)}function pb(n,e,t){return n instanceof ol?gb(n,e):n instanceof al?mb(n,e):t}function Sv(n,e){return n instanceof hh?Cm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Oc extends mp{}class ol extends mp{constructor(e){super(),this.elements=e}}function gb(n,e){const t=_b(e);for(const r of n.elements)t.some(s=>ma(s,r))||t.push(r);return{arrayValue:{values:t}}}class al extends mp{constructor(e){super(),this.elements=e}}function mb(n,e){let t=_b(e);for(const r of n.elements)t=t.filter(s=>!ma(s,r));return{arrayValue:{values:t}}}class hh extends mp{constructor(e,t){super(),this.M=e,this.k=t}}function yb(n){return Xn(n.integerValue||n.doubleValue)}function _b(n){return sp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xa{constructor(e,t){this.field=e,this.transform=t}}class Mv{constructor(e,t){this.version=e,this.transformResults=t}}class _n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fh{}function yp(n,e,t){n instanceof ul?function(r,s,u){const c=r.value.clone(),p=Nv(r.fieldTransforms,s,u.transformResults);c.setAll(p),s.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Pc?function(r,s,u){if(!Rm(r.precondition,s))return void s.convertToUnknownDocument(u.version);const c=Nv(r.fieldTransforms,s,u.transformResults),p=s.data;p.setAll(Eb(r)),p.setAll(c),s.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xv(n,e,t){var s;n instanceof ul?function(r,s,u){if(!Rm(r.precondition,s))return;const c=r.value.clone(),p=Rv(r.fieldTransforms,u,s);c.setAll(p),s.convertToFoundDocument(_p(s),c).setHasLocalMutations()}(n,e,t):n instanceof Pc?function(r,s,u){if(!Rm(r.precondition,s))return;const c=Rv(r.fieldTransforms,u,s),p=s.data;p.setAll(Eb(r)),p.setAll(c),s.convertToFoundDocument(_p(s),p).setHasLocalMutations()}(n,e,t):Rm(n.precondition,s=e)&&s.convertToNoDocument(It.min())}function SC(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=Sv(r.transform,s||null);null!=u&&(null==t&&(t=vi.empty()),t.set(r.field,u))}return t||null}function vb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&uh(t,r,(s,u)=>function AC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ol&&r instanceof ol||t instanceof al&&r instanceof al?uh(t.elements,r.elements,ma):t instanceof hh&&r instanceof hh?ma(t.k,r.k):t instanceof Oc&&r instanceof Oc);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function _p(n){return n.isFoundDocument()?n.version:It.min()}class ul extends fh{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}}class Pc extends fh{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}}function Eb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Nv(n,e,t){const r=new Map;Tt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,p=e.data.field(u.field);r.set(u.field,pb(c,p,t[s]))}return r}function Rv(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,fb(u,c,e))}return r}class kc extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Om extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class MC{constructor(e){this.count=e}}var vr,rn;function Pm(n){switch(n){default:return nt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function km(n){if(void 0===n)return Bn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case vr.OK:return ae.OK;case vr.CANCELLED:return ae.CANCELLED;case vr.UNKNOWN:return ae.UNKNOWN;case vr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case vr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case vr.INTERNAL:return ae.INTERNAL;case vr.UNAVAILABLE:return ae.UNAVAILABLE;case vr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case vr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case vr.NOT_FOUND:return ae.NOT_FOUND;case vr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case vr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case vr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case vr.ABORTED:return ae.ABORTED;case vr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case vr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case vr.DATA_LOSS:return ae.DATA_LOSS;default:return nt()}}(rn=vr||(vr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class eu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ic(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}class Wn{constructor(e,t){this.comparator=e,this.root=t||ii.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ii.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ph(this.root,e,this.comparator,!0)}}class ph{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ii{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=null!=r?r:ii.RED,this.left=null!=s?s:ii.EMPTY,this.right=null!=u?u:ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new ii(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return ii.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}ii.EMPTY=null,ii.RED=!0,ii.BLACK=!1,ii.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new ii(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class On{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wb(this.data.getIterator())}getIteratorFrom(e){return new wb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new On(this.comparator);return t.data=e,t}}class wb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gh(n){return n.hasNext()?n.getNext():void 0}const bb=new Wn($e.comparator);function ts(){return bb}const Ib=new Wn($e.comparator);function Ov(){return Ib}function mh(){return new eu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Db=new Wn($e.comparator),xC=new On($e.comparator);function dn(...n){let e=xC;for(const t of n)e=e.add(t);return e}const Cb=new On(Ut);function Fm(){return Cb}class yh{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,vp.createSynthesizedTargetChangeForCurrentChange(e,t)),new yh(It.min(),r,Fm(),ts(),dn())}}class vp{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new vp(_r.EMPTY_BYTE_STRING,t,dn(),dn(),dn())}}class jr{constructor(e,t,r,s){this.O=e,this.removedTargetIds=t,this.key=r,this.F=s}}class Fc{constructor(e,t){this.targetId=e,this.$=t}}class Tb{constructor(e,t,r=_r.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Ab{constructor(){this.B=0,this.L=Sb(),this.U=_r.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=dn(),t=dn(),r=dn();return this.L.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:nt()}}),new vp(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Sb()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class $S{constructor(e){this.nt=e,this.st=new Map,this.it=ts(),this.rt=_h(),this.ot=new On(Ut)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,s)=>{this.ft(s)&&t(s)})}_t(e){const t=e.targetId,r=e.$.count,s=this.wt(t);if(s){const u=s.target;if(Am(u))if(0===r){const c=new $e(u.path);this.ct(t,c,Rn.newNoDocument(c,It.min()))}else Tt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&Am(p.target)){const v=new $e(p.target.path);null!==this.it.get(v)||this.It(c,v)||this.ct(c,v,Rn.newNoDocument(v,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=dn();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(v=>{const I=this.wt(v);return!I||2===I.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const s=new yh(e,t,this.ot,this.it,r);return this.it=ts(),this.rt=_h(),this.ot=new On(Ut),s}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const s=this.lt(e);this.It(e,t)?s.Y(t,1):s.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Ab,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new On(Ut),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Ab),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function _h(){return new Wn($e.comparator)}function Sb(){return new Wn($e.comparator)}const Pv={asc:"ASCENDING",desc:"DESCENDING"},NC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Mb{constructor(e,t){this.databaseId=e,this.N=t}}function Ep(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xb(n,e){return n.N?e.toBase64():e.toUint8Array()}function kv(n,e){return Ep(n,e.toTimestamp())}function Rr(n){return Tt(!!n),It.fromTimestamp(function(e){const t=ga(e);return new ar(t.seconds,t.nanos)}(n))}function Lm(n,e){return(t=n,new en(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wp(n){const e=en.fromString(n);return Tt(Hv(e)),e}function Lc(n,e){return Lm(n.databaseId,e.path)}function tu(n,e){const t=wp(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(bp(t))}function Vm(n,e){return Lm(n.databaseId,e)}function Nb(n){const e=wp(n);return 4===e.length?en.emptyPath():bp(e)}function vh(n){return new en(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bp(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Fv(n,e,t){return{name:Lc(n,e),fields:t.value.mapValue.fields}}function Rb(n,e,t){const r=tu(n,e.name),s=Rr(e.updateTime),u=new vi({mapValue:{fields:e.fields}}),c=Rn.newFoundDocument(r,s,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Um(n,e){let t;if(e instanceof ul)t={update:Fv(n,e.key,e.value)};else if(e instanceof kc)t={delete:Lc(n,e.key)};else if(e instanceof Pc)t={update:Fv(n,e.key,e.data),updateMask:Lb(e.fieldMask)};else{if(!(e instanceof Om))return nt();t={verify:Lc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const c=u.transform;if(c instanceof Oc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ol)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof al)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof hh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:kv(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:nt()),t;var s}function Uv(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?_n.updateTime(Rr(s.updateTime)):void 0!==s.exists?_n.exists(s.exists):_n.none():_n.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,c){let p=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),p=new Oc):"appendMissingElements"in c?p=new ol(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new al(c.removeAllFromArray.values||[]):"increment"in c?p=new hh(u,c.increment):nt();const v=Br.fromServerFormat(c.fieldPath);return new Xa(v,p)}(n,s)):[];var s;if(e.update){const s=tu(n,e.update.name),u=new vi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Dc((e.updateMask.fieldPaths||[]).map(I=>Br.fromServerFormat(I)));return new Pc(s,u,c,t,r)}return new ul(s,u,t,r)}if(e.delete){const s=tu(n,e.delete);return new kc(s,t)}if(e.verify){const s=tu(n,e.verify);return new Om(s,t)}return nt()}function Bv(n,e){return{documents:[Vm(n,e.path)]}}function jv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Vm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Vm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0===v.length)return;const I=v.map(S=>function(x){if("=="===x.op){if(tb(x.value))return{unaryFilter:{field:Vc(x.field),op:"IS_NAN"}};if(eb(x.value))return{unaryFilter:{field:Vc(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(tb(x.value))return{unaryFilter:{field:Vc(x.field),op:"IS_NOT_NAN"}};if(eb(x.value))return{unaryFilter:{field:Vc(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vc(x.field),op:PC(x.op),value:x.value}}}(S));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(I=>{return{field:Vc((S=I).field),direction:OC(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(I=e.limit,n.N||Cc(I)?I:{value:I});var I,p,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function Ob(n){let e=Nb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Tt(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=$v(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new hp(Eh((x=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(S){let x;return x="object"==typeof S?S.value:S,Cc(x)?null:x}(t.limit));let v=null;var S;t.startAt&&(v=new sl((S=t.startAt).values||[],!!S.before));let I=null;return t.endAt&&(I=function(S){return new sl(S.values||[],!S.before)}(t.endAt)),Nc(e,s,c,u,p,"F",v,I)}function $v(n){return n?void 0!==n.unaryFilter?[Fb(n)]:void 0!==n.fieldFilter?[kb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>$v(e)).reduce((e,t)=>e.concat(t)):nt():[]}function OC(n){return Pv[n]}function PC(n){return NC[n]}function Vc(n){return{fieldPath:n.canonicalString()}}function Eh(n){return Br.fromServerFormat(n.fieldPath)}function kb(n){return Nr.create(Eh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Fb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Eh(n.unaryFilter.field);return Nr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Eh(n.unaryFilter.field);return Nr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Eh(n.unaryFilter.field);return Nr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Eh(n.unaryFilter.field);return Nr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function Lb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Hv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=FC(e)),e=kC(n.get(t),e);return FC(e)}function kC(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function FC(n){return n+"\x01\x01"}function Fo(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),en.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&nt(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let v;0===s.length?v=p:(s+=p,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:nt()}u=c+2}return new en(r)}const LC=["userId","batchId"];function Gv(n,e){return[n,Li(e)]}function VC(n,e,t){return[n,Li(e),t]}const HS={},GS=["prefixPath","collectionGroup","readTime","documentId"],qS=["prefixPath","collectionGroup","documentId"],zS=["collectionGroup","readTime","prefixPath","documentId"],WS=["canonicalId","targetId"],Bm=["targetId","path"],KS=["path","targetId"],Vb=["collectionId","parent"],qv=["indexId","uid"],Ub=["uid","sequenceNumber"],Bb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZS=["indexId","uid","orderedDocumentKey"],zv=["userId","collectionPath","documentId"],jb=["userId","collectionPath","largestBatchId"],$b=["userId","collectionGroup","largestBatchId"],Wv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],YS=[...Wv,"documentOverlays"],Kv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UC=[...Kv,"indexConfiguration","indexState","indexEntries"],jm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let s=0,u=0,c=!1;e.forEach(p=>{++s,p.next(()=>{++u,c&&u===s&&t()},v=>r(v))}),c=!0,u===s&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(s=>s?he.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}}class Zv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new xr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Ip(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const s=Yv(r.target.error);this.At.reject(new Ip(e,s))}}static open(e,t,r,s){try{return new Zv(t,e.transaction(s,r))}catch(u){throw new Ip(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QS(t)}}class _a{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===_a.Vt((0,Yt.z$)())&&Bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),Bc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Yt.hl)())return!1;if(_a.St())return!0;const e=(0,Yt.z$)(),t=_a.Vt(e),r=0<t&&t<10,s=_a.Dt(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new Ip(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;s("VersionError"===p.name?new xe(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new xe(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Ip(e,p))},u.onupgradeneeded=c=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,_e.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const v=Zv.open(u.db,e,c?"readonly":"readwrite",r),I=s(v).next(S=>(v.Pt(),S)).catch(S=>(v.abort(S),he.reject(S))).toPromise();return I.catch(()=>{}),yield v.Rt,I}catch(v){const I="FirebaseError"!==v.name&&p<3;if(Pe("SimpleDb","Transaction failed with error:",v.message,"Retrying:",I),u.close(),!I)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class BC{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bc(this.Ft.delete())}}class Ip extends xe{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Uc(n){return"IndexedDbTransactionError"===n.name}class QS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bc(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),Bc(this.store.add(e))}get(e){return Bc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),Bc(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),Bc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.Kt(s,(c,p)=>{u.push(p)}).next(()=>u)}{const s=this.store.getAll(r.range);return new he((u,c)=>{s.onerror=p=>{c(p.target.error)},s.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}Qt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const s=this.cursor(r);return this.Kt(s,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.Kt(s,t)}zt(e){const t=this.cursor({});return new he((r,s)=>{t.onerror=u=>{const c=Yv(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new he((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void s();const v=new BC(p),I=t(p.primaryKey,p.value,v);if(I instanceof he){const S=I.catch(x=>(v.done(),he.reject(x)));r.push(S)}v.isDone?s():null===v.Lt?p.continue():p.continue(v.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bc(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Yv(r.target.error);t(s)}})}let $m=!1;function Yv(n){const e=_a.Vt((0,Yt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $m||($m=!0,setTimeout(()=>{throw r},0)),r}}return n}class no extends Hb{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function $r(n,e){const t=qe(n);return _a.xt(t.Ht,e)}class Dp{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&yp(u,e,r[s])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&xv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&xv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),s=r;this.applyToLocalView(s),r.isValidDocument()||s.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&uh(this.mutations,e.mutations,(t,r)=>vb(t,r))&&uh(this.baseMutations,e.baseMutations,(t,r)=>vb(t,r))}}class Qv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Tt(e.mutations.length===r.length);let s=Db;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new Qv(e,t,r,s)}}class Jv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class va{constructor(e,t,r,s,u=It.min(),c=It.min(),p=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new va(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Xv{constructor(e){this.Jt=e}}function qb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Cp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Lc(s=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ep(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ll(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:ll(e.version)}}var s,u;return r}function Cp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ll(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jc(n){const e=new ar(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function wh(n,e){const t=(e.baseMutations||[]).map(u=>Uv(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Uv(n.Jt,u)),s=ar.fromMillis(e.localWriteTimeMs);return new Dp(e.batchId,s,t,r)}function $c(n){const e=jc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jc(n.lastLimboFreeSnapshotVersion):It.min();let r;var s;return void 0!==n.query.documents?(Tt(1===(s=n.query).documents.length),r=es(fp(Nb(s.documents[0])))):r=es(Ob(n.query)),new va(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function ro(n,e){const t=ll(e.snapshotVersion),r=ll(e.lastLimboFreeSnapshotVersion);let s;s=Am(e.target)?Bv(n.Jt,e.target):jv(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:il(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function eE(n){const e=Ob({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ab(e,e.limit,"L"):e}function zb(n,e){return new Jv(e.largestBatchId,Uv(n.Jt,e.overlayMutation))}function Wb(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}class Kb{getBundleMetadata(e,t){return Zb(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:jc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Zb(e).put({bundleId:(r=t).id,createTime:ll(Rr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Yb(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:eE(s.bundledQuery),readTime:jc(s.readTime)};var s})}saveNamedQuery(e,t){return Yb(e).put({name:(r=t).name,readTime:ll(Rr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Zb(n){return $r(n,"bundles")}function Yb(n){return $r(n,"namedQueries")}class Hm{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Hm(e,t.uid||"")}getOverlay(e,t){return Tp(e).get(Wb(this.userId,t)).next(r=>r?zb(this.M,r):null)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const p=new Jv(t,c);s.push(this.Xt(e,p))}),he.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(Li(c.getCollectionPath())));const u=[];return s.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Tp(e).Qt("collectionPathOverlayIndex",p))}),he.waitFor(u)}getOverlaysForCollection(e,t,r){const s=mh(),u=Li(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Tp(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const v of p){const I=zb(this.M,v);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=mh();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tp(e).Wt({index:"collectionGroupOverlayIndex",range:p},(v,I,S)=>{const x=zb(this.M,I);u.size()<s||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return Tp(e).put(function(r,s,u){const[c,p,v]=Wb(s,u.mutation.key);return{userId:s,collectionPath:p,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Um(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Tp(n){return $r(n,"documentOverlays")}class bh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Xn(e.integerValue));else if("doubleValue"in e){const r=Xn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),lh(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(tl(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?yv(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):nt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const s of Object.keys(r))this.re(s,t),this.te(r[s],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const s of r)this.te(s,t)}ae(e,t){this.ne(t,37),$e.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Qb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function tE(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=Qb(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}bh.fe=new bh;class jC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const s=t.codePointAt(0);this._e(240|s>>>18),this._e(128|63&s>>>12),this._e(128|63&s>>>6),this._e(128|63&s)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const s=t.codePointAt(0);this.ge(240|s>>>18),this.ge(128|63&s>>>12),this.ge(128|63&s>>>6),this.ge(128|63&s)}}this.ye()}Te(e){const t=this.Ee(e),r=tE(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Re(e){const t=this.Ee(e),r=tE(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class $C{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Jb{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Hc{constructor(){this.De=new jC,this.Ce=new $C(this.De),this.xe=new Jb(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ea{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ea(this.indexId,this.documentKey,this.arrayValue,r)}}function cl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Xb(n.arrayValue,e.arrayValue),0!==t?t:(t=Xb(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function Xb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class eI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Ev(e);if(void 0!==t&&!this.Be(t))return!1;const r=rl(e);let s=0,u=0;for(;s<r.length&&this.Be(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Fe){const c=r[s];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++s}for(;s<r.length;++s){const c=r[s];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class tI{constructor(){this.qe=new nE}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getFieldIndex(e,t){return he.resolve(null)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class nE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new On(en.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new On(en.comparator)).toArray()}}const Ih=new Uint8Array(0);class JS{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new nE,this.Ge=new eu(r=>il(r),(r,s)=>cp(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Li(s)};return HC(e).put(u)}return he.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Ww(t),""],!1,!0);return HC(e).qt(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Fo(c.parent))}return r})}addFieldIndex(e,t){const r=Gm(e),s={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete s.indexId,r.add(s).next()}deleteFieldIndex(e,t){const r=Gm(e),s=qm(e),u=Dh(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Dh(e);let s=!0;const u=new Map;return he.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(p=>{s&&(s=!!p),u.set(c,p)})).next(()=>{if(s){let c=dn();const p=[];return he.forEach(u,(v,I)=>{var S;Pe("IndexedDbIndexManager",`Using index ${S=v,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Et=>`${Et.fieldPath}:${Et.kind}`).join(",")}`} to execute ${il(t)}`);const x=function(Et,at){const Ft=Ev(at);if(void 0===Ft)return null;for(const Ht of Sm(Et,Ft.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(I,v),V=function(Et,at){const Ft=new Map;for(const Ht of rl(at))for(const mn of Sm(Et,Ht.fieldPath))switch(mn.op){case"==":case"in":Ft.set(Ht.fieldPath.canonicalString(),mn.value);break;case"not-in":case"!=":return Ft.set(Ht.fieldPath.canonicalString(),mn.value),Array.from(Ft.values())}return null}(I,v),H=function(Et,at){const Ft=[];let Ht=!0;for(const mn of rl(at)){const Ui=0===mn.kind?bv(Et,mn.fieldPath,Et.startAt):Iv(Et,mn.fieldPath,Et.startAt);if(!Ui.value)return null;Ft.push(Ui.value),Ht&&(Ht=Ui.inclusive)}return new sl(Ft,Ht)}(I,v),z=function(Et,at){const Ft=[];let Ht=!0;for(const mn of rl(at)){const Ui=0===mn.kind?Iv(Et,mn.fieldPath,Et.endAt):bv(Et,mn.fieldPath,Et.endAt);if(!Ui.value)return null;Ft.push(Ui.value),Ht&&(Ht=Ui.inclusive)}return new sl(Ft,Ht)}(I,v),ge=this.je(v,I,H),ke=this.je(v,I,z),ft=this.We(v,I,V),gt=this.ze(v.indexId,x,ge,!!H&&H.inclusive,ke,!!z&&z.inclusive,ft);return he.forEach(gt,Et=>r.Gt(Et,t.limit).next(at=>{at.forEach(Ft=>{const Ht=$e.fromSegments(Ft.documentKey);c.has(Ht)||(c=c.add(Ht),p.push(Ht))})}))}).next(()=>p)}return he.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,s,u,c,p){const v=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),I=v/(null!=t?t.length:1),S=[];for(let x=0;x<v;++x){const V=t?this.He(t[x/I]):Ih,H=r?this.Je(e,V,r[x%I],s):this.Ye(e),z=u?this.Xe(e,V,u[x%I],c):this.Ye(e+1);S.push(...this.createRange(H,z,p.map(ge=>this.Je(e,V,ge,!0))))}return S}Je(e,t,r,s){const u=new Ea(e,$e.empty(),t,r);return s?u:u.ke()}Xe(e,t,r,s){const u=new Ea(e,$e.empty(),t,r);return s?u.ke():u}Ye(e){return new Ea(e,$e.empty(),Ih,Ih)}getFieldIndex(e,t){const r=new eI(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{const c=u.filter(p=>r.$e(p));return c.sort((p,v)=>v.fields.length-p.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new Hc;for(const s of rl(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.Ne(s.kind);bh.fe.Zt(u,c)}return r.Se()}He(e){const t=new Hc;return bh.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Hc;return bh.fe.Zt(Sc(this.databaseId,t),r.Ne(function(s){const u=rl(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let s=[];s.push(new Hc);let u=0;for(const c of rl(e)){const p=r[u++];for(const v of s)if(this.en(t,c.fieldPath)&&sp(p))s=this.nn(s,c,p);else{const I=v.Ne(c.kind);bh.fe.Zt(p,I)}}return this.sn(s)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of s){const v=new Hc;v.seed(p.Se()),bh.fe.Zt(c,v.Ne(t.kind)),u.push(v)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Nr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Gm(e),s=qm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return he.forEach(u,p=>s.get([p.indexId,this.uid]).next(v=>{c.push(function(I,S){const x=S?new ap(S.sequenceNumber,new Xi(jc(S.readTime),new $e(Fo(S.documentKey)),S.largestBatchId)):ap.empty(),V=I.fields.map(([H,z])=>new wv(Br.fromServerFormat(H),z));return new op(I.indexId,I.collectionGroup,V,x)}(p,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Ut(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Gm(e),u=qm(e);return this.rn(e).next(c=>s.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>he.forEach(p,v=>{return u.put({indexId:v.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:ll((V=r).readTime),documentKey:Li(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(p=>(r.set(s.collectionGroup,p),he.forEach(p,v=>this.on(e,s,v).next(I=>{const S=this.un(u,v);return I.isEqual(S)?he.resolve():this.an(e,u,v,I,S)}))))})}cn(e,t,r,s){return Dh(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,s){return Dh(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const s=Dh(e);let u=new On(cl);return s.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new Ea(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new On(cl);const s=this.Ze(t,e);if(null==s)return r;const u=Ev(t);if(null!=u){const c=e.data.field(u.fieldPath);if(sp(c))for(const p of c.arrayValue.values||[])r=r.add(new Ea(t.indexId,e.key,this.He(p),s))}else r=r.add(new Ea(t.indexId,e.key,Ih,s));return r}an(e,t,r,s,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,v,I,S,x){const V=p.getIterator(),H=v.getIterator();let z=gh(V),ge=gh(H);for(;z||ge;){let ke=!1,ft=!1;if(z&&ge){const gt=I(z,ge);gt<0?ft=!0:gt>0&&(ke=!0)}else null!=z?ft=!0:ke=!0;ke?(S(ge),ge=gh(H)):ft?(x(z),z=gh(V)):(z=gh(V),ge=gh(H))}}(s,u,cl,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),he.waitFor(c)}rn(e){let t=1;return qm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>cl(c,p)).filter((c,p,v)=>!p||0!==cl(c,v[p-1]));const s=[];s.push(e);for(const c of r){const p=cl(c,e),v=cl(c,t);if(0===p)s[0]=e.ke();else if(p>0&&v<0)s.push(c),s.push(c.ke());else if(v>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2)u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,Ih,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,Ih,[]]));return u}}function HC(n){return $r(n,"collectionParents")}function Dh(n){return $r(n,"indexEntries")}function Gm(n){return $r(n,"indexConfiguration")}function qm(n){return $r(n,"indexState")}const nI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new bs(e,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function GC(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const v=r.Wt({range:c},(S,x,V)=>(p++,V.delete()));u.push(v.next(()=>{Tt(1===p)}));const I=[];for(const S of t.mutations){const x=VC(e,S.key.path,t.batchId);u.push(s.delete(x)),I.push(S.key)}return he.waitFor(u).next(()=>I)}function rE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}bs.DEFAULT_COLLECTION_PERCENTILE=10,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bs.DEFAULT=new bs(41943040,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bs.DISABLED=new bs(-1,0,0);class rI{constructor(e,t,r,s){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=s,this.ln={}}static Yt(e,t,r,s){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new rI(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dl(e).Wt({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=nu(e),c=dl(e);return c.add({}).next(p=>{Tt("number"==typeof p);const v=new Dp(p,t,r,s),I=function(V,H,z){const ge=z.baseMutations.map(ft=>Um(V.Jt,ft)),ke=z.mutations.map(ft=>Um(V.Jt,ft));return{userId:H,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ge,mutations:ke}}(this.M,this.userId,v),S=[];let x=new On((V,H)=>Ut(V.canonicalString(),H.canonicalString()));for(const V of s){const H=VC(this.userId,V.key.path,p);x=x.add(V.key.path.popLast()),S.push(c.put(I)),S.push(u.put(H,HS))}return x.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.ln[p]=v.keys()}),he.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return dl(e).get(t).next(r=>r?(Tt(r.userId===this.userId),wh(this.M,r)):null)}fn(e,t){return this.ln[t]?he.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.ln[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return dl(e).Wt({index:"userMutationsIndex",range:s},(c,p,v)=>{p.userId===this.userId&&(Tt(p.batchId>=r),u=wh(this.M,p)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return dl(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dl(e).qt("userMutationsIndex",t).next(r=>r.map(s=>wh(this.M,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gv(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return nu(e).Wt({range:s},(c,p,v)=>{const[I,S,x]=c,V=Fo(S);if(I===this.userId&&t.path.isEqual(V))return dl(e).get(x).next(H=>{if(!H)throw nt();Tt(H.userId===this.userId),u.push(wh(this.M,H))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Ut);const s=[];return t.forEach(u=>{const c=Gv(this.userId,u.path),p=IDBKeyRange.lowerBound(c),v=nu(e).Wt({range:p},(I,S,x)=>{const[V,H,z]=I,ge=Fo(H);V===this.userId&&u.path.isEqual(ge)?r=r.add(z):x.done()});s.push(v)}),he.waitFor(s).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Gv(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new On(Ut);return nu(e).Wt({range:c},(v,I,S)=>{const[x,V,H]=v,z=Fo(V);x===this.userId&&r.isPrefixOf(z)?z.length===s&&(p=p.add(H)):S.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(dl(e).get(u).next(c=>{if(null===c)throw nt();Tt(c.userId===this.userId),r.push(wh(this.M,c))}))}),he.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return GC(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),he.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return nu(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const v=Fo(u[1]);s.push(v)}else p.done()}).next(()=>{Tt(0===s.length)})})}containsKey(e,t){return qC(e,this.userId,t)}wn(e){return iI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qC(n,e,t){const r=Gv(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return nu(n).Wt({range:u,jt:!0},(p,v,I)=>{const[S,x,V]=p;S===e&&x===s&&(c=!0),I.done()}).next(()=>c)}function dl(n){return $r(n,"mutations")}function nu(n){return $r(n,"documentMutations")}function iI(n){return $r(n,"mutationQueues")}class Gc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Gc(0)}static yn(){return new Gc(-1)}}class sI{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Gc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>It.fromTimestamp(new ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.In(e,s)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>io(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return io(e).Wt((c,p)=>{const v=$c(p);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>he.waitFor(u)).next(()=>s)}forEachTarget(e,t){return io(e).Wt((r,s)=>{const u=$c(s);t(u)})}pn(e){return iE(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}In(e,t){return iE(e).put("targetGlobalKey",t)}Tn(e,t){return io(e).put(ro(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=il(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return io(e).Wt({range:s,index:"queryTargetsIndex"},(c,p,v)=>{const I=$c(p);cp(t,I.target)&&(u=I,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=wa(e);return t.forEach(c=>{const p=Li(c.path);s.push(u.put({targetId:r,path:p})),s.push(this.referenceDelegate.addReference(e,r,c))}),he.waitFor(s)}removeMatchingKeys(e,t,r){const s=wa(e);return he.forEach(t,u=>{const c=Li(u.path);return he.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=wa(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=wa(e);let u=dn();return s.Wt({range:r,jt:!0},(c,p,v)=>{const I=Fo(c[1]),S=new $e(I);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Li(t.path),s=IDBKeyRange.bound([r],[Ww(r)],!1,!0);let u=0;return wa(e).Wt({index:"documentTargetsIndex",jt:!0,range:s},([c,p],v,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}Et(e,t){return io(e).get(t).next(r=>r?$c(r):null)}}function io(n){return $r(n,"targets")}function iE(n){return $r(n,"targetGlobal")}function wa(n){return $r(n,"targetDocuments")}function ru(n){return sE.apply(this,arguments)}function sE(){return sE=(0,_e.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==jm)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),sE.apply(this,arguments)}function zm([n,e],[t,r]){const s=Ut(n,t);return 0===s?Ut(e,r):s}class oE{constructor(e){this.An=e,this.buffer=new On(zm),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();zm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wm{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(s){Uc(s)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ru(s)}yield t.Sn(e)}))}}class XS{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(ws.A);const r=new oE(t);return this.Dn.forEachTarget(e,s=>r.bn(s.sequenceNumber)).next(()=>this.Dn.xn(e,s=>r.bn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(nI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nI):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,s,u,c,p,v,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,c=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(I=Date.now(),bm()<=Ur.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${s} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(v-p)+`ms\n\tRemoved ${x} documents in `+(I-v)+`ms\nTotal Duration: ${I-S}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:x})))}}class eM{constructor(e,t){this.db=e,this.garbageCollector=new XS(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,s)=>t(s))}addReference(e,t,r){return aE(e,r)}removeReference(e,t,r){return aE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return aE(e,t)}On(e,t){return function(r,s){let u=!1;return iI(r).zt(c=>qC(r,c,s).next(p=>(p&&(u=!0),he.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const v=this.On(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,It.min()),wa(e).delete([0,Li(c.path)])))});s.push(v)}}).next(()=>he.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return aE(e,t)}Mn(e,t){const r=wa(e);let s,u=ws.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:v,sequenceNumber:I})=>{0===c?(u!==ws.A&&t(new $e(Fo(s)),u),u=I,s=v):u=ws.A}).next(()=>{u!==ws.A&&t(new $e(Fo(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aE(n,e){return wa(n).put((r=n.currentSequenceNumber,{targetId:0,path:Li(e.path),sequenceNumber:r}));var r}class zC{constructor(){this.changes=new eu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oI{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qc(e).put(r)}removeEntry(e,t,r){return qc(e).delete(function(s,u){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Cp(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Rn.newInvalidDocument(t);return qc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ap(t))},(s,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Rn.newInvalidDocument(t)};return qc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ap(t))},(s,u)=>{r={document:this.$n(t,u),size:rE(u)}}).next(()=>r)}getEntries(e,t){let r=ts();return this.Ln(e,t,(s,u)=>{const c=this.$n(s,u);r=r.insert(s,c)}).next(()=>r)}Un(e,t){let r=ts(),s=new Wn($e.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),s=s.insert(u,rE(c))}).next(()=>({documents:r,qn:s}))}Ln(e,t,r){if(t.isEmpty())return he.resolve();let s=new On(lE);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(Ap(s.first()),Ap(s.last())),c=s.getIterator();let p=c.getNext();return qc(e).Wt({index:"documentKeyIndex",range:u},(v,I,S)=>{const x=$e.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;p&&lE(p,x)<0;)r(p,null),p=c.getNext();p&&p.isEqual(x)&&(r(p,I),p=c.hasNext()?c.getNext():null),p?S.Ut(Ap(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),Cp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qc(e).qt(IDBKeyRange.bound(s,u,!0)).next(c=>{let p=ts();for(const v of c){const I=this.$n($e.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);p=p.insert(I.key,I)}return p})}getAllFromCollectionGroup(e,t,r,s){let u=ts();const c=uE(t,r),p=uE(t,Xi.max());return qc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(v,I,S)=>{const x=this.$n($e.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(x.key,x),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new WC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return aI(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Fn(e,t){return aI(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function Gb(n,e){let t;if(e.document)t=Rb(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),s=jc(e.noDocument.readTime);t=Rn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=$e.fromSegments(e.unknownDocument.path),s=jc(e.unknownDocument.version);t=Rn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new ar(r[0],r[1]);return It.fromTimestamp(s)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Rn.newInvalidDocument(e)}}class WC extends zC{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new eu(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new On((u,c)=>Ut(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const v=qb(this.Kn.M,c);s=s.add(u.path.popLast()),r+=rE(v)-p.size,t.push(this.Kn.addEntry(e,u,v))}else if(r-=p.size,this.trackRemovals){const v=qb(this.Kn.M,c.convertToNoDocument(It.min()));t.push(this.Kn.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:s})=>(s.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function aI(n){return $r(n,"remoteDocumentGlobal")}function qc(n){return $r(n,"remoteDocumentsV14")}function Ap(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uE(n,e){const t=e.documentKey.path.toArray();return[n,Cp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lE(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Ut(t[u],r[u]),s)return s;return s=Ut(t.length,r.length),s||(s=Ut(t[t.length-2],r[r.length-2]),s||Ut(t[t.length-1],r[r.length-1]))}class uI{constructor(e){this.M=e}kt(e,t,r,s){const u=new Zv("createOrUpgrade",t);var p;r<1&&s>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LC,{unique:!0}),p.createObjectStore("documentMutations"),lI(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=he.resolve();return r<3&&s>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),lI(e)),c=c.next(()=>function(p){const v=p.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(p,v){return v.store("mutations").qt().next(I=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LC,{unique:!0});const S=v.store("mutations"),x=I.map(V=>S.put(V));return he.waitFor(x)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.Qn(u))),r<6&&s>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&s>=7&&(c=c.next(()=>this.Wn(u))),r<8&&s>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.Hn(u))),r<11&&s>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(p){const v=p.createObjectStore("documentOverlays",{keyPath:zv});v.createIndex("collectionPathOverlayIndex",jb,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",$b,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(p){const v=p.createObjectStore("remoteDocumentsV14",{keyPath:GS});v.createIndex("documentKeyIndex",qS),v.createIndex("collectionGroupIndex",zS)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:qv}).createIndex("sequenceNumberIndex",Ub,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:Bb}).createIndex("documentKeyIndex",ZS,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,s)=>{t+=rE(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(s=>he.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>he.forEach(p,v=>{Tt(v.userId===u.userId);const I=wh(this.M,v);return GC(e,u.userId,I).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Wt((c,p)=>{const v=new en(c),I=[0,Li(v)];u.push(t.get(I).next(S=>S?he.resolve():t.put({targetId:0,path:Li(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>he.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Vb});const r=t.store("collectionParents"),s=new nE,u=c=>{if(s.add(c)){const p=c.lastSegment(),v=c.popLast();return r.put({collectionId:p,parent:Li(v)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const v=new en(c);return u(v.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,v],I)=>{const S=Fo(p);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,s)=>{const u=$c(s),c=ro(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),s=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),v=(I=c,I.document?new $e(en.fromString(I.document.name).popFirst(5)):I.noDocument?$e.fromSegments(I.noDocument.path):I.unknownDocument?$e.fromSegments(I.unknownDocument.path):nt()).path.toArray();var I;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(p.put(S))}).next(()=>he.waitFor(s))}}function lI(n){n.createObjectStore("targetDocuments",{keyPath:Bm}).createIndex("documentTargetsIndex",KS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",WS,{unique:!0}),n.createObjectStore("targetGlobal")}const cE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Km{constructor(e,t,r,s,u,c,p,v,I,S,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=I,this.Zn=S,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=V=>Promise.resolve(),!Km.vt())throw new xe(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eM(this,s),this.hs=t+"main",this.M=new Xv(v),this.ls=new _a(this.hs,this.ts,new uI(this.M)),this.fs=new sI(this.referenceDelegate,this.M),this.ds=new oI(this.M),this._s=new Kb,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&Bn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ae.FAILED_PRECONDITION,cE);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ws(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,_e.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Uc(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return zc(e).get("owner").next(t=>he.resolve(this.bs(t)))}Vs(e){return dE(e).delete(this.clientId)}vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=$r(r,"clientMetadata");return s.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(v=>-1===c.indexOf(v));return he.forEach(p,v=>s.delete(v.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?he.resolve(!0):zc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(ae.FAILED_PRECONDITION,cE);return!1}}return!(!this.networkEnabled||!this.inForeground)||dE(e).qt().next(r=>void 0===this.Ds(r,5e3).find(s=>{if(this.clientId!==s.clientId){const c=!this.inForeground&&s.inForeground,p=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new no(t,ws.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>dE(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return rI.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new JS(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Hm.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?UC:13===c?Kv:12===c?YS:11===c?Wv:void nt();var c;let p;return this.ls.runTransaction(e,s,u,v=>(p=new no(v,this.es?this.es.next():ws.A),"readwrite-primary"===t?this.Es(p).next(I=>!!I||this.As(p)).next(I=>{if(!I)throw Bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(ae.FAILED_PRECONDITION,jm);return r(p)}).next(I=>this.Ps(p).next(()=>I)):this.$s(p).next(()=>r(p)))).then(v=>(p.raiseOnCommittedEvent(),v))}$s(e){return zc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ae.FAILED_PRECONDITION,cE)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zc(e).put("owner",t)}static vt(){return _a.vt()}Rs(e){const t=zc(e);return t.get("owner").next(r=>this.bs(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Bn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Yt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Bn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Bn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zc(n){return $r(n,"owner")}function dE(n){return $r(n,"clientMetadata")}function Zm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hE{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(s=>{for(const u of r)u.applyToLocalView(s);return s})}qs(e,t){e.forEach((r,s)=>{for(const u of t)u.applyToLocalView(s)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return $e.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.js(e,t.path):ob(t)?this.Ws(e,t,r):this.zs(e,t,r);var s}js(e,t){return this.Ls(e,new $e(t)).next(r=>{let s=Ov();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}Ws(e,t,r){const s=t.collectionGroup;let u=Ov();return this.indexManager.getCollectionParents(e,s).next(c=>he.forEach(c,p=>{const v=(I=t,S=p.child(s),new ya(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.zs(e,v,r).next(I=>{I.forEach((S,x)=>{u=u.insert(S,x)})})}).next(()=>u))}zs(e,t,r){let s;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const v=p.key;let I=s.get(v);null==I&&(I=Rn.newInvalidDocument(v),s=s.insert(v,I)),xv(p,I,c.localWriteTime),I.isFoundDocument()||(s=s.remove(v))}}).next(()=>(s.forEach((u,c)=>{Av(t,c)||(s=s.remove(u))}),s))}}class fE{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=s}static Ys(e,t){let r=dn(),s=dn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new fE(e,t.fromCache,r,s)}}class cI{Xs(e){this.Zs=e}Qs(e,t,r,s){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(It.min())?this.ti(e,t):this.Zs.Ks(e,s).next(u=>{const c=this.ei(t,u);return(pp(t)||xm(t))&&this.ni(t.limitType,c,s,r)?this.ti(e,t):(bm()<=Ur.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tv(t)),this.Zs.Qs(e,t,up(r,-1)).next(p=>(c.forEach(v=>{p=p.insert(v.key,v)}),p)))});var u}ei(e,t){let r=new On(cb(e));return t.forEach((s,u)=>{Av(e,u)&&(r=r.add(u))}),r}ni(e,t,r,s){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}ti(e,t){return bm()<=Ur.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Tv(t)),this.Zs.Qs(e,t,Xi.min())}}class tM{constructor(e,t,r,s){this.persistence=e,this.si=t,this.M=s,this.ii=new Wn(Ut),this.ri=new eu(u=>il(u),cp),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new hE(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function KC(n,e,t,r){return new tM(n,e,t,r)}function ZC(n,e){return pE.apply(this,arguments)}function pE(){return pE=(0,_e.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.Bs.getAllMutationBatches(r).next(u=>(s=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let v=dn();for(const I of s){c.push(I.batchId);for(const S of I.mutations)v=v.add(S.key)}for(const I of u){p.push(I.batchId);for(const S of I.mutations)v=v.add(S.key)}return t.ci.Ks(r,v).next(I=>({hi:I,removedBatchIds:c,addedBatchIds:p}))})})}),pE.apply(this,arguments)}function YC(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(c,p,v,I){const S=v.batch,x=S.keys();let V=he.resolve();return x.forEach(H=>{V=V.next(()=>I.getEntry(p,H)).next(z=>{const ge=v.docVersions.get(H);Tt(null!==ge),z.version.compareTo(ge)<0&&(S.applyToRemoteDocument(z,v),z.isValidDocument()&&(z.setReadTime(v.commitVersion),I.addEntry(z)))})}),V.next(()=>c.Bs.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,s))})}function QC(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function nM(n,e){const t=qe(n),r=e.snapshotVersion;let s=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.ui.newChangeBuffer({trackRemovals:!0});s=t.ii;const p=[];e.targetChanges.forEach((I,S)=>{const x=s.get(S);if(!x)return;p.push(t.fs.removeMatchingKeys(u,I.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,I.addedDocuments,S)));let V=x.withSequenceNumber(u.currentSequenceNumber);var H,z,ge;e.targetMismatches.has(S)?V=V.withResumeToken(_r.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):I.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(I.resumeToken,r)),s=s.insert(S,V),z=V,ge=I,(0===(H=x).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,V))});let v=ts();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,I))}),p.push(JC(u,c,e.documentUpdates).next(I=>{v=I})),!r.isEqual(It.min())){const I=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(I)}return he.waitFor(p).next(()=>c.apply(u)).next(()=>t.ci.Gs(u,v)).next(()=>v)}).then(u=>(t.ii=s,u))}function JC(n,e,t){let r=dn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=ts();return t.forEach((c,p)=>{const v=s.get(c);p.isNoDocument()&&p.version.isEqual(It.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||0===p.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Pe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",v.version," Watch version:",p.version)}),u})}function rM(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Sp(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.fs.getTargetData(r,e).next(u=>u?(s=u,he.resolve(s)):t.fs.allocateTargetId(r).next(c=>(s=new va(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ii.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Ch(n,e,t){return dI.apply(this,arguments)}function dI(){return dI=(0,_e.Z)(function*(n,e,t){const r=qe(n),s=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Uc(c))throw c;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ii=r.ii.remove(e),r.ri.delete(s.target)}),dI.apply(this,arguments)}function gE(n,e,t){const r=qe(n);let s=It.min(),u=dn();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,v,I){const S=qe(p),x=S.ri.get(I);return void 0!==x?he.resolve(S.ii.get(x)):S.fs.getTargetData(v,I)}(r,c,es(e)).next(p=>{if(p)return s=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(v=>{u=v})}).next(()=>r.si.Qs(c,e,t?s:It.min(),t?u:dn())).next(p=>(i(r,lb(e),p),{documents:p,li:u})))}function XC(n,e){const t=qe(n),r=qe(t.fs),s=t.ii.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function eT(n,e){const t=qe(n),r=t.oi.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.ui.getAllFromCollectionGroup(s,e,up(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(i(t,e,s),s))}function i(n,e,t){let r=It.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function a(){return a=(0,_e.Z)(function*(n,e,t,r){const s=qe(n);let u=dn(),c=ts();for(const I of t){const S=e.fi(I.metadata.name);I.document&&(u=u.add(S));const x=e.di(I);x.setReadTime(e._i(I.metadata.readTime)),c=c.insert(S,x)}const p=s.ui.newChangeBuffer({trackRemovals:!0}),v=yield Sp(s,(I=r,es(fp(en.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>JC(I,p,c).next(S=>(p.apply(I),S)).next(S=>s.fs.removeMatchingKeysForTargetId(I,v.targetId).next(()=>s.fs.addMatchingKeys(I,u,v.targetId)).next(()=>s.ci.Gs(I,S)).next(()=>S)))}),a.apply(this,arguments)}function l(n,e){return d.apply(this,arguments)}function d(){return d=(0,_e.Z)(function*(n,e,t=dn()){const r=yield Sp(n,es(eE(e.bundledQuery))),s=qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=Rr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s._s.saveNamedQuery(u,e);const p=r.withResumeToken(_r.EMPTY_BYTE_STRING,c);return s.ii=s.ii.insert(p.targetId,p),s.fs.updateTargetData(u,p).next(()=>s.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.fs.addMatchingKeys(u,t,r.targetId)).next(()=>s._s.saveNamedQuery(u,e))})}),d.apply(this,arguments)}class f{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return he.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Rr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:eE(r.bundledQuery),readTime:Rr(r.readTime)}),he.resolve();var r}}class _{constructor(){this.overlays=new Wn($e.comparator),this.gi=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.Xt(e,t,u)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.gi.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const s=mh(),u=t.length+1,c=new $e(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const v=p.getNext().value,I=v.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return he.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Wn((I,S)=>I-S);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let S=u.get(I.largestBatchId);null===S&&(S=mh(),u=u.insert(I.largestBatchId,S)),S.set(I.getKey(),I)}}const p=mh(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((I,S)=>p.set(I,S)),!(p.size()>=s)););return he.resolve(p)}Xt(e,t,r){if(null===r)return;const s=this.overlays.get(r.key);if(null!==s){const c=this.gi.get(s.largestBatchId).delete(r.key);this.gi.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Jv(t,r));let u=this.gi.get(t);void 0===u&&(u=dn(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class w{constructor(){this.yi=new On(b.pi),this.Ii=new On(b.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new b(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new b(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new $e(new en([])),r=new b(t,e),s=new b(t,e+1),u=[];return this.Ii.forEachInRange([r,s],c=>{this.Ai(c),u.push(c.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new $e(new en([])),r=new b(t,e),s=new b(t,e+1);let u=dn();return this.Ii.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new b(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class b{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return $e.comparator(e.key,t.key)||Ut(e.vi,t.vi)}static Ti(e,t){return Ut(e.vi,t.vi)||$e.comparator(e.key,t.key)}}class A{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new On(b.pi)}checkEmpty(e){return he.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,s){const u=this.Si;this.Si++;const c=new Dp(u,t,r,s);this.Bs.push(c);for(const p of s)this.Di=this.Di.add(new b(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.xi(t+1),u=s<0?0:s;return he.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return he.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new b(t,0),s=new b(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,s],c=>{const p=this.Ci(c.vi);u.push(p)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On(Ut);return t.forEach(s=>{const u=new b(s,0),c=new b(s,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,c],p=>{r=r.add(p.vi)})}),he.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const c=new b(new $e(u),0);let p=new On(Ut);return this.Di.forEachWhile(v=>{const I=v.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(p=p.add(v.vi)),!0)},c),he.resolve(this.Ni(p))}Ni(e){const t=[];return e.forEach(r=>{const s=this.Ci(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Tt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return he.forEach(t.mutations,s=>{const u=new b(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new b(t,0),s=this.Di.firstAfterOrEqual(r);return he.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return he.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class M{constructor(e){this.Mi=e,this.docs=new Wn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let r=ts();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Rn.newInvalidDocument(s))}),he.resolve(r)}getAllFromCollection(e,t,r){let s=ts();const u=new $e(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:v}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||lp(_C(v),r)<=0||(s=s.insert(v.key,v.mutableCopy()))}return he.resolve(s)}getAllFromCollectionGroup(e,t,r,s){nt()}Oi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new k(this)}getSize(e){return he.resolve(this.size)}}class k extends zC{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Kn.addEntry(e,s)):this.Kn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class U{constructor(e){this.persistence=e,this.Fi=new eu(t=>il(t),cp),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.$i=0,this.Bi=new w,this.targetCount=0,this.Li=Gc.gn()}forEachTarget(e,t){return this.Fi.forEach((r,s)=>t(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),he.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Gc(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Tn(t),he.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Fi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Fi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),s++)}),he.waitFor(u).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.Bi.containsKey(t))}}class K{constructor(e,t){this.Ui={},this.overlays={},this.es=new ws(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new U(this),this.indexManager=new tI,this.ds=new M(r=>this.referenceDelegate.qi(r)),this.M=new Xv(t),this._s=new f(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new A(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new me(this.es.next());return this.referenceDelegate.Ki(),r(s).next(u=>this.referenceDelegate.Gi(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Qi(e,t){return he.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class me extends Hb{constructor(e){super(),this.currentSequenceNumber=e}}class Oe{constructor(e){this.persistence=e,this.ji=new w,this.Wi=null}static zi(e){return new Oe(e)}get Hi(){if(this.Wi)return this.Wi;throw nt()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),he.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(s=>this.Hi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Hi,r=>{const s=$e.fromPath(r);return this.Ji(e,s).next(u=>{u||t.removeEntry(s,It.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return he.or([()=>he.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Be(n,e){return`firestore_clients_${n}_${e}`}function tt(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ie(n,e){return`firestore_targets_${n}_${e}`}class ut{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Yi(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new xe(s.error.code,s.error.message))),c?new ut(e,t,s.state,u):(Bn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jt{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new xe(r.error.code,r.error.message))),u?new jt(e,r.state,s):(Bn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sn{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Fm();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=Qw(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new sn(e,u):(Bn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vi{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Vi(t.clientId,t.onlineState):(Bn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class iu{constructor(){this.activeTargetIds=Fm()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mp{constructor(e,t,r,s,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Wn(Ut),this.started=!1,this.rr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=Be(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new iu),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Fs();for(const s of t){if(s===e.er)continue;const u=e.getItem(Be(e.persistenceKey,s));if(u){const c=sn.Yi(s,u);c&&(e.ir=e.ir.insert(c.clientId,c))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const s=e.mr(r);s&&e.gr(s)}for(const s of e.rr)e.sr(s);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ie(this.persistenceKey,e));if(r){const s=jt.Yi(e,r);s&&(t=s.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ie(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Ir(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Bn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const s=t.Pr(r.key);return t.br(s,null)}{const s=t.Vr(r.key,r.newValue);if(s)return t.br(s.clientId,s)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const s=t.vr(r.key,r.newValue);if(s)return t.Sr(s)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(r.key===t.dr){if(null!==r.newValue){const s=t.mr(r.newValue);if(s)return t.gr(s)}}else if(r.key===t.ar){const s=function(u){let c=ws.A;if(null!=u)try{const p=JSON.parse(u);Tt("number"==typeof p),c=p}catch(p){Bn("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);s!==ws.A&&t.sequenceNumberHandler(s)}else if(r.key===t._r){const s=t.Nr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const s=new ut(this.currentUser,e,t,r),u=tt(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Xi())}Ir(e){const t=tt(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const s=Ie(this.persistenceKey,e),u=new jt(e,t,r);this.setItem(s,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return sn.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),s=Number(r[1]);return ut.Yi(new ri(void 0!==r[2]?r[2]:null),s,t)}Dr(e,t){const r=this.lr.exec(e),s=Number(r[1]);return jt.Yi(s,t)}mr(e){return Vi.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),s=this.yr(this.ir),u=this.yr(r),c=[],p=[];return u.forEach(v=>{s.has(v)||c.push(v)}),s.forEach(v=>{u.has(v)||p.push(v)}),this.syncEngine.Fr(c,p).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Fm();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class Ym{constructor(){this.$r=new iu,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new iu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mE{Lr(e){}shutdown(){}}class Qm{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class _E{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class vE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,s,u){const c=this.uo(e,t);Pe("RestConnection","Sending: ",c,r);const p={};return this.ao(p,s,u),this.co(e,c,p,r).then(v=>(Pe("RestConnection","Received: ",v),v),v=>{throw Ja("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}ho(e,t,r,s,u){return this.oo(e,t,r,s,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ya,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}uo(e,t){return`${this.io}/v1/${t}:${yE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,s){return new Promise((u,c)=>{const p=new hC;p.listenOnce(Bw.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case wm.NO_ERROR:const I=p.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(I)),u(I);break;case wm.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),c(new xe(ae.DEADLINE_EXCEEDED,"Request time out"));break;case wm.HTTP_ERROR:const S=p.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){const x=p.getResponseJson().error;if(x&&x.status&&x.message){const V=function(H){const z=H.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(z)>=0?z:ae.UNKNOWN}(x.status);c(new xe(V,x.message))}else c(new xe(ae.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new xe(ae.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(s);p.send(t,"POST",v,r,15)})}lo(e,t,r){const s=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Vw(),c=Uw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new dC({})),this.ao(p.initMessageHeaders,t,r),(0,Yt.uI)()||(0,Yt.b$)()||(0,Yt.d)()||(0,Yt.w1)()||(0,Yt.Mn)()||(0,Yt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const v=s.join("");Pe("Connection","Creating WebChannel: "+v,p);const I=u.createWebChannel(v,p);let S=!1,x=!1;const V=new _E({Wr:z=>{x?Pe("Connection","Not sending because WebChannel is closed:",z):(S||(Pe("Connection","Opening WebChannel transport."),I.open(),S=!0),Pe("Connection","WebChannel sending:",z),I.send(z))},zr:()=>I.close()}),H=(z,ge,ke)=>{z.listen(ge,ft=>{try{ke(ft)}catch(gt){setTimeout(()=>{throw gt},0)}})};return H(I,el.EventType.OPEN,()=>{x||Pe("Connection","WebChannel transport opened.")}),H(I,el.EventType.CLOSE,()=>{x||(x=!0,Pe("Connection","WebChannel transport closed"),V.no())}),H(I,el.EventType.ERROR,z=>{x||(x=!0,Ja("Connection","WebChannel transport errored:",z),V.no(new xe(ae.UNAVAILABLE,"The operation could not be completed")))}),H(I,el.EventType.MESSAGE,z=>{var ge;if(!x){const ke=z.data[0];Tt(!!ke);const ft=ke,gt=ft.error||(null===(ge=ft[0])||void 0===ge?void 0:ge.error);if(gt){Pe("Connection","WebChannel received error:",gt);const Et=gt.status;let at=function(Ht){const mn=vr[Ht];if(void 0!==mn)return km(mn)}(Et),Ft=gt.message;void 0===at&&(at=ae.INTERNAL,Ft="Unknown error status: "+Et+" with message "+gt.message),x=!0,V.no(new xe(at,Ft)),I.close()}else Pe("Connection","WebChannel received:",ke),V.so(ke)}}),H(c,cC.STAT_EVENT,z=>{z.stat===jw.PROXY?Pe("Connection","Detected buffering proxy"):z.stat===jw.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.eo()},0),V}}function Jm(){return"undefined"!=typeof window?window:null}function Th(){return"undefined"!=typeof document?document:null}function EE(n){return new Mb(n,!0)}class tT{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=s,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),s=Math.max(0,t-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,s,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class iM{constructor(e,t,r,s,u,c,p,v){this.Yn=e,this.Ro=r,this.Po=s,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new tT(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,_e.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,_e.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Bn(t.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Vo===t&&this.qo(r,s)},r=>{e(()=>{const s=new xe(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(s)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(s=>{r(()=>this.Ko(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}No(){var e=this;this.state=5,this.Do.To((0,_e.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sR extends iM{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Vv(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:nt(),s=e.targetChange.targetIds||[],u=function(v,I){return v.N?(Tt(void 0===I||"string"==typeof I),_r.fromBase64String(I||"")):(Tt(void 0===I||I instanceof Uint8Array),_r.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(v){const I=void 0===v.code?ae.UNKNOWN:km(v.code);return new xe(I,v.message||"")}(c);t=new Tb(r,s,u,p||null)}else if("documentChange"in e){const r=e.documentChange,s=tu(n,r.document.name),u=Rr(r.document.updateTime),c=new vi({mapValue:{fields:r.document.fields}}),p=Rn.newFoundDocument(s,u,c);t=new jr(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,s=tu(n,r.document),u=r.readTime?Rr(r.readTime):It.min(),c=Rn.newNoDocument(s,u);t=new jr([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=tu(n,r.document);t=new jr([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new MC(r.count||0);t=new Fc(r.targetId,u)}}var v;return t}(this.M,e),r=function(s){if(!("targetChange"in s))return It.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?It.min():u.readTime?Rr(u.readTime):It.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=vh(this.M),t.addTarget=function(s,u){let c;const p=u.target;return c=Am(p)?{documents:Bv(s,p)}:{query:jv(s,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=xb(s,u.resumeToken):u.snapshotVersion.compareTo(It.min())>0&&(c.readTime=Ep(s,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function Pb(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=vh(this.M),t.removeTarget=e,this.Fo(t)}}class oR extends iM{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function RC(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,s){let u=Rr(r.updateTime?r.updateTime:s);return u.isEqual(It.min())&&(u=Rr(s)),new Mv(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Rr(e.commitTime);return this.listener.Yo(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=vh(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Um(this.M,r))};this.Fo(t)}}class aR extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=s,this.tu=!1}eu(){if(this.tu)throw new xe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.bo.oo(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(ae.UNKNOWN,s.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.bo.ho(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(ae.UNKNOWN,s.toString())})}terminate(){this.tu=!0}}class uR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Bn(t),this.iu=!1):Pe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class lR{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(p=>{r.enqueueAndForget((0,_e.Z)(function*(){var v;Ah(c)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,_e.Z)(function*(I){const S=qe(I);S.fu.add(4),yield Xm(S),S.wu.set("Unknown"),S.fu.delete(4),yield wE(S)}),function(I){return v.apply(this,arguments)})(c))}))}),this.wu=new uR(r,s)}}function wE(n){return nT.apply(this,arguments)}function nT(){return nT=(0,_e.Z)(function*(n){if(Ah(n))for(const e of n.du)yield e(!0)}),nT.apply(this,arguments)}function Xm(n){return rT.apply(this,arguments)}function rT(){return rT=(0,_e.Z)(function*(n){for(const e of n.du)yield e(!1)}),rT.apply(this,arguments)}function hI(n,e){const t=qe(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),oT(t)?sT(t):ty(t).xo()&&iT(t,e))}function bE(n,e){const t=qe(n),r=ty(t);t.lu.delete(e),r.xo()&&sM(t,e),0===t.lu.size&&(r.xo()?r.Mo():Ah(t)&&t.wu.set("Unknown"))}function iT(n,e){n.mu.Z(e.targetId),ty(n).jo(e)}function sM(n,e){n.mu.Z(e),ty(n).Wo(e)}function sT(n){n.mu=new $S({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),ty(n).start(),n.wu.ru()}function oT(n){return Ah(n)&&!ty(n).Co()&&n.lu.size>0}function Ah(n){return 0===qe(n).fu.size}function oM(n){n.mu=void 0}function cR(n){return aT.apply(this,arguments)}function aT(){return aT=(0,_e.Z)(function*(n){n.lu.forEach((e,t)=>{iT(n,e)})}),aT.apply(this,arguments)}function dR(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,_e.Z)(function*(n,e){oM(n),oT(n)?(n.wu.au(e),sT(n)):n.wu.set("Unknown")}),uT.apply(this,arguments)}function hR(n,e,t){return lT.apply(this,arguments)}function lT(){return lT=(0,_e.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof Tb&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(s,u){const c=u.cause;for(const p of u.targetIds)s.lu.has(p)&&(yield s.remoteSyncer.rejectListen(p,c),s.lu.delete(p),s.mu.removeTarget(p))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fI(n,r)}else if(e instanceof jr?n.mu.ut(e):e instanceof Fc?n.mu._t(e):n.mu.ht(e),!t.isEqual(It.min()))try{const r=yield QC(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const c=s.mu.yt(u);return c.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const I=s.lu.get(v);I&&s.lu.set(v,I.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const v=s.lu.get(p);if(!v)return;s.lu.set(p,v.withResumeToken(_r.EMPTY_BYTE_STRING,v.snapshotVersion)),sM(s,p);const I=new va(v.target,p,1,v.sequenceNumber);iT(s,I)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield fI(n,r)}var r}),lT.apply(this,arguments)}function fI(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=(0,_e.Z)(function*(n,e,t){if(!Uc(e))throw e;n.fu.add(1),yield Xm(n),n.wu.set("Offline"),t||(t=()=>QC(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield wE(n)}))}),cT.apply(this,arguments)}function aM(n,e){return e().catch(t=>fI(n,t,e))}function ey(n){return dT.apply(this,arguments)}function dT(){return dT=(0,_e.Z)(function*(n){const e=qe(n),t=Sh(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;fR(e);)try{const s=yield rM(e.localStore,r);if(null===s){0===e.hu.length&&t.Mo();break}r=s.batchId,pR(e,s)}catch(s){yield fI(e,s)}uM(e)&&lM(e)}),dT.apply(this,arguments)}function fR(n){return Ah(n)&&n.hu.length<10}function pR(n,e){n.hu.push(e);const t=Sh(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function uM(n){return Ah(n)&&!Sh(n).Co()&&n.hu.length>0}function lM(n){Sh(n).start()}function gR(n){return hT.apply(this,arguments)}function hT(){return hT=(0,_e.Z)(function*(n){Sh(n).Zo()}),hT.apply(this,arguments)}function mR(n){return fT.apply(this,arguments)}function fT(){return fT=(0,_e.Z)(function*(n){const e=Sh(n);for(const t of n.hu)e.Jo(t.mutations)}),fT.apply(this,arguments)}function yR(n,e,t){return pT.apply(this,arguments)}function pT(){return pT=(0,_e.Z)(function*(n,e,t){const r=n.hu.shift(),s=Qv.from(r,e,t);yield aM(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield ey(n)}),pT.apply(this,arguments)}function _R(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,_e.Z)(function*(n,e){var t;e&&Sh(n).Ho&&(yield(t=(0,_e.Z)(function*(r,s){if(Pm(u=s.code)&&u!==ae.ABORTED){const c=r.hu.shift();Sh(r).ko(),yield aM(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,s)),yield ey(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),uM(n)&&lM(n)}),gT.apply(this,arguments)}function cM(n,e){return mT.apply(this,arguments)}function mT(){return mT=(0,_e.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Ah(t);t.fu.add(3),yield Xm(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield wE(t)}),mT.apply(this,arguments)}function yT(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,_e.Z)(function*(n,e){const t=qe(n);e?(t.fu.delete(2),yield wE(t)):e||(t.fu.add(2),yield Xm(t),t.wu.set("Unknown"))}),_T.apply(this,arguments)}function ty(n){return n.gu||(n.gu=function(e,t,r){const s=qe(e);return s.eu(),new sR(t,s.bo,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Hr:cR.bind(null,n),Yr:dR.bind(null,n),Qo:hR.bind(null,n)}),n.du.push(function(){var e=(0,_e.Z)(function*(t){t?(n.gu.ko(),oT(n)?sT(n):n.wu.set("Unknown")):(yield n.gu.stop(),oM(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function Sh(n){return n.yu||(n.yu=function(e,t,r){const s=qe(e);return s.eu(),new oR(t,s.bo,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Hr:gR.bind(null,n),Yr:_R.bind(null,n),Xo:mR.bind(null,n),Yo:yR.bind(null,n)}),n.du.push(function(){var e=(0,_e.Z)(function*(t){t?(n.yu.ko(),yield ey(n)):(yield n.yu.stop(),n.hu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class vT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,p=new vT(e,t,c,s,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ny(n,e){if(Bn("AsyncQueue",`${e}: ${n}`),Uc(n))return new xe(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class ry{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=Ov(),this.sortedSet=new Wn(this.comparator)}static emptySet(e){return new ry(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ry)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ry;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class dM{constructor(){this.pu=new Wn($e.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):nt():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class iy{constructor(e,t,r,s,u,c,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new iy(e,t,ry.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class vR{constructor(){this.Tu=void 0,this.listeners=[]}}class ER{constructor(){this.queries=new eu(e=>ub(e),gp),this.onlineState="Unknown",this.Eu=new Set}}function ET(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,_e.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new vR),s)try{u.Tu=yield t.onListen(r)}catch(c){const p=ny(c,`Initialization of query '${Tv(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&DT(t)}),wT.apply(this,arguments)}function bT(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,_e.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),IT.apply(this,arguments)}function wR(n,e){const t=qe(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const p of c.listeners)p.Ru(s)&&(r=!0);c.Tu=s}}r&&DT(t)}function bR(n,e,t){const r=qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function DT(n){n.Eu.forEach(e=>{e.next()})}class CT{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new iy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=iy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class IR{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class hM{constructor(e){this.M=e}fi(e){return tu(this.M,e)}di(e){return e.metadata.exists?Rb(this.M,e.document,!1):Rn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Rr(e)}}class DR{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fM(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=en.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new hM(this.M);for(const s of e)if(s.metadata.queries){const u=r.fi(s.metadata.name);for(const c of s.metadata.queries){const p=(t.get(c)||dn()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function o(n,e,t,r){return a.apply(this,arguments)}(e.localStore,new hM(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const s of e.queries)yield l(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function fM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class pM{constructor(e){this.key=e}}class gM{constructor(e){this.key=e}}class mM{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=dn(),this.mutatedKeys=dn(),this.Uu=cb(e),this.qu=new ry(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new dM,s=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,p=!1;const v=pp(this.query)&&s.size===this.query.limit?s.last():null,I=xm(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,x)=>{const V=s.get(S),H=Av(this.query,x)?x:null,z=!!V&&this.mutatedKeys.has(V.key),ge=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let ke=!1;V&&H?V.data.isEqual(H.data)?z!==ge&&(r.track({type:3,doc:H}),ke=!0):this.ju(V,H)||(r.track({type:2,doc:H}),ke=!0,(v&&this.Uu(H,v)>0||I&&this.Uu(H,I)<0)&&(p=!0)):!V&&H?(r.track({type:0,doc:H}),ke=!0):V&&!H&&(r.track({type:1,doc:V}),ke=!0,(v||I)&&(p=!0)),ke&&(H?(c=c.add(H),u=ge?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),pp(this.query)||xm(this.query))for(;c.size>this.query.limit;){const S=pp(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{qu:c,Qu:r,ni:p,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((I,S)=>function(x,V){const H=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return H(x)-H(V)}(I.type,S.type)||this.Uu(I.doc,S.doc)),this.Wu(r);const c=t?this.zu():[],p=0===this.Lu.size&&this.current?1:0,v=p!==this.Bu;return this.Bu=p,0!==u.length||v?{snapshot:new iy(this.query,e.qu,s,u,e.mutatedKeys,0===p,v,!1),Hu:c}:{Hu:c}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new dM,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=dn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new gM(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new pM(r))}),t}Yu(e){this.$u=e.li,this.Lu=dn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return iy.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class CR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class TR{constructor(e){this.key=e,this.Zu=!1}}class AR{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.ta={},this.ea=new eu(p=>ub(p),gp),this.na=new Map,this.sa=new Set,this.ia=new Wn($e.comparator),this.ra=new Map,this.oa=new w,this.ua={},this.aa=new Map,this.ca=Gc.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function SR(n,e){return TT.apply(this,arguments)}function TT(){return TT=(0,_e.Z)(function*(n,e){const t=ZT(n);let r,s;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.Xu();else{const c=yield Sp(t.localStore,es(e));t.isPrimaryClient&&hI(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield AT(t,e,r,"current"===p)}return s}),TT.apply(this,arguments)}function AT(n,e,t,r){return ST.apply(this,arguments)}function ST(){return ST=(0,_e.Z)(function*(n,e,t,r){n.la=(S,x,V)=>{return(H=(0,_e.Z)(function*(z,ge,ke,ft){let gt=ge.view.Gu(ke);gt.ni&&(gt=yield gE(z.localStore,ge.query,!1).then(({documents:Ft})=>ge.view.Gu(Ft,gt)));const Et=ft&&ft.targetChanges.get(ge.targetId),at=ge.view.applyChanges(gt,z.isPrimaryClient,Et);return VT(z,ge.targetId,at.Hu),at.snapshot}),function(z,ge,ke,ft){return H.apply(this,arguments)})(n,S,x,V);var H};const s=yield gE(n.localStore,e,!0),u=new mM(e,s.li),c=u.Gu(s.documents),p=vp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(c,n.isPrimaryClient,p);VT(n,t,v.Hu);const I=new CR(e,t,u);return n.ea.set(e,I),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),v.snapshot}),ST.apply(this,arguments)}function MR(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,_e.Z)(function*(n,e){const t=qe(n),r=t.ea.get(e),s=t.na.get(r.targetId);if(s.length>1)return t.na.set(r.targetId,s.filter(u=>!gp(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ch(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bE(t.remoteStore,r.targetId),sy(t,r.targetId)}).catch(ru))):(sy(t,r.targetId),yield Ch(t.localStore,r.targetId,!0))}),MT.apply(this,arguments)}function xT(){return xT=(0,_e.Z)(function*(n,e,t){const r=YT(n);try{const s=yield function(u,c){const p=qe(u),v=ar.now(),I=c.reduce((x,V)=>x.add(V.key),dn());let S;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>p.ci.Ks(x,I).next(V=>{S=V;const H=[];for(const z of c){const ge=SC(z,S.get(z.key));null!=ge&&H.push(new Pc(z.key,ge,vv(ge.value.mapValue),_n.exists(!0)))}return p.Bs.addMutationBatch(x,v,H,c)})).then(x=>(x.applyToLocalDocumentSet(S),{batchId:x.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,p){let v=u.ua[u.currentUser.toKey()];v||(v=new Wn(Ut)),v=v.insert(c,p),u.ua[u.currentUser.toKey()]=v}(r,s.batchId,t),yield Wc(r,s.changes),yield ey(r.remoteStore)}catch(s){const u=ny(s,"Failed to persist write");t.reject(u)}}),xT.apply(this,arguments)}function yM(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,_e.Z)(function*(n,e){const t=qe(n);try{const r=yield nM(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.ra.get(u);c&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.Zu=!0:s.modifiedDocuments.size>0?Tt(c.Zu):s.removedDocuments.size>0&&(Tt(c.Zu),c.Zu=!1))}),yield Wc(t,r,e)}catch(r){yield ru(r)}}),NT.apply(this,arguments)}function _M(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ea.forEach((u,c)=>{const p=c.view.Au(e);p.snapshot&&s.push(p.snapshot)}),function(u,c){const p=qe(u);p.onlineState=c;let v=!1;p.queries.forEach((I,S)=>{for(const x of S.listeners)x.Au(c)&&(v=!0)}),v&&DT(p)}(r.eventManager,e),s.length&&r.ta.Qo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function NR(n,e,t){return RT.apply(this,arguments)}function RT(){return RT=(0,_e.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ra.get(e),u=s&&s.key;if(u){let c=new Wn($e.comparator);c=c.insert(u,Rn.newNoDocument(u,It.min()));const p=dn().add(u),v=new yh(It.min(),new Map,new On(Ut),c,p);yield yM(r,v),r.ia=r.ia.remove(u),r.ra.delete(e),UT(r)}else yield Ch(r.localStore,e,!1).then(()=>sy(r,e,t)).catch(ru)}),RT.apply(this,arguments)}function RR(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,_e.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const s=yield YC(t.localStore,e);LT(t,r,null),FT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wc(t,s)}catch(s){yield ru(s)}}),OT.apply(this,arguments)}function OR(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,_e.Z)(function*(n,e,t){const r=qe(n);try{const s=yield function(u,c){const p=qe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return p.Bs.lookupMutationBatch(v,c).next(S=>(Tt(null!==S),I=S.keys(),p.Bs.removeMutationBatch(v,S))).next(()=>p.Bs.performConsistencyCheck(v)).next(()=>p.ci.Ks(v,I))})}(r.localStore,e);LT(r,e,t),FT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wc(r,s)}catch(s){yield ru(s)}}),PT.apply(this,arguments)}function kT(){return kT=(0,_e.Z)(function*(n,e){const t=qe(n);Ah(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const s=t.aa.get(r)||[];s.push(e),t.aa.set(r,s)}catch(r){const s=ny(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),kT.apply(this,arguments)}function FT(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function LT(n,e,t){const r=qe(n);let s=r.ua[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ua[r.currentUser.toKey()]=s}}function sy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||vM(n,r)})}function vM(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(bE(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),UT(n))}function VT(n,e,t){for(const r of t)r instanceof pM?(n.oa.addReference(r.key,e),kR(n,r)):r instanceof gM?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||vM(n,r.key)):nt()}function kR(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.sa.add(r),UT(n))}function UT(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new $e(en.fromString(e)),r=n.ca.next();n.ra.set(r,new TR(t)),n.ia=n.ia.insert(t,r),hI(n.remoteStore,new va(es(fp(t.path)),r,2,ws.A))}}function Wc(n,e,t){return BT.apply(this,arguments)}function BT(){return BT=(0,_e.Z)(function*(n,e,t){const r=qe(n),s=[],u=[],c=[];var p;r.ea.isEmpty()||(r.ea.forEach((p,v)=>{c.push(r.la(v,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,I.fromCache?"not-current":"current"),s.push(I);const S=fE.Ys(v.targetId,I);u.push(S)}}))}),yield Promise.all(c),r.ta.Qo(s),yield(p=(0,_e.Z)(function*(v,I){const S=qe(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>he.forEach(I,V=>he.forEach(V.Hs,H=>S.persistence.referenceDelegate.addReference(x,V.targetId,H)).next(()=>he.forEach(V.Js,H=>S.persistence.referenceDelegate.removeReference(x,V.targetId,H)))))}catch(x){if(!Uc(x))throw x;Pe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const V=x.targetId;if(!x.fromCache){const H=S.ii.get(V),ge=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);S.ii=S.ii.insert(V,ge)}}}),function(v,I){return p.apply(this,arguments)})(r.localStore,u))}),BT.apply(this,arguments)}function FR(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,_e.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield ZC(t.localStore,e);t.currentUser=e,(s=t).aa.forEach(c=>{c.forEach(p=>{p.reject(new xe(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wc(t,r.hi)}var s}),jT.apply(this,arguments)}function LR(n,e){const t=qe(n),r=t.ra.get(e);if(r&&r.Zu)return dn().add(r.key);{let s=dn();const u=t.na.get(e);if(!u)return s;for(const c of u){const p=t.ea.get(c);s=s.unionWith(p.view.Ku)}return s}}function VR(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,_e.Z)(function*(n,e){const t=qe(n),r=yield gE(t.localStore,e.query,!0),s=e.view.Yu(r);return t.isPrimaryClient&&VT(t,e.targetId,s.Hu),s}),$T.apply(this,arguments)}function UR(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,_e.Z)(function*(n,e){const t=qe(n);return eT(t.localStore,e).then(r=>Wc(t,r))}),HT.apply(this,arguments)}function BR(n,e,t,r){return GT.apply(this,arguments)}function GT(){return GT=(0,_e.Z)(function*(n,e,t,r){const s=qe(n),u=yield function(c,p){const v=qe(c),I=qe(v.Bs);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.fn(S,p).next(x=>x?v.ci.Ks(S,x):he.resolve(null)))}(s.localStore,e);var p;null!==u?("pending"===t?yield ey(s.remoteStore):"acknowledged"===t||"rejected"===t?(LT(s,e,r||null),FT(s,e),p=e,qe(qe(s.localStore).Bs)._n(p)):nt(),yield Wc(s,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),GT.apply(this,arguments)}function qT(){return qT=(0,_e.Z)(function*(n,e){const t=qe(n);if(ZT(t),YT(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield EM(t,r.toArray());t.ha=!0,yield yT(t.remoteStore,!0);for(const u of s)hI(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let s=Promise.resolve();t.na.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(sy(t,c),Ch(t.localStore,c,!0))),bE(t.remoteStore,c)}),yield s,yield EM(t,r),function(u){const c=qe(u);c.ra.forEach((p,v)=>{bE(c.remoteStore,v)}),c.oa.bi(),c.ra=new Map,c.ia=new Wn($e.comparator)}(t),t.ha=!1,yield yT(t.remoteStore,!1)}}),qT.apply(this,arguments)}function EM(n,e,t){return zT.apply(this,arguments)}function zT(){return zT=(0,_e.Z)(function*(n,e,t){const r=qe(n),s=[],u=[];for(const c of e){let p;const v=r.na.get(c);if(v&&0!==v.length){p=yield Sp(r.localStore,es(v[0]));for(const I of v){const S=r.ea.get(I),x=yield VR(r,S);x.snapshot&&u.push(x.snapshot)}}else{const I=yield XC(r.localStore,c);p=yield Sp(r.localStore,I),yield AT(r,wM(I),c,!1)}s.push(p)}return r.ta.Qo(u),s}),zT.apply(this,arguments)}function wM(n){return Nc(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $R(n){const e=qe(n);return qe(qe(e.localStore).persistence).Fs()}function HR(n,e,t,r){return WT.apply(this,arguments)}function WT(){return WT=(0,_e.Z)(function*(n,e,t,r){const s=qe(n);if(s.ha)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=s.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield eT(s.localStore,lb(u[0])),p=yh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Wc(s,c,p);break}case"rejected":yield Ch(s.localStore,e,!0),sy(s,e,r);break;default:nt()}}),WT.apply(this,arguments)}function GR(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,_e.Z)(function*(n,e,t){const r=ZT(n);if(r.ha){for(const s of e){if(r.na.has(s)){Pe("SyncEngine","Adding an already active target "+s);continue}const u=yield XC(r.localStore,s),c=yield Sp(r.localStore,u);yield AT(r,wM(u),c.targetId,!1),hI(r.remoteStore,c)}for(const s of t)r.na.has(s)&&(yield Ch(r.localStore,s,!1).then(()=>{bE(r.remoteStore,s),sy(r,s)}).catch(ru))}}),KT.apply(this,arguments)}function ZT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NR.bind(null,e),e.ta.Qo=wR.bind(null,e.eventManager),e.ta.fa=bR.bind(null,e.eventManager),e}function YT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OR.bind(null,e),e}class bM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=EE(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return KC(this.persistence,new cI,e.initialUser,this.M)}wa(e){return new K(Oe.zi,this.M)}_a(e){return new Ym}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class IM extends bM{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield YT(r.ya.syncEngine),yield ey(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return KC(this.persistence,new cI,e.initialUser,this.M)}ma(e){return new Wm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Zm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?bs.withCacheSize(this.cacheSizeBytes):bs.DEFAULT;return new Km(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Jm(),Th(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new Ym}}class zR extends IM{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const s=r.ya.syncEngine;r.sharedClientState instanceof Mp&&(r.sharedClientState.syncEngine={Mr:BR.bind(null,s),Or:HR.bind(null,s),Fr:GR.bind(null,s),Fs:$R.bind(null,s),kr:UR.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,_e.Z)(function*(c){yield function jR(n,e){return qT.apply(this,arguments)}(r.ya.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}_a(e){const t=Jm();if(!Mp.vt(t))throw new xe(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Zm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class QT{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>_M(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=FR.bind(null,r.syncEngine),yield yT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ER}createDatastore(e){const t=EE(e.databaseInfo.databaseId),r=new vE(e.databaseInfo);return new aR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=p=>_M(this.syncEngine,p,0),c=Qm.vt()?new Qm:new mE,new lR(t,r,s,u,c);var t,r,s,u,c}createSyncEngine(e,t){return function(r,s,u,c,p,v,I){const S=new AR(r,s,u,c,p,v);return I&&(S.ha=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=qe(t);Pe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield Xm(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function DM(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class pI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class WR{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new xr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),s=Number(r);isNaN(s)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(s);return new IR(JSON.parse(u),t.length+s)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,_e.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class KR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,_e.Z)(function*(u,c){const p=qe(u),v=vh(p.M)+"/documents",I={documents:c.map(H=>Lc(p.M,H))},S=yield p.ho("BatchGetDocuments",v,I),x=new Map;S.forEach(H=>{const z=function Lv(n,e){return"found"in e?function(t,r){Tt(!!r.found);const s=tu(t,r.found.name),u=Rr(r.found.updateTime),c=new vi({mapValue:{fields:r.found.fields}});return Rn.newFoundDocument(s,u,c)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const s=tu(t,r.missing),u=Rr(r.readTime);return Rn.newNoDocument(s,u)}(n,e):nt()}(p.M,H);x.set(z.key.toString(),z)});const V=[];return c.forEach(H=>{const z=x.get(H.toString());Tt(!!z),V.push(z)}),V}),function(u,c){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new kc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=$e.fromPath(s);e.mutations.push(new Om(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(s,u){const c=qe(s),p=vh(c.M)+"/documents",v={writes:u.map(I=>Um(c.M,I))};yield c.oo("Commit",p,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?_n.updateTime(t):_n.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new xe(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _n.updateTime(t)}return _n.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ZR{constructor(e,t,r,s){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=s,this.Sa=5,this.Do=new tT(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,_e.Z)(function*(){const t=new KR(e.datastore),r=e.Ca(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.xa(u)}))}).catch(s=>{e.xa(s)})}))}Ca(e){try{const t=this.updateFunction(e);return!Cc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Pm(t)}return!1}}class YR{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=ri.UNAUTHENTICATED,this.clientId=ah.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,_e.Z)(function*(p){Pe("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=ny(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function CM(n,e){return JT.apply(this,arguments)}function JT(){return JT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,_e.Z)(function*(u){r.isEqual(u)||(yield ZC(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),JT.apply(this,arguments)}function TM(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield eA(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>cM(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>cM(e.remoteStore,u)),n.onlineComponents=e}),XT.apply(this,arguments)}function eA(n){return tA.apply(this,arguments)}function tA(){return tA=(0,_e.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield CM(n,new bM)),n.offlineComponents}),tA.apply(this,arguments)}function gI(n){return nA.apply(this,arguments)}function nA(){return nA=(0,_e.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield TM(n,new QT)),n.onlineComponents}),nA.apply(this,arguments)}function AM(n){return eA(n).then(e=>e.persistence)}function rA(n){return eA(n).then(e=>e.localStore)}function SM(n){return gI(n).then(e=>e.remoteStore)}function iA(n){return gI(n).then(e=>e.syncEngine)}function oy(n){return sA.apply(this,arguments)}function sA(){return sA=(0,_e.Z)(function*(n){const e=yield gI(n),t=e.eventManager;return t.onListen=SR.bind(null,e.syncEngine),t.onUnlisten=MR.bind(null,e.syncEngine),t}),sA.apply(this,arguments)}function MM(n,e,t={}){const r=new xr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(s,u,c,p,v){const I=new pI({next:x=>{u.enqueueAndForget(()=>bT(s,S));const V=x.docs.has(c);!V&&x.fromCache?v.reject(new xe(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&x.fromCache&&p&&"server"===p.source?v.reject(new xe(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new CT(fp(c.path),I,{includeMetadataChanges:!0,Cu:!0});return ET(s,S)}(yield oy(n),n.asyncQueue,e,t,r)})),r.promise}function xM(n,e,t={}){const r=new xr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(s,u,c,p,v){const I=new pI({next:x=>{u.enqueueAndForget(()=>bT(s,S)),x.fromCache&&"server"===p.source?v.reject(new xe(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new CT(c,I,{includeMetadataChanges:!0,Cu:!0});return ET(s,S)}(yield oy(n),n.asyncQueue,e,t,r)})),r.promise}const NM=new Map;function oA(n,e,t){if(!t)throw new xe(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RM(n,e,t,r){if(!0===e&&!0===r)throw new xe(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function OM(n){if(!$e.isDocumentKey(n))throw new xe(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PM(n){if($e.isDocumentKey(n))throw new xe(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mI(n);throw new xe(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kM(n,e){if(e<=0)throw new xe(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class FM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,RM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class IE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FM({}),this._settingsFrozen=!1,e instanceof ko?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new xe(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(s.options.projectId)}(e))}get app(){if(!this._app)throw new xe(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new fC;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new BS(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=NM.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),NM.delete(e),t.terminate())}(this),Promise.resolve()}}class Kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}}class ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class hl extends ns{constructor(e,t,r){super(e,t,fp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new $e(e))}withConverter(e){return new hl(this.firestore,e,this._path)}}function LM(n,e,...t){if(n=(0,Yt.m9)(n),oA("collection","path",e),n instanceof IE){const r=en.fromString(e,...t);return PM(r),new hl(n,null,r)}{if(!(n instanceof Kn||n instanceof hl))throw new xe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return PM(r),new hl(n.firestore,null,r)}}function yI(n,e,...t){if(n=(0,Yt.m9)(n),1===arguments.length&&(e=ah.R()),oA("doc","path",e),n instanceof IE){const r=en.fromString(e,...t);return OM(r),new Kn(n,null,new $e(r))}{if(!(n instanceof Kn||n instanceof hl))throw new xe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return OM(r),new Kn(n.firestore,n instanceof hl?n.converter:null,new $e(r))}}function VM(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),(n instanceof Kn||n instanceof hl)&&(e instanceof Kn||e instanceof hl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function UM(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),n instanceof ns&&e instanceof ns&&n.firestore===e.firestore&&gp(n._query,e._query)&&n.converter===e.converter}class aO{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new tT(this,"async_queue_retry"),this.qa=()=>{const t=Th();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Th();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Th();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new xr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Uc(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Bn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const s=vT.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(s),s}Ka(){this.$a&&nt()}verifyOperationInProgress(){}Wa(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function aA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class uO{constructor(){this._progressObserver={},this._taskCompletionResolver=new xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class er extends IE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new aO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||BM(this),this._firestoreClient.terminate()}}function Hr(n){return n._firestoreClient||BM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function BM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new mC(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new YR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function jM(n,e,t){const r=new xr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield CM(n,t),yield TM(n,e),r.resolve()}catch(s){if(!("FirebaseError"===(u=s).name?u.code===ae.FAILED_PRECONDITION||u.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function $M(n){if(n._initialized||n._terminated)throw new xe(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fl(_r.fromBase64String(e))}catch(t){throw new xe(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fl(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xp{constructor(e){this._methodName=e}}class _I{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const _O=/^__.*__$/;class vO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Pc(e,this.data,this.fieldMask,t,this.fieldTransforms):new ul(e,this.data,t,this.fieldTransforms)}}class HM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class vI{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=s,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new vI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Za({path:r,ec:!1});return s.nc(e),s}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Za({path:r,ec:!1});return s.Ya(),s}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return bI(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(GM(this.Xa)&&_O.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class EO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||EE(e)}ac(e,t,r,s=!1){return new vI({Xa:e,methodName:t,uc:r,path:Br.emptyPath(),ec:!1,oc:s},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Np(n){const e=n._freezeSettings(),t=EE(n._databaseId);return new EO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function EI(n,e,t,r,s,u={}){const c=n.ac(u.merge||u.mergeFields?2:0,e,t,s);dA("Data must be an object, but it was:",c,r);const p=WM(r,c);let v,I;if(u.merge)v=new Dc(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const V=hA(e,x,t);if(!c.contains(V))throw new xe(ae.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);ZM(S,V)||S.push(V)}v=new Dc(S),I=c.fieldTransforms.filter(x=>v.covers(x.field))}else v=null,I=c.fieldTransforms;return new vO(new vi(p),v,I)}class DE extends xp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof DE}}function qM(n,e,t){return new vI({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class uA extends xp{_toFieldTransform(e){return new Xa(e.path,new Oc)}isEqual(e){return e instanceof uA}}class wO extends xp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=qM(this,e,!0),r=this.cc.map(u=>Rp(u,t)),s=new ol(r);return new Xa(e.path,s)}isEqual(e){return this===e}}class bO extends xp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=qM(this,e,!0),r=this.cc.map(u=>Rp(u,t)),s=new al(r);return new Xa(e.path,s)}isEqual(e){return this===e}}class IO extends xp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new hh(e.M,dh(e.M,this.hc));return new Xa(e.path,t)}isEqual(e){return this===e}}function lA(n,e,t,r){const s=n.ac(1,e,t);dA("Data must be an object, but it was:",s,r);const u=[],c=vi.empty();Ic(r,(v,I)=>{const S=wI(e,v,t);I=(0,Yt.m9)(I);const x=s.sc(S);if(I instanceof DE)u.push(S);else{const V=Rp(I,x);null!=V&&(u.push(S),c.set(S,V))}});const p=new Dc(u);return new HM(c,p,s.fieldTransforms)}function cA(n,e,t,r,s,u){const c=n.ac(1,e,t),p=[hA(e,r,t)],v=[s];if(u.length%2!=0)throw new xe(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)p.push(hA(e,u[V])),v.push(u[V+1]);const I=[],S=vi.empty();for(let V=p.length-1;V>=0;--V)if(!ZM(I,p[V])){const H=p[V];let z=v[V];z=(0,Yt.m9)(z);const ge=c.sc(H);if(z instanceof DE)I.push(H);else{const ke=Rp(z,ge);null!=ke&&(I.push(H),S.set(H,ke))}}const x=new Dc(I);return new HM(S,x,c.fieldTransforms)}function zM(n,e,t,r=!1){return Rp(t,n.ac(r?4:3,e))}function Rp(n,e){if(KM(n=(0,Yt.m9)(n)))return dA("Unsupported field value:",e,n),WM(n,e);if(n instanceof xp)return function(t,r){if(!GM(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const c of t){let p=Rp(c,r.ic(u));null==p&&(p={nullValue:"NULL_VALUE"}),s.push(p),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Yt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dh(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=ar.fromDate(t);return{timestampValue:Ep(r.M,s)}}if(t instanceof ar){const s=new ar(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ep(r.M,s)}}if(t instanceof _I)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fl)return{bytesValue:xb(r.M,t._byteString)};if(t instanceof Kn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Lm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${mI(t)}`)}(n,e)}function WM(n,e){const t={};return Kw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ic(n,(r,s)=>{const u=Rp(s,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function KM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ar||n instanceof _I||n instanceof fl||n instanceof Kn||n instanceof xp)}function dA(n,e,t){if(!KM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=mI(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function hA(n,e,t){if((e=(0,Yt.m9)(e))instanceof Kc)return e._internalPath;if("string"==typeof e)return wI(n,e);throw bI("Field path arguments must be of type string or ",n,!1,void 0,t)}const DO=new RegExp("[~\\*/\\[\\]]");function wI(n,e,t){if(e.search(DO)>=0)throw bI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kc(...e.split("."))._internalPath}catch(r){throw bI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bI(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(u||c)&&(v+=" (found",u&&(v+=` in field ${r}`),c&&(v+=` in document ${s}`),v+=")"),new xe(ae.INVALID_ARGUMENT,p+n+v)}function ZM(n,e){return n.some(t=>t.isEqual(e))}class CE{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new CO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(II("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class CO extends CE{data(){return super.data()}}function II(n,e){return"string"==typeof e?wI(n,e):e instanceof Kc?e._internalPath:e._delegate._internalPath}class Op{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zc extends CE{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new TE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(II("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class TE extends Zc{data(e={}){return super.data(e)}}class Mh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Op(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new TE(this._firestore,this._userDataWriter,r.key,r,new Op(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new TE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Op(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||3!==c.type).map(c=>{const p=new TE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Op(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,I=-1;return 0!==c.type&&(v=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:TO(c.type),doc:p,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function TO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function YM(n,e){return n instanceof Zc&&e instanceof Zc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Mh&&e instanceof Mh&&n._firestore===e._firestore&&UM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function QM(n){if(xm(n)&&0===n.explicitOrderBy.length)throw new xe(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AE{}function xh(n,...e){for(const t of e)n=t._apply(n);return n}class AO extends AE{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=Np(e.firestore),r=function(s,u,c,p,v,I,S){let x;if(v.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){rx(S,I);const H=[];for(const z of S)H.push(nx(p,s,z));x={arrayValue:{values:H}}}else x=nx(p,s,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||rx(S,I),x=zM(c,"where",S,"in"===I||"not-in"===I);const V=Nr.create(v,I,x);return function(H,z){if(z.S()){const ke=Nm(H);if(null!==ke&&!ke.isEqual(z.field))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ke.toString()}' and '${z.field.toString()}'`);const ft=sb(H);null!==ft&&ix(0,z.field,ft)}const ge=function(ke,ft){for(const gt of ke.filters)if(ft.indexOf(gt.op)>=0)return gt.op;return null}(H,function(ke){switch(ke){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ge)throw new xe(ae.INVALID_ARGUMENT,ge===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ge.toString()}' filters.`)}(s,V),V}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new ns(e.firestore,e.converter,function(s,u){const c=s.filters.concat([u]);return new ya(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class MO extends AE{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new hp(s,u);return function(p,v){if(null===sb(p)){const I=Nm(p);null!==I&&ix(0,I,v.field)}}(r,c),c}(e._query,this.lc,this._c);return new ns(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new ya(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class JM extends AE{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new ns(e.firestore,e.converter,ab(e._query,this.wc,this.mc))}}class XM extends AE{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=tx(e,this.type,this.gc,this.yc);return new ns(e.firestore,e.converter,(s=t,new ya((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class ex extends AE{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=tx(e,this.type,this.gc,this.yc);return new ns(e.firestore,e.converter,(s=t,new ya((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function tx(n,e,t,r){if(t[0]=(0,Yt.m9)(t[0]),t[0]instanceof CE)return function(s,u,c,p,v){if(!p)throw new xe(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const S of Rc(s))if(S.field.isKeyField())I.push(Sc(u,p.key));else{const x=p.data.field(S.field);if(Dm(x))throw new xe(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const V=S.field.canonicalString();throw new xe(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}I.push(x)}return new sl(I,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Np(n.firestore);return function(u,c,p,v,I,S){const x=u.explicitOrderBy;if(I.length>x.length)throw new xe(ae.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let H=0;H<I.length;H++){const z=I[H];if(x[H].field.isKeyField()){if("string"!=typeof z)throw new xe(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof z}`);if(!ob(u)&&-1!==z.indexOf("/"))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${z}' contains a slash.`);const ge=u.path.child(en.fromString(z));if(!$e.isDocumentKey(ge))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${ge}' is not because it contains an odd number of segments.`);const ke=new $e(ge);V.push(Sc(c,ke))}else{const ge=zM(p,v,z);V.push(ge)}}return new sl(V,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function nx(n,e,t){if("string"==typeof(t=(0,Yt.m9)(t))){if(""===t)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ob(e)&&-1!==t.indexOf("/"))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(en.fromString(t));if(!$e.isDocumentKey(r))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sc(n,new $e(r))}if(t instanceof Kn)return Sc(n,t._key);throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mI(t)}.`)}function rx(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ix(n,e,t){if(!t.isEqual(e))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fA{convertValue(e,t="none"){switch(Tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Ic(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new _I(Xn(e.latitude),Xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){const t=ga(e);return new ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=en.fromString(e);Tt(Hv(r));const s=new ko(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return s.isEqual(t)||Bn(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function DI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class LO extends fA{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}class sx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Np(e)}set(e,t,r){this._verifyNotCommitted();const s=Nh(e,this._firestore),u=DI(s.converter,t,r),c=EI(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,_n.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Nh(e,this._firestore);let c;return c="string"==typeof(t=(0,Yt.m9)(t))||t instanceof Kc?cA(this._dataReader,"WriteBatch.update",u._key,t,r,s):lA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nh(e,this._firestore);return this._mutations=this._mutations.concat(new kc(t._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nh(n,e){if((n=(0,Yt.m9)(n)).firestore!==e)throw new xe(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pp extends fA{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}function ox(n,e,t){n=on(n,Kn);const r=on(n.firestore,er),s=DI(n.converter,e,t);return ay(r,[EI(Np(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,_n.none())])}function ax(n,e,t,...r){n=on(n,Kn);const s=on(n.firestore,er),u=Np(s);let c;return c="string"==typeof(e=(0,Yt.m9)(e))||e instanceof Kc?cA(u,"updateDoc",n._key,e,t,r):lA(u,"updateDoc",n._key,e),ay(s,[c.toMutation(n._key,_n.exists(!0))])}function ux(n,...e){var t,r,s;n=(0,Yt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||aA(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(aA(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(s=x.complete)||void 0===s?void 0:s.bind(x)}let v,I,S;if(n instanceof Kn)I=on(n.firestore,er),S=fp(n._key.path),v={next:x=>{e[c]&&e[c](pA(I,n,x))},error:e[c+1],complete:e[c+2]};else{const x=on(n,ns);I=on(x.firestore,er),S=x._query;const V=new Pp(I);v={next:H=>{e[c]&&e[c](new Mh(I,V,x,H))},error:e[c+1],complete:e[c+2]},QM(n._query)}return function(x,V,H,z){const ge=new pI(z),ke=new CT(V,ge,H);return x.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return ET(yield oy(x),ke)})),()=>{ge.Ia(),x.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return bT(yield oy(x),ke)}))}}(Hr(I),S,p,v)}function ay(n,e){return function(t,r){const s=new xr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function xR(n,e,t){return xT.apply(this,arguments)}(yield iA(t),r,s)})),s.promise}(Hr(n),e)}function pA(n,e,t){const r=t.docs.get(e._key),s=new Pp(n);return new Zc(n,s,e._key,r,new Op(t.hasPendingWrites,t.fromCache),e.converter)}class WO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Np(e)}get(e){const t=Nh(e,this._firestore),r=new LO(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return nt();const u=s[0];if(u.isFoundDocument())return new CE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new CE(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const s=Nh(e,this._firestore),u=DI(s.converter,t,r),c=EI(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,c),this}update(e,t,r,...s){const u=Nh(e,this._firestore);let c;return c="string"==typeof(t=(0,Yt.m9)(t))||t instanceof Kc?cA(this._dataReader,"Transaction.update",u._key,t,r,s):lA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Nh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nh(e,this._firestore),r=new Pp(this._firestore);return super.get(e).then(s=>new Zc(this._firestore,r,t._key,s._document,new Op(!1,!1),t.converter))}}function gA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function cx(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function dx(){if(!function pC(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ya=qu.SDK_VERSION,(0,qu._registerComponent)(new C_.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),u=new er(s,new VS(t.getProvider("auth-internal")),new Im(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,qu.registerVersion)($w,"3.4.8",n),(0,qu.registerVersion)($w,"3.4.8","esm2017")}();class SE{constructor(e){this._delegate=e}static fromBase64String(e){return dx(),new SE(fl.fromBase64String(e))}static fromUint8Array(e){return cx(),new SE(fl.fromUint8Array(e))}toBase64(){return dx(),this._delegate.toBase64()}toUint8Array(){return cx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mA(n){return function nP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rP{enableIndexedDbPersistence(e,t){return function cO(n,e){$M(n=on(n,er));const t=Hr(n),r=n._freezeSettings(),s=new QT;return jM(t,s,new IM(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dO(n){$M(n=on(n,er));const e=Hr(n),t=n._freezeSettings(),r=new QT;return jM(e,r,new zR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hO(n){if(n._initialized&&!n._terminated)throw new xe(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!_a.vt())return Promise.resolve();const s=r+"main";yield _a.delete(s)}),function(r){return t.apply(this,arguments)})(Zm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class hx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ko||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ja("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function sO(n,e,t,r={}){var s;const u=(n=on(n,IE))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ja("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=ri.MOCK_USER;else{c=(0,Yt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new xe(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ri(v)}n._authCredentials=new LS(new qw(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function pO(n){return function QR(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield AM(n),t=yield SM(n);return e.setNetworkEnabled(!0),function(r){const s=qe(r);return s.fu.delete(0),wE(s)}(t)}))}(Hr(n=on(n,er)))}(this._delegate)}disableNetwork(){return function gO(n){return function JR(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield AM(n),t=yield SM(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(s){const u=qe(s);u.fu.add(0),yield Xm(u),u.wu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Hr(n=on(n,er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,RM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fO(n){return function(e){const t=new xr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function PR(n,e){return kT.apply(this,arguments)}(yield iA(e),t)})),t.promise}(Hr(n=on(n,er)))}(this._delegate)}onSnapshotsInSync(e){return function zO(n,e){return function tO(n,e){const t=new pI(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield oy(n),s=t,qe(r).Eu.add(s),void s.next();var r,s})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield oy(n),s=t,void qe(r).Eu.delete(s);var r,s}))}}(Hr(n=on(n,er)),aA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new uy(this,LM(this._delegate,e))}catch(t){throw Is(t,"collection()","Firestore.collection()")}}doc(e){try{return new ba(this,yI(this._delegate,e))}catch(t){throw Is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ds(this,function oO(n,e){if(n=on(n,IE),oA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ns(n,null,(t=e,new ya(en.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function KO(n,e){return function nO(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const r=yield(s=n,gI(s).then(u=>u.datastore));var s;new ZR(n.asyncQueue,r,e,t).run()})),t.promise}(Hr(n=on(n,er)),t=>e(new WO(n,t)))}(this._delegate,t=>e(new fx(this,t)))}batch(){return Hr(this._delegate),new px(new sx(this._delegate,e=>ay(this._delegate,e)))}loadBundle(e){return function mO(n,e){const t=Hr(n=on(n,er)),r=new uO;return function rO(n,e,t,r){const s=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,I){if(v instanceof Uint8Array)return DM(v,I);if(v instanceof ArrayBuffer)return DM(new Uint8Array(v),I);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new WR(v,c);var v}(t,EE(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function qR(n,e,t){const r=qe(n);var s;(s=(0,_e.Z)(function*(u,c,p){try{const v=yield c.getMetadata();if(yield function(V,H){const z=qe(V),ge=Rr(H.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",ke=>z._s.getBundleMetadata(ke,H.id)).then(ke=>!!ke&&ke.createTime.compareTo(ge)>=0)}(u.localStore,v))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(V=v).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);p._updateProgress(fM(v));const I=new DR(v,u.localStore,c.M);let S=yield c.da();for(;S;){const V=yield I.ku(S);V&&p._updateProgress(V),S=yield c.da()}const x=yield I.complete();return yield Wc(u,x.Fu,void 0),yield function(V,H){const z=qe(V);return z.persistence.runTransaction("Save bundle","readwrite",ge=>z._s.saveBundleMetadata(ge,H))}(u.localStore,v),p._completeWith(x.progress),Promise.resolve(x.Ou)}catch(v){return Ja("SyncEngine",`Loading bundle failed with ${v}`),p._failWith(v),Promise.resolve(new Set)}var V}),function(u,c,p){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield iA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function yO(n,e){return function iO(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const s=qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s._s.getNamedQuery(u,r))}(yield rA(n),e)}))}(Hr(n=on(n,er)),e).then(t=>t?new ns(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ds(this,t):null)}}class CI extends fA{constructor(e){super(),this.firestore=e}convertBytes(e){return new SE(new fl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ba.forKey(t,this.firestore,null)}}class fx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new CI(e)}get(e){const t=Fp(e);return this._delegate.get(t).then(r=>new ME(this._firestore,new Zc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Fp(e);return r?(gA("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Fp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Fp(e);return this._delegate.delete(t),this}}class px{constructor(e){this._delegate=e}set(e,t,r){const s=Fp(e);return r?(gA("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Fp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Fp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class kp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new TE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=kp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new kp(e,new CI(e),t),s.set(t,u)),u}}kp.INSTANCES=new WeakMap;class ba{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ba(t,new Kn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new ba(t,new Kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new uy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uy(this.firestore,LM(this._delegate,e))}catch(t){throw Is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Yt.m9)(e))instanceof Kn&&VM(this._delegate,e)}set(e,t){t=gA("DocumentReference.set",t);try{return t?ox(this._delegate,e,t):ox(this._delegate,e)}catch(r){throw Is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ax(this._delegate,e):ax(this._delegate,e,t,...r)}catch(s){throw Is(s,"updateDoc()","DocumentReference.update()")}}delete(){return function GO(n){return ay(on(n.firestore,er),[new kc(n._key,_n.none())])}(this._delegate)}onSnapshot(...e){const t=gx(e),r=mx(e,s=>new ME(this.firestore,new Zc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return ux(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function UO(n){n=on(n,Kn);const e=on(n.firestore,er),t=Hr(e),r=new Pp(e);return function XR(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(s,u,c){try{const p=yield function(v,I){const S=qe(v);return S.persistence.runTransaction("read document","readonly",x=>S.ci.Ls(x,I))}(s,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new xe(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const v=ny(p,`Failed to get document '${u} from cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield rA(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Zc(e,r,n._key,s,new Op(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function BO(n){n=on(n,Kn);const e=on(n.firestore,er);return MM(Hr(e),n._key,{source:"server"}).then(t=>pA(e,n,t))}(this._delegate):function VO(n){n=on(n,Kn);const e=on(n.firestore,er);return MM(Hr(e),n._key).then(t=>pA(e,n,t))}(this._delegate),t.then(r=>new ME(this.firestore,new Zc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ba(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}function Is(n,e,t){return n.message=n.message.replace(e,t),n}function gx(n){for(const e of n)if("object"==typeof e&&!mA(e))return e;return{}}function mx(n,e){var t,r;let s;return s=mA(n[0])?n[0]:mA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class ME{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ba(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return YM(this._delegate,e._delegate)}}class xE extends ME{data(e){const t=this._delegate.data(e);return function Gw(n,e){n||nt()}(void 0!==t),t}}class Ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CI(e)}where(e,t,r){try{return new Ds(this.firestore,xh(this._delegate,function SO(n,e,t){const r=e,s=II("where",n);return new AO(s,r,t)}(e,t,r)))}catch(s){throw Is(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ds(this.firestore,xh(this._delegate,function xO(n,e="asc"){const t=e,r=II("orderBy",n);return new MO(r,t)}(e,t)))}catch(r){throw Is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ds(this.firestore,xh(this._delegate,function NO(n){return kM("limit",n),new JM("limit",n,"F")}(e)))}catch(t){throw Is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ds(this.firestore,xh(this._delegate,function RO(n){return kM("limitToLast",n),new JM("limitToLast",n,"L")}(e)))}catch(t){throw Is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ds(this.firestore,xh(this._delegate,function OO(...n){return new XM("startAt",n,!0)}(...e)))}catch(t){throw Is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ds(this.firestore,xh(this._delegate,function PO(...n){return new XM("startAfter",n,!1)}(...e)))}catch(t){throw Is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ds(this.firestore,xh(this._delegate,function kO(...n){return new ex("endBefore",n,!1)}(...e)))}catch(t){throw Is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ds(this.firestore,xh(this._delegate,function FO(...n){return new ex("endAt",n,!0)}(...e)))}catch(t){throw Is(t,"endAt()","Query.endAt()")}}isEqual(e){return UM(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function $O(n){n=on(n,ns);const e=on(n.firestore,er),t=Hr(e),r=new Pp(e);return function eO(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(s,u,c){try{const p=yield gE(s,u,!0),v=new mM(u,p.li),I=v.Gu(p.documents),S=v.applyChanges(I,!1);c.resolve(S.snapshot)}catch(p){const v=ny(p,`Failed to execute query '${u} against cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield rA(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Mh(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function HO(n){n=on(n,ns);const e=on(n.firestore,er),t=Hr(e),r=new Pp(e);return xM(t,n._query,{source:"server"}).then(s=>new Mh(e,r,n,s))}(this._delegate):function jO(n){n=on(n,ns);const e=on(n.firestore,er),t=Hr(e),r=new Pp(e);return QM(n._query),xM(t,n._query).then(s=>new Mh(e,r,n,s))}(this._delegate),t.then(r=>new yA(this.firestore,new Mh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=gx(e),r=mx(e,s=>new yA(this.firestore,new Mh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return ux(this._delegate,t,r)}withConverter(e){return new Ds(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}class sP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new xE(this._firestore,r))})}isEqual(e){return YM(this._delegate,e._delegate)}}class uy extends Ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ba(this.firestore,e):null}doc(e){try{return new ba(this.firestore,void 0===e?yI(this._delegate):yI(this._delegate,e))}catch(t){throw Is(t,"doc()","CollectionReference.doc()")}}add(e){return function qO(n,e){const t=on(n.firestore,er),r=yI(n),s=DI(n.converter,e);return ay(t,[EI(Np(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,_n.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ba(this.firestore,t))}isEqual(e){return VM(this._delegate,e._delegate)}withConverter(e){return new uy(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}function Fp(n){return on(n,Kn)}class _A{constructor(...e){this._delegate=new Kc(...e)}static documentId(){return new _A(Br.keyField().canonicalString())}isEqual(e){return(e=(0,Yt.m9)(e))instanceof Kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function YO(){return new uA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lp(e)}static delete(){const e=function ZO(){return new DE("deleteField")}();return e._methodName="FieldValue.delete",new Lp(e)}static arrayUnion(...e){const t=function QO(...n){return new wO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lp(t)}static arrayRemove(...e){const t=function JO(...n){return new bO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lp(t)}static increment(e){const t=function XO(n){return new IO("increment",n)}(e);return t._methodName="FieldValue.increment",new Lp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oP={Firestore:hx,GeoPoint:_I,Timestamp:ar,Blob:SE,Transaction:fx,WriteBatch:px,DocumentReference:ba,DocumentSnapshot:ME,Query:Ds,QueryDocumentSnapshot:xE,QuerySnapshot:yA,CollectionReference:uy,FieldPath:_A,FieldValue:Lp,setLogLevel:function iP(n){!function Hw(n){Qa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function uP(n){(function aP(n,e){n.INTERNAL.registerComponent(new C_.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},oP)))})(n,(e,t)=>new hx(e,t,new rP)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(AD.Z);var lP=P(6451),TI=P(5363),cP=P(6063);class dP extends mr.x{constructor(e=1/0,t=1/0,r=cP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let p=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)p=v;p&&r.splice(0,p+1)}}}var hP=P(3099);function yx(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,hP.B)({connector:()=>new dP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function _x(n,e){return(0,ka.m)(e)?Vn(()=>n,e):Vn(()=>n)}var vA=P(9468);P(5867);const Ex=new Map,yP={activated:!1,tokenObservers:[]},_P={initialized:!1,enabled:!1};function Ei(n){return Ex.get(n)||yP}function su(n,e){Ex.set(n,e)}function SI(){return _P}class IP{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Yt.BH,yield function DP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Yt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Cs=new Yt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bx(n){if(!Ei(n).activated)throw Cs.create("use-before-activation",{appName:n.name})}function IA(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const x=yield s.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(x){throw Cs.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw Cs.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(x){throw Cs.create("fetch-parse-error",{originalErrorMessage:x.message})}const v=p.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Cs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const I=1e3*Number(v[1]),S=Date.now();return{token:p.attestationToken,expireTimeMillis:S+I,issuedAtTimeMillis:S}}),DA.apply(this,arguments)}function MP(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const NE="firebase-app-check-store";let NI=null;function Dx(){return NI||(NI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(Cs.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(NE,{keyPath:"compositeKey"})}}catch(t){e(Cs.create("storage-open",{originalErrorMessage:t.message}))}}),NI)}function CA(){return CA=(0,_e.Z)(function*(n,e){const r=(yield Dx()).transaction(NE,"readwrite"),u=r.objectStore(NE).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=v=>{c()},r.onerror=v=>{var I;p(Cs.create("storage-set",{originalErrorMessage:null===(I=v.target.error)||void 0===I?void 0:I.message}))}})}),CA.apply(this,arguments)}const RE=new Ur.Yd("@firebase/app-check");function Sx(n,e){return(0,Yt.hl)()?function OP(n,e){return function Cx(n,e){return CA.apply(this,arguments)}(function Ax(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{RE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Mx(){return SI().enabled}function xx(){return MA.apply(this,arguments)}function MA(){return MA=(0,_e.Z)(function*(){const n=SI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),MA.apply(this,arguments)}const UP={error:"UNKNOWN_ERROR"};function BP(n){return Yt.US.encodeString(JSON.stringify(n),!1)}function RI(n){return xA.apply(this,arguments)}function xA(){return xA=(0,_e.Z)(function*(n,e=!1){const t=n.app;bx(t);const r=Ei(t);let u,s=r.token;if(!s){const v=yield r.cachedTokenPromise;v&&OI(v)&&(s=v)}if(!e&&s&&OI(s))return{token:s.token};let p,c=!1;if(Mx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=IA(MP(t,yield xx()),n.heartbeatServiceProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),c=!0);const v=yield r.exchangeTokenPromise;return yield Sx(t,v),su(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0),s=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?RE.warn(v.message):RE.error(v),u=v}return s?(p={token:s.token},su(t,Object.assign(Object.assign({},r),{token:s})),yield Sx(t,s)):p=$P(u),c&&Rx(t,p),p}),xA.apply(this,arguments)}function RA(n,e){const t=Ei(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),su(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Nx(n){const{app:e}=n,t=Ei(e);let r=t.tokenRefresher;r||(r=function jP(n){const{app:e}=n;return new IP((0,_e.Z)(function*(){let r;if(r=Ei(e).token?yield RI(n,!0):yield RI(n),r.error)throw r.error}),()=>!0,()=>{const t=Ei(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),su(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Rx(n,e){const t=Ei(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(s){}}function OI(n){return n.expireTimeMillis-Date.now()>0}function $P(n){return{token:BP(UP),error:n}}class HP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ei(this.app);for(const t of e)RA(this.app,t.next);return Promise.resolve()}}const Bx="app-check-internal";!function rk(){(0,qu._registerComponent)(new C_.wA("app-check",n=>function GP(n,e){return new HP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Bx).initialize()})),(0,qu._registerComponent)(new C_.wA(Bx,n=>function qP(n){return{getToken:e=>RI(n,e),addTokenListener:e=>function NA(n,e,t,r){const{app:s}=n,u=Ei(s),c={next:t,error:r,type:e};if(su(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&OI(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),Nx(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Nx(n))}(n,"INTERNAL",e),removeTokenListener:e=>RA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qu.registerVersion)("@firebase/app-check","0.5.6")}();class FA{constructor(){return(0,Vr.vb)("app-check")}}"undefined"!=typeof window&&window;var uk=P(127);const $x=new m.OlP("angularfire2.auth.use-emulator"),Hx=new m.OlP("angularfire2.auth.settings"),Gx=new m.OlP("angularfire2.auth.tenant-id"),qx=new m.OlP("angularfire2.auth.langugage-code"),zx=new m.OlP("angularfire2.auth.use-device-language"),Wx=new m.OlP("angularfire.auth.persistence"),Kx=(n,e,t,r,s,u,c,p)=>(0,da.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),c)for(const[I,S]of Object.entries(c))v.settings[I]=S;return p&&v.setPersistence(p),v},[t,r,s,u,c,p]);let Zx=(()=>{class n{constructor(t,r,s,u,c,p,v,I,S,x,V,H){const z=new mr.x,ge=yt(void 0).pipe((0,TI.Q)(c.outsideAngular),Vn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,820)))),(0,Pt.U)(()=>(0,da.on)(t,u,r)),(0,Pt.U)(ke=>Kx(ke,u,p,I,S,x,v,V)),yx({bufferSize:1,refCount:!1}));if(pr(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=yt(null);else{ge.pipe(Ws()).subscribe();const ft=ge.pipe(Vn(at=>at.getRedirectResult().then(Ft=>Ft,()=>null)),Vr.iC,yx({bufferSize:1,refCount:!1})),gt=ge.pipe(Vn(at=>new Qr.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>at.onAuthStateChanged(Ht=>Ft.next(Ht),Ht=>Ft.error(Ht),()=>Ft.complete()))})))),Et=ge.pipe(Vn(at=>new Qr.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>at.onIdTokenChanged(Ht=>Ft.next(Ht),Ht=>Ft.error(Ht),()=>Ft.complete()))}))));this.authState=ft.pipe(_x(gt),(0,vA.R)(c.outsideAngular),(0,TI.Q)(c.insideAngular)),this.user=ft.pipe(_x(Et),(0,vA.R)(c.outsideAngular),(0,TI.Q)(c.insideAngular)),this.idToken=this.user.pipe(Vn(at=>at?(0,Fn.D)(at.getIdToken()):yt(null))),this.idTokenResult=this.user.pipe(Vn(at=>at?(0,Fn.D)(at.getIdTokenResult()):yt(null))),this.credential=(0,lP.T)(ft,z,this.authState.pipe(ps(at=>!at))).pipe((0,Pt.U)(at=>(null==at?void 0:at.user)?at:null),(0,vA.R)(c.outsideAngular),(0,TI.Q)(c.insideAngular))}return(0,da.pX)(this,ge,u,{spy:{apply:(ke,ft,gt)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&gt.then(Et=>z.next(Et))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(da.Dh),m.LFG(da.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Vr.HU),m.LFG($x,8),m.LFG(Hx,8),m.LFG(Gx,8),m.LFG(qx,8),m.LFG(zx,8),m.LFG(Wx,8),m.LFG(FA,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Yx(n,e){return function ck(n,e=OS.z){return new Qr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function VA(n,e){return Yx(n,e).pipe((0,Pt.U)(t=>({payload:t,type:"query"})))}function kI(n,e){return VA(n,e).pipe(Ni(void 0),D_(),(0,Pt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const v=s.find(S=>S.doc.ref.isEqual(c.ref)),I=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function Qx(n,e,t){return kI(n,t).pipe(Tr((r,s)=>function hk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function fk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return UA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return UA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return UA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function TD(n,e=di.y){return n=null!=n?n:PS,(0,kr.e)((t,r)=>{let s,u=!0;t.subscribe((0,Gn.x)(r,c=>{const p=e(c);(u||!n(s,p))&&(u=!1,s=p,r.next(c))}))})}(),(0,Pt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function UA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function Jx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Xx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=kI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Pt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Ni(void 0),D_(),ps(([r,s])=>s.length>0||!r),(0,Pt.U)(([r,s])=>s),Vr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Tr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Jx(e);return Qx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vr.iC)}valueChanges(e={}){return VA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Vr.iC)}get(e){return(0,Fn.D)(this.query.get(e)).pipe(Vr.iC)}add(e){return this.ref.add(e)}doc(e){return new eN(this.ref.doc(e),this.afs)}}class eN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=rN(r,t);return new Xx(s,u,this.afs)}snapshotChanges(){return function dk(n,e){return Yx(n,e).pipe(Ni(void 0),D_(),(0,Pt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Vr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Fn.D)(this.ref.get(e)).pipe(Vr.iC)}}class pk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ps(t=>t.length>0),Vr.iC):kI(this.query,this.afs.schedulers.outsideAngular).pipe(Vr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Tr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Jx(e);return Qx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vr.iC)}valueChanges(e={}){return VA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Vr.iC)}get(e){return(0,Fn.D)(this.query.get(e)).pipe(Vr.iC)}}const tN=new m.OlP("angularfire2.enableFirestorePersistence"),nN=new m.OlP("angularfire2.firestore.persistenceSettings"),gk=new m.OlP("angularfire2.firestore.settings"),mk=new m.OlP("angularfire2.firestore.use-emulator");function rN(n,e=(t=>t)){return{query:e(n),ref:n}}let iN=(()=>{class n{constructor(t,r,s,u,c,p,v,I,S,x,V,H,z,ge,ke,ft,gt){this.schedulers=v;const Et=(0,da.on)(t,p,r),at=S;x&&Kx(Et,p,V,z,ge,ke,H,ft),[this.firestore,this.persistenceEnabled$]=(0,da.cc)(`${Et.name}.firestore`,"AngularFirestore",Et.name,()=>{const Ft=p.runOutsideAngular(()=>Et.firestore());if(u&&Ft.settings(u),at&&Ft.useEmulator(...at),s&&!pr(c)){const Ht=()=>{try{return(0,Fn.D)(Ft.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(mn){return"undefined"!=typeof console&&console.warn(mn),yt(!1)}};return[Ft,p.runOutsideAngular(Ht)]}return[Ft,yt(!1)]},[u,at,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=rN(s,r),p=this.schedulers.ngZone.run(()=>u);return new Xx(p,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new pk(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new eN(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(da.Dh),m.LFG(da.xv,8),m.LFG(tN,8),m.LFG(gk,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Vr.HU),m.LFG(nN,8),m.LFG(mk,8),m.LFG(Zx,8),m.LFG($x,8),m.LFG(Hx,8),m.LFG(Gx,8),m.LFG(qx,8),m.LFG(zx,8),m.LFG(Wx,8),m.LFG(FA,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yk=(()=>{class n{constructor(){uk.Z.registerVersion("angularfire",Vr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:tN,useValue:!0},{provide:nN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[iN]}),n})(),OE=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("task-list").add(t)}getAll(t){return this._client.collection("task-list").valueChanges({idField:"id"}).pipe((0,Pt.U)(r=>((n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(s=>((s,u,c)=>void 0===s.find(p=>u[p]!==c[p]))(t,s,e))})(r,t)))}set(t){this._client.doc("task-list/"+t.id).update(t)}remove(t){this._client.doc("task-list/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(iN))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),sN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[OE,{provide:b_,useExisting:OE},{provide:Qy,useExisting:OE},{provide:I_,useExisting:OE},{provide:J0,useExisting:OE}],imports:[[yk]]}),n})(),oN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Ci]]}),n})(),aN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Ci,Bu.forChild([{path:"",component:CD}]),ew,sN,oN]]}),n})(),vk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home-page-page"]],decls:28,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-12","col-md-12","text-center"],[1,"row","gx-5"],[1,"col-4"],[1,"fst-italic"],[1,"position-absolute","top-50","start-50","translate-middle"],[1,"d-grid","gap-2","col-6","mx-auto"],["routerLink","AddTask","type","button",1,"btn","btn-primary"],["routerLink","tasklist","type","button",1,"btn","btn-primary"],[1,"d-grid","gap-2"],[1,"row","align-items-start"],[1,"col"],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_cBZz2FDgaQSy-2CS1MCxEibBfrRvLsgyEQ&usqp=CAU","width","300","height","400",1,"img-fluid"],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3fea8AMP1n9t1IoXZfrY0X1QS05sL4p8cZw&usqp=CAU","width","300","height","400",1,"img-fluid"],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSscYyAMvQFid7iOeT6aHBNFm9U65Pra3XWAw&usqp=CAU","width","300","height","400",1,"img-fluid"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),m._uU(4," Get a clear view of the day ahead"),m.qZA()(),m.TgZ(5,"div",0)(6,"div",1)(7,"div",2),m._UZ(8,"p",3)(9,"p",4),m.TgZ(10,"p",5),m._uU(11," All your tasks that are due today will show up here"),m.qZA()(),m.TgZ(12,"div",6)(13,"div",7)(14,"button",8),m._uU(15,"Add Task"),m.qZA(),m.TgZ(16,"button",9),m._uU(17,"Task List"),m.qZA(),m._UZ(18,"div",10),m.TgZ(19,"div",0)(20,"div",11)(21,"div",12),m._UZ(22,"img",13),m.qZA(),m.TgZ(23,"div",12),m._UZ(24,"img",14),m.qZA(),m.TgZ(25,"div",12),m._UZ(26,"img",15),m.qZA()(),m._UZ(27,"router-outlet"),m.qZA()()()()()()())},directives:[yg,Fu],encapsulation:2,changeDetection:0}),n})(),BA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Ci,Bu.forChild([{path:"",component:vk}])]]}),n})(),Ek=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-tasklist-page"]],decls:6,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-12","col-md-12","text-center"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),m._uU(4,"TASK LIST"),m.qZA()(),m._UZ(5,"lib-task-list"),m.qZA()())},directives:[X0],encapsulation:2,changeDetection:0}),n})(),wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[],imports:[[Ci,Bu.forChild([{path:"",component:Ek}]),sN,oN]]}),n})();const bk=[{path:"home",loadChildren:()=>BA},{path:"AddTask",loadChildren:()=>aN},{path:"tasklist",loadChildren:()=>wk}];let Ik=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[Bu.forRoot(bk),BA],Bu]}),n})(),Dk=(()=>{class n{constructor(){this.myDate=Date.now(),this.title="todo-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:9,vars:3,consts:[[1,"banner"],[1,"h1","display-4"],[1,"lead"],[1,"fs-3"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"p",1),m._uU(2,"Awesome TODO APP"),m.qZA(),m._UZ(3,"p",2),m.TgZ(4,"div")(5,"p",3),m._uU(6),m.ALo(7,"date"),m.qZA()()(),m._UZ(8,"router-outlet")),2&t&&(m.xp6(6),m.hij(" TODAY ",m.lcZ(7,1,r.myDate)," "))},directives:[Fu],pipes:[Lh],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}",".banner[_ngcontent-%COMP%] {\n    background-image: url('https://home.kpmg/content/dam/kpmg/pl/images/insights/alerty/pl-Tax-Alert-hero-banner-1500-857.png');\n    background-size: cover;\n    height: 200px;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-bottom: 32px;\n  }\n\n  .banner[_ngcontent-%COMP%]    > p[_ngcontent-%COMP%] {\n    color: white;\n    padding: 10px;\n  }"]}),n})();class uN{}const Yc="*";function lN(n,e=null){return{type:2,steps:n,options:e}}function cN(n){return{type:6,styles:n,offset:null}}function dN(n){Promise.resolve(null).then(n)}class PE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class hN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const u=this.players.length;0==u?dN(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++s==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const tn=!1;function fN(n){return new m.vHH(3e3,tn)}function s1(){return"undefined"!=typeof window&&void 0!==window.document}function $A(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Rh(n){switch(n.length){case 0:return new PE;case 1:return n[0];default:return new hN(n)}}function pN(n,e,t,r,s={},u={}){const c=[],p=[];let v=-1,I=null;if(r.forEach(S=>{const x=S.offset,V=x==v,H=V&&I||{};Object.keys(S).forEach(z=>{let ge=z,ke=S[z];if("offset"!==z)switch(ge=e.normalizePropertyName(ge,c),ke){case"!":ke=s[z];break;case Yc:ke=u[z];break;default:ke=e.normalizeStyleValue(z,ge,ke,c)}H[ge]=ke}),V||p.push(H),I=H,v=x}),c.length)throw function Kk(n){return new m.vHH(3502,tn)}();return p}function HA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&GA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&GA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&GA(t,"destroy",n)))}}function GA(n,e,t){const r=t.totalTime,u=qA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function qA(n,e,t,r,s="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:u,disabled:!!c}}function Lo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function gN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let zA=(n,e)=>!1,mN=(n,e,t)=>[],yN=null;function WA(n){const e=n.parentNode||n.host;return e===yN?null:e}($A()||"undefined"!=typeof Element)&&(s1()?(yN=(()=>document.documentElement)(),zA=(n,e)=>{for(;e;){if(e===n)return!0;e=WA(e)}return!1}):zA=(n,e)=>n.contains(e),mN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Vp=null,_N=!1;function vN(n){Vp||(Vp=function a1(){return"undefined"!=typeof document?document.body:null}()||{},_N=!!Vp.style&&"WebkitAppearance"in Vp.style);let e=!0;return Vp.style&&!function o1(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Vp.style,!e&&_N&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Vp.style)),e}const EN=zA,wN=mN;let bN=(()=>{class n{validateStyleProperty(t){return vN(t)}matchesElement(t,r){return!1}containsElement(t,r){return EN(t,r)}getParentElement(t){return WA(t)}query(t,r,s){return wN(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,u,c,p=[],v){return new PE(s,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),KA=(()=>{class n{}return n.NOOP=new bN,n})();const ZA="ng-enter",LI="ng-leave",VI="ng-trigger",UI=".ng-trigger",DN="ng-animating",YA=".ng-animating";function Up(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:QA(parseFloat(e[1]),e[2])}function QA(n,e){return"s"===e?1e3*n:n}function BI(n,e,t){return n.hasOwnProperty("duration")?n:function c1(n,e,t){let s,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(fN()),{duration:0,delay:0,easing:""};s=QA(parseFloat(p[1]),p[2]);const v=p[3];null!=v&&(u=QA(parseFloat(v),p[4]));const I=p[5];I&&(c=I)}else s=n;if(!t){let p=!1,v=e.length;s<0&&(e.push(function Tk(){return new m.vHH(3100,tn)}()),p=!0),u<0&&(e.push(function Ak(){return new m.vHH(3101,tn)}()),p=!0),p&&e.splice(v,0,fN())}return{duration:s,delay:u,easing:c}}(n,e,t)}function ly(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Oh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else ly(n,t);return t}function TN(n,e,t){return t?e+":"+t+";":""}function AN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=TN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=TN(0,f1(t),n.style[t]));n.setAttribute("style",e)}function pl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const s=XA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[s]),n.style[s]=e[r]}),$A()&&AN(n))}function Bp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=XA(t);n.style[r]=""}),$A()&&AN(n))}function kE(n){return Array.isArray(n)?1==n.length?n[0]:lN(n):n}const JA=new RegExp("{{\\s*(.+?)\\s*}}","g");function SN(n){let e=[];if("string"==typeof n){let t;for(;t=JA.exec(n);)e.push(t[1]);JA.lastIndex=0}return e}function jI(n,e,t){const r=n.toString(),s=r.replace(JA,(u,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(function Mk(n){return new m.vHH(3003,tn)}()),p=""),p.toString()});return s==r?n:s}function $I(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const h1=/-+([a-z0-9])/g;function XA(n){return n.replace(h1,(...e)=>e[1].toUpperCase())}function f1(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Vo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function xk(n){return new m.vHH(3004,tn)}()}}function MN(n,e){return window.getComputedStyle(n)[e]}function v1(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function E1(n,e,t){if(":"==n[0]){const v=function w1(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Gk(n){return new m.vHH(3016,tn)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Hk(n){return new m.vHH(3015,tn)}()),e;const s=r[1],u=r[2],c=r[3];e.push(xN(s,c));"<"==u[0]&&!("*"==s&&"*"==c)&&e.push(xN(c,s))}(r,t,e)):t.push(n),t}const zI=new Set(["true","1"]),WI=new Set(["false","0"]);function xN(n,e){const t=zI.has(n)||WI.has(n),r=zI.has(e)||WI.has(e);return(s,u)=>{let c="*"==n||n==s,p="*"==e||e==u;return!c&&t&&"boolean"==typeof s&&(c=s?zI.has(n):WI.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?zI.has(e):WI.has(e)),c&&p}}const b1=new RegExp("s*:selfs*,?","g");function eS(n,e,t,r){return new I1(n).build(e,t,r)}class I1{constructor(e){this._driver=e}build(e,t,r){const s=new T1(t);this._resetContextStyleTimingState(s);const u=Vo(this,kE(e),s);return s.unsupportedCSSPropertiesFound.size&&s.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function Rk(){return new m.vHH(3006,tn)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const v=p,I=v.name;I.toString().split(/\s*,\s*/).forEach(S=>{v.name=S,u.push(this.visitState(v,t))}),v.name=I}else if(1==p.type){const v=this.visitTransition(p,t);r+=v.queryCount,s+=v.depCount,c.push(v)}else t.errors.push(function Ok(){return new m.vHH(3007,tn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=s||{};r.styles.forEach(p=>{if(KI(p)){const v=p;Object.keys(v).forEach(I=>{SN(v[I]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&($I(u.values()),t.errors.push(function Pk(n,e){return new m.vHH(3008,tn)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Vo(this,kE(e.animation),t);return{type:1,matchers:v1(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:jp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Vo(this,r,t)),options:jp(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const u=e.steps.map(c=>{t.currentTime=r;const p=Vo(this,c,t);return s=Math.max(s,t.currentTime),p});return t.currentTime=s,{type:3,steps:u,options:jp(e.options)}}visitAnimate(e,t){const r=function S1(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return tS(BI(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=tS(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||BI(r,e),tS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,u=e.styles?e.styles:cN({});if(5==u.type)s=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const I={};r.easing&&(I.easing=r.easing),c=cN(I)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(c,t);v.isEmptyStep=p,s=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Yc?r.push(c):t.errors.push(function kk(n){return new m.vHH(3002,tn)}()):r.push(c)}):r.push(e.styles);let s=!1,u=null;return r.forEach(c=>{if(KI(c)){const p=c,v=p.easing;if(v&&(u=v,delete p.easing),!s)for(let I in p)if(p[I].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return delete c[p],void t.unsupportedCSSPropertiesFound.add(p);const v=t.collectedStyles[t.currentQuerySelector],I=v[p];let S=!0;I&&(u!=s&&u>=I.startTime&&s<=I.endTime&&(t.errors.push(function Fk(n,e,t,r,s){return new m.vHH(3010,tn)}()),S=!1),u=I.startTime),S&&(v[p]={startTime:u,endTime:s}),t.options&&function d1(n,e,t){const r=e.params||{},s=SN(n);s.length&&s.forEach(u=>{r.hasOwnProperty(u)||t.push(function Sk(n){return new m.vHH(3001,tn)}())})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Lk(){return new m.vHH(3011,tn)}()),r;let u=0;const c=[];let p=!1,v=!1,I=0;const S=e.steps.map(ft=>{const gt=this._makeStyleAst(ft,t);let Et=null!=gt.offset?gt.offset:function A1(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(KI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(KI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(gt.styles),at=0;return null!=Et&&(u++,at=gt.offset=Et),v=v||at<0||at>1,p=p||at<I,I=at,c.push(at),gt});v&&t.errors.push(function Vk(){return new m.vHH(3012,tn)}()),p&&t.errors.push(function Uk(){return new m.vHH(3200,tn)}());const x=e.steps.length;let V=0;u>0&&u<x?t.errors.push(function Bk(){return new m.vHH(3202,tn)}()):0==u&&(V=1/(x-1));const H=x-1,z=t.currentTime,ge=t.currentAnimateTimings,ke=ge.duration;return S.forEach((ft,gt)=>{const Et=V>0?gt==H?1:V*gt:c[gt],at=Et*ke;t.currentTime=z+ge.delay+at,ge.duration=at,this._validateStyleAst(ft,t),ft.offset=Et,r.styles.push(ft)}),r}visitReference(e,t){return{type:8,animation:Vo(this,kE(e.animation),t),options:jp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:jp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:jp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function D1(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(b1,"")),n=n.replace(/@\*/g,UI).replace(/@\w+/g,t=>UI+"-"+t.substr(1)).replace(/:animating/g,YA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Lo(t.collectedStyles,t.currentQuerySelector,{});const p=Vo(this,kE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:s.limit||0,optional:!!s.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:jp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function jk(){return new m.vHH(3013,tn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:BI(e.timings,t.errors,!0);return{type:12,animation:Vo(this,kE(e.animation),t),timings:r,options:null}}}class T1{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function KI(n){return!Array.isArray(n)&&"object"==typeof n}function jp(n){return n?(n=ly(n)).params&&(n.params=function C1(n){return n?ly(n):null}(n.params)):n={},n}function tS(n,e,t){return{duration:n,delay:e,easing:t}}function nS(n,e,t,r,s,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:u,totalTime:s+u,easing:c,subTimeline:p}}class ZI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const N1=new RegExp(":enter","g"),O1=new RegExp(":leave","g");function rS(n,e,t,r,s,u={},c={},p,v,I=[]){return(new P1).buildKeyframes(n,e,t,r,s,u,c,p,v,I)}class P1{buildKeyframes(e,t,r,s,u,c,p,v,I,S=[]){I=I||new ZI;const x=new iS(e,t,I,s,u,S,[]);x.options=v,x.currentTimeline.setStyles([c],null,x.errors,v),Vo(this,r,x);const V=x.timelines.filter(H=>H.containsAnimation());if(Object.keys(p).length){let H;for(let z=V.length-1;z>=0;z--){const ge=V[z];if(ge.element===t){H=ge;break}}H&&!H.allowOnlyTimelineStyles()&&H.setStyles([p],null,x.errors,v)}return V.length?V.map(H=>H.buildKeyframes()):[nS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,s,s.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Up(r.duration):null,p=null!=r.delay?Up(r.delay):null;return 0!==c&&e.forEach(v=>{const I=t.appendInstructionToTimeline(v,c,p);u=Math.max(u,I.duration+I.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Vo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const u=e.options;if(u&&(u.params||u.delay)&&(s=t.createSubContext(u),s.transformIntoNewTimeline(),null!=u.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=YI);const c=Up(u.delay);s.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Vo(this,c,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Up(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),Vo(this,c,p),s=Math.max(s,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return BI(t.params?jI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(v=>{p.forwardTime((v.offset||0)*u),p.setStyles(v.styles,v.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(s+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},u=s.delay?Up(s.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=YI);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=p.length;let v=null;p.forEach((I,S)=>{t.currentQueryIndex=S;const x=t.createSubContext(e.options,I);u&&x.delayNextStep(u),I===t.element&&(v=x.currentTimeline),Vo(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let v=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":v=p-v;break;case"full":v=r.currentStaggerTime}const S=t.currentTimeline;v&&S.delayNextStep(v);const x=S.currentTime;Vo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-x+(s.startTime-r.currentTimeline.startTime)}}const YI={};class iS{constructor(e,t,r,s,u,c,p,v){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=YI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new QI(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=Up(r.duration)),null!=r.delay&&(s.delay=Up(r.delay));const u=r.params;if(u){let c=s.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=jI(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,u=new iS(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=YI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new k1(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(u),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,u,c){let p=[];if(s&&p.push(this.element),e.length>0){e=(e=e.replace(N1,"."+this._enterClassName)).replace(O1,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),p.push(...I)}return!u&&0==p.length&&c.push(function $k(n){return new m.vHH(3014,tn)}()),p}}class QI{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new QI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Yc,this._currentKeyframe[t]=Yc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&(this._previousKeyframe.easing=t);const u=s&&s.params||{},c=function F1(n,e){const t={};let r;return n.forEach(s=>{"*"===s?(r=r||Object.keys(e),r.forEach(u=>{t[u]=Yc})):Oh(s,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const v=jI(c[p],u,r);this._pendingStyles[p]=v,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:Yc),this._updateStyle(p,v)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],s=e._styleSummary[t];(!r||s.time>r.time)&&this._updateStyle(t,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((p,v)=>{const I=Oh(p,!0);Object.keys(I).forEach(S=>{const x=I[S];"!"==x?e.add(S):x==Yc&&t.add(S)}),r||(I.offset=v/this.duration),s.push(I)});const u=e.size?$I(e.values()):[],c=t.size?$I(t.values()):[];if(r){const p=s[0],v=ly(p);p.offset=0,v.offset=1,s=[p,v]}return nS(this.element,s,u,c,this.duration,this.startTime,this.easing,!1)}}class k1 extends QI{constructor(e,t,r,s,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,v=Oh(e[0],!1);v.offset=0,u.push(v);const I=Oh(e[0],!1);I.offset=ON(p),u.push(I);const S=e.length-1;for(let x=1;x<=S;x++){let V=Oh(e[x],!1);V.offset=ON((t+V.offset*r)/c),u.push(V)}r=c,t=0,s="",e=u}return nS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function ON(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class sS{}class L1 extends sS{normalizePropertyName(e,t){return XA(e)}normalizeStyleValue(e,t,r,s){let u="";const c=r.toString().trim();if(V1[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&s.push(function Nk(n,e){return new m.vHH(3005,tn)}())}return c+u}}const V1=(()=>function U1(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function PN(n,e,t,r,s,u,c,p,v,I,S,x,V){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:v,preStyleProps:I,postStyleProps:S,totalTime:x,errors:V}}const oS={};class kN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function B1(n,e,t,r,s){return n.some(u=>u(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){const s=this._stateStyles["*"],u=this._stateStyles[e],c=s?s.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,s,u,c,p,v,I,S){const x=[],V=this.ast.options&&this.ast.options.params||oS,z=this.buildStyles(r,p&&p.params||oS,x),ge=v&&v.params||oS,ke=this.buildStyles(s,ge,x),ft=new Set,gt=new Map,Et=new Map,at="void"===s,Ft={params:Object.assign(Object.assign({},V),ge)},Ht=S?[]:rS(e,t,this.ast.animation,u,c,z,ke,Ft,I,x);let mn=0;if(Ht.forEach(Qc=>{mn=Math.max(Qc.duration+Qc.delay,mn)}),x.length)return PN(t,this._triggerName,r,s,at,z,ke,[],[],gt,Et,mn,x);Ht.forEach(Qc=>{const Jc=Qc.element,QN=Lo(gt,Jc,{});Qc.preStyleProps.forEach($p=>QN[$p]=!0);const LE=Lo(Et,Jc,{});Qc.postStyleProps.forEach($p=>LE[$p]=!0),Jc!==t&&ft.add(Jc)});const Ui=$I(ft.values());return PN(t,this._triggerName,r,s,at,z,ke,Ht,Ui,gt,Et,mn)}}class j1{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},s=ly(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(s[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(p=>{let v=c[p];v.length>1&&(v=jI(v,s,t));const I=this.normalizer.normalizePropertyName(p,t);v=this.normalizer.normalizeStyleValue(p,I,v,t),r[I]=v})}}),r}}class H1{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(s=>{this.states[s.name]=new j1(s.style,s.options&&s.options.params||{},r)}),FN(this.states,"true","1"),FN(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new kN(e,s,this.states))}),this.fallbackTransition=function G1(n,e,t){return new kN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(c=>c.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function FN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const q1=new ZI;class z1{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=eS(this._driver,t,r,[]);if(r.length)throw function Zk(n){return new m.vHH(3503,tn)}();this._animations[e]=u}_buildPlayer(e,t,r){const s=e.element,u=pN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(s,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],u=this._animations[e];let c;const p=new Map;if(u?(c=rS(this._driver,t,u,ZA,LI,{},{},r,q1,s),c.forEach(S=>{const x=Lo(p,S.element,{});S.postStyleProps.forEach(V=>x[V]=null)})):(s.push(function Yk(){return new m.vHH(3300,tn)}()),c=[]),s.length)throw function Qk(n){return new m.vHH(3504,tn)}();p.forEach((S,x)=>{Object.keys(S).forEach(V=>{S[V]=this._driver.computeStyle(x,V,Yc)})});const I=Rh(c.map(S=>{const x=p.get(S.element);return this._buildPlayer(S,{},x)}));return this._playersById[e]=I,I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Jk(n){return new m.vHH(3301,tn)}();return t}listen(e,t,r,s){const u=qA(t,"","","");return HA(this._getPlayer(e),r,u,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const LN="ng-animate-queued",aS="ng-animate-disabled",Q1=[],VN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},J1={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ia="__ng_removed";class uS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function nF(n){return null!=n?n:null}(r?e.value:e),r){const u=ly(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const FE="void",lS=new uS(FE);class X1{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Da(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.hasOwnProperty(t))throw function Xk(n,e){return new m.vHH(3302,tn)}();if(null==r||0==r.length)throw function e1(n){return new m.vHH(3303,tn)}();if(!function rF(n){return"start"==n||"done"==n}(r))throw function t1(n,e){return new m.vHH(3400,tn)}();const u=Lo(this._elementListeners,e,[]),c={name:t,phase:r,callback:s};u.push(c);const p=Lo(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Da(e,VI),Da(e,VI+"-"+t),p[t]=lS),()=>{this._engine.afterFlush(()=>{const v=u.indexOf(c);v>=0&&u.splice(v,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function n1(n){return new m.vHH(3401,tn)}();return t}trigger(e,t,r,s=!0){const u=this._getTrigger(t),c=new cS(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Da(e,VI),Da(e,VI+"-"+t),this._engine.statesByElement.set(e,p={}));let v=p[t];const I=new uS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&I.absorbOptions(v.options),p[t]=I,v||(v=lS),I.value!==FE&&v.value===I.value){if(!function oF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const u=t[s];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(v.params,I.params)){const ge=[],ke=u.matchStyles(v.value,v.params,ge),ft=u.matchStyles(I.value,I.params,ge);ge.length?this._engine.reportError(ge):this._engine.afterFlush(()=>{Bp(e,ke),pl(e,ft)})}return}const V=Lo(this._engine.playersByElement,e,[]);V.forEach(ge=>{ge.namespaceId==this.id&&ge.triggerName==t&&ge.queued&&ge.destroy()});let H=u.matchTransition(v.value,I.value,e,I.params),z=!1;if(!H){if(!s)return;H=u.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:H,fromState:v,toState:I,player:c,isFallbackTransition:z}),z||(Da(e,LN),c.onStart(()=>{cy(e,LN)})),c.onDone(()=>{let ge=this.players.indexOf(c);ge>=0&&this.players.splice(ge,1);const ke=this._engine.playersByElement.get(e);if(ke){let ft=ke.indexOf(c);ft>=0&&ke.splice(ft,1)}}),this.players.push(c),V.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,UI,!0);r.forEach(s=>{if(s[Ia])return;const u=this._engine.fetchNamespacesByElement(s);u.size?u.forEach(c=>c.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(Object.keys(u).forEach(v=>{if(c.set(v,u[v].value),this._triggers[v]){const I=this.trigger(e,v,FE,s);I&&p.push(I)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Rh(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(u=>{const c=u.name;if(s.has(c))return;s.add(c);const v=this._triggers[c].fallbackTransition,I=r[c]||lS,S=new uS(FE),x=new cS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:v,fromState:I,toState:S,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)s=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Ia];(!u||u===VN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Da(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const v=qA(u,r.triggerName,r.fromState.value,r.toState.value);v._data=e,HA(r.player,p.phase,v,p.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const u=r.transition.ast.depCount,c=s.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class eF{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new X1(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const v=s.get(p);if(v){const I=r.indexOf(v);r.splice(I+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}}else for(let p=u;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const s=Object.keys(r);for(let u=0;u<s.length;u++){const c=r[s[u]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,s){if(JI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!JI(t))return;const u=t[Ia];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Da(e,aS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),cy(e,aS))}removeNode(e,t,r,s){if(JI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,r,s,u){this.collectedLeaveElements.push(t),t[Ia]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,s,u){return JI(t)?this._fetchNamespace(e).listen(t,r,s,u):()=>{}}_buildInstruction(e,t,r,s,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,UI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,YA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Rh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Ia];if(r&&r.setForRemoval){if(e[Ia]=VN,r.namespaceId){this.destroyInnerAnimations(e);const s=this._fetchNamespace(r.namespaceId);s&&s.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(aS))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Da(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Rh(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function r1(n){return new m.vHH(3402,tn)}()}_flushAnimations(e,t){const r=new ZI,s=[],u=new Map,c=[],p=new Map,v=new Map,I=new Map,S=new Set;this.disabledNodes.forEach(st=>{S.add(st);const wt=this.driver.query(st,".ng-animate-queued",!0);for(let At=0;At<wt.length;At++)S.add(wt[At])});const x=this.bodyNode,V=Array.from(this.statesByElement.keys()),H=jN(V,this.collectedEnterElements),z=new Map;let ge=0;H.forEach((st,wt)=>{const At=ZA+ge++;z.set(wt,At),st.forEach(hn=>Da(hn,At))});const ke=[],ft=new Set,gt=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const wt=this.collectedLeaveElements[st],At=wt[Ia];At&&At.setForRemoval&&(ke.push(wt),ft.add(wt),At.hasAnimation?this.driver.query(wt,".ng-star-inserted",!0).forEach(hn=>ft.add(hn)):gt.add(wt))}const Et=new Map,at=jN(V,Array.from(ft));at.forEach((st,wt)=>{const At=LI+ge++;Et.set(wt,At),st.forEach(hn=>Da(hn,At))}),e.push(()=>{H.forEach((st,wt)=>{const At=z.get(wt);st.forEach(hn=>cy(hn,At))}),at.forEach((st,wt)=>{const At=Et.get(wt);st.forEach(hn=>cy(hn,At))}),ke.forEach(st=>{this.processLeaveNode(st)})});const Ft=[],Ht=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(t).forEach(At=>{const hn=At.player,wi=At.element;if(Ft.push(hn),this.collectedEnterElements.length){const Ts=wi[Ia];if(Ts&&Ts.setForMove){if(Ts.previousTriggersValues&&Ts.previousTriggersValues.has(At.triggerName)){const Hp=Ts.previousTriggersValues.get(At.triggerName),kh=this.statesByElement.get(At.element);kh&&kh[At.triggerName]&&(kh[At.triggerName].value=Hp)}return void hn.destroy()}}const gl=!x||!this.driver.containsElement(x,wi),Uo=Et.get(wi),Ph=z.get(wi),ur=this._buildInstruction(At,r,Ph,Uo,gl);if(ur.errors&&ur.errors.length)return void Ht.push(ur);if(gl)return hn.onStart(()=>Bp(wi,ur.fromStyles)),hn.onDestroy(()=>pl(wi,ur.toStyles)),void s.push(hn);if(At.isFallbackTransition)return hn.onStart(()=>Bp(wi,ur.fromStyles)),hn.onDestroy(()=>pl(wi,ur.toStyles)),void s.push(hn);const eR=[];ur.timelines.forEach(Ts=>{Ts.stretchStartingKeyframe=!0,this.disabledNodes.has(Ts.element)||eR.push(Ts)}),ur.timelines=eR,r.append(wi,ur.timelines),c.push({instruction:ur,player:hn,element:wi}),ur.queriedElements.forEach(Ts=>Lo(p,Ts,[]).push(hn)),ur.preStyleProps.forEach((Ts,Hp)=>{const kh=Object.keys(Ts);if(kh.length){let Gp=v.get(Hp);Gp||v.set(Hp,Gp=new Set),kh.forEach(hS=>Gp.add(hS))}}),ur.postStyleProps.forEach((Ts,Hp)=>{const kh=Object.keys(Ts);let Gp=I.get(Hp);Gp||I.set(Hp,Gp=new Set),kh.forEach(hS=>Gp.add(hS))})});if(Ht.length){const st=[];Ht.forEach(wt=>{st.push(function i1(n,e){return new m.vHH(3505,tn)}())}),Ft.forEach(wt=>wt.destroy()),this.reportError(st)}const mn=new Map,Ui=new Map;c.forEach(st=>{const wt=st.element;r.has(wt)&&(Ui.set(wt,wt),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,mn))}),s.forEach(st=>{const wt=st.element;this._getPreviousPlayers(wt,!1,st.namespaceId,st.triggerName,null).forEach(hn=>{Lo(mn,wt,[]).push(hn),hn.destroy()})});const Qc=ke.filter(st=>HN(st,v,I)),Jc=new Map;BN(Jc,this.driver,gt,I,Yc).forEach(st=>{HN(st,v,I)&&Qc.push(st)});const LE=new Map;H.forEach((st,wt)=>{BN(LE,this.driver,new Set(st),v,"!")}),Qc.forEach(st=>{const wt=Jc.get(st),At=LE.get(st);Jc.set(st,Object.assign(Object.assign({},wt),At))});const $p=[],JN=[],XN={};c.forEach(st=>{const{element:wt,player:At,instruction:hn}=st;if(r.has(wt)){if(S.has(wt))return At.onDestroy(()=>pl(wt,hn.toStyles)),At.disabled=!0,At.overrideTotalTime(hn.totalTime),void s.push(At);let wi=XN;if(Ui.size>1){let Uo=wt;const Ph=[];for(;Uo=Uo.parentNode;){const ur=Ui.get(Uo);if(ur){wi=ur;break}Ph.push(Uo)}Ph.forEach(ur=>Ui.set(ur,wi))}const gl=this._buildAnimation(At.namespaceId,hn,mn,u,LE,Jc);if(At.setRealPlayer(gl),wi===XN)$p.push(At);else{const Uo=this.playersByElement.get(wi);Uo&&Uo.length&&(At.parentPlayer=Rh(Uo)),s.push(At)}}else Bp(wt,hn.fromStyles),At.onDestroy(()=>pl(wt,hn.toStyles)),JN.push(At),S.has(wt)&&s.push(At)}),JN.forEach(st=>{const wt=u.get(st.element);if(wt&&wt.length){const At=Rh(wt);st.setRealPlayer(At)}}),s.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<ke.length;st++){const wt=ke[st],At=wt[Ia];if(cy(wt,LI),At&&At.hasAnimation)continue;let hn=[];if(p.size){let gl=p.get(wt);gl&&gl.length&&hn.push(...gl);let Uo=this.driver.query(wt,YA,!0);for(let Ph=0;Ph<Uo.length;Ph++){let ur=p.get(Uo[Ph]);ur&&ur.length&&hn.push(...ur)}}const wi=hn.filter(gl=>!gl.destroyed);wi.length?iF(this,wt,wi):this.processLeaveNode(wt)}return ke.length=0,$p.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const wt=this.players.indexOf(st);this.players.splice(wt,1)}),st.play()}),$p}elementContainsData(e,t){let r=!1;const s=t[Ia];return s&&s.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const v=!u||u==FE;p.forEach(I=>{I.queued||!v&&I.triggerName!=s||c.push(I)})}}return(r||s)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||s&&s!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const I=v.element,S=I!==u,x=Lo(r,I,[]);this._getPreviousPlayers(I,S,c,p,t.toState).forEach(H=>{const z=H.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),H.destroy(),x.push(H)})}Bp(u,t.fromStyles)}_buildAnimation(e,t,r,s,u,c){const p=t.triggerName,v=t.element,I=[],S=new Set,x=new Set,V=t.timelines.map(z=>{const ge=z.element;S.add(ge);const ke=ge[Ia];if(ke&&ke.removedBeforeQueried)return new PE(z.duration,z.delay);const ft=ge!==v,gt=function sF(n){const e=[];return $N(n,e),e}((r.get(ge)||Q1).map(mn=>mn.getRealPlayer())).filter(mn=>!!mn.element&&mn.element===ge),Et=u.get(ge),at=c.get(ge),Ft=pN(0,this._normalizer,0,z.keyframes,Et,at),Ht=this._buildPlayer(z,Ft,gt);if(z.subTimeline&&s&&x.add(ge),ft){const mn=new cS(e,p,ge);mn.setRealPlayer(Ht),I.push(mn)}return Ht});I.forEach(z=>{Lo(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function tF(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,z.element,z))}),S.forEach(z=>Da(z,DN));const H=Rh(V);return H.onDestroy(()=>{S.forEach(z=>cy(z,DN)),pl(v,t.toStyles)}),x.forEach(z=>{Lo(s,z,[]).push(H)}),H}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new PE(e.duration,e.delay)}}class cS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new PE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>HA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Lo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function JI(n){return n&&1===n.nodeType}function UN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function BN(n,e,t,r,s){const u=[];t.forEach(v=>u.push(UN(v)));const c=[];r.forEach((v,I)=>{const S={};v.forEach(x=>{const V=S[x]=e.computeStyle(I,x,s);(!V||0==V.length)&&(I[Ia]=J1,c.push(I))}),n.set(I,S)});let p=0;return t.forEach(v=>UN(v,u[p++])),c}function jN(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const s=new Set(e),u=new Map;function c(p){if(!p)return 1;let v=u.get(p);if(v)return v;const I=p.parentNode;return v=t.has(I)?I:s.has(I)?1:c(I),u.set(p,v),v}return e.forEach(p=>{const v=c(p);1!==v&&t.get(v).push(p)}),t}function Da(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function cy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function iF(n,e,t){Rh(t).onDone(()=>n.processLeaveNode(e))}function $N(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof hN?$N(r.players,e):e.push(r)}}function HN(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(u=>s.add(u)):e.set(n,r),t.delete(n),!0}class XI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,u)=>{},this._transitionEngine=new eF(e,t,r),this._timelineEngine=new z1(e,t,r),this._transitionEngine.onRemovalComplete=(s,u)=>this.onRemovalComplete(s,u)}registerTrigger(e,t,r,s,u){const c=e+"-"+s;let p=this._triggerCache[c];if(!p){const v=[],S=eS(this._driver,u,v,[]);if(v.length)throw function Wk(n,e){return new m.vHH(3404,tn)}();p=function $1(n,e,t){return new H1(n,e,t)}(s,S,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,s,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r,s){this._transitionEngine.removeNode(e,t,s||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[u,c]=gN(r);this._timelineEngine.command(u,t,c,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,u){if("@"==r.charAt(0)){const[c,p]=gN(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,s,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let uF=(()=>{class n{constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&pl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pl(this._element,this._initialStyles),this._endStyles&&(pl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Bp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Bp(this._element,this._endStyles),this._endStyles=null),pl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function dS(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=t[r];lF(s)&&(e=e||{},e[s]=n[s])}return e}function lF(n){return"display"===n||"position"===n}class GN{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:MN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class cF{validateStyleProperty(e){return vN(e)}matchesElement(e,t){return!1}containsElement(e,t){return EN(e,t)}getParentElement(e){return WA(e)}query(e,t,r){return wN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,s,u,c=[]){const v={duration:r,delay:s,fill:0==s?"both":"forwards"};u&&(v.easing=u);const I={},S=c.filter(V=>V instanceof GN);(function p1(n,e){return 0===n||0===e})(r,s)&&S.forEach(V=>{let H=V.currentSnapshot;Object.keys(H).forEach(z=>I[z]=H[z])}),t=function g1(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(p=>{u.hasOwnProperty(p)||c.push(p),u[p]=t[p]}),c.length)for(var s=1;s<e.length;s++){let p=e[s];c.forEach(function(v){p[v]=MN(n,v)})}}return e}(e,t=t.map(V=>Oh(V,!1)),I);const x=function aF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=dS(e[0]),e.length>1&&(r=dS(e[e.length-1]))):e&&(t=dS(e)),t||r?new uF(n,t,r):null}(e,t);return new GN(e,t,v,x)}}let dF=(()=>{class n extends uN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?lN(t):t;return qN(this._renderer,null,r,"register",[s]),new hF(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(re))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class hF extends class Ck{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new fF(this._id,e,t||{},this._renderer)}}class fF{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return qN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function qN(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const zN="@.disabled";let pF=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=null==c?void 0:c.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new WN("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const v=S=>{Array.isArray(S)?S.forEach(v):this.engine.registerTrigger(c,p,t,S.name,S)};return r.data.animation.forEach(v),new gF(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(XI),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class WN{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==zN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class gF extends WN{constructor(e,t,r,s){super(t,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==zN?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function mF(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function yF(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,s,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let _F=(()=>{class n extends XI{constructor(t,r,s){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(re),m.LFG(KA),m.LFG(sS))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const KN=new m.OlP("AnimationModuleType"),ZN=[{provide:uN,useClass:dF},{provide:sS,useFactory:function vF(){return new L1}},{provide:XI,useClass:_F},{provide:m.FYo,useFactory:function EF(n,e,t){return new pF(n,e,t)},deps:[En,XI,m.R0b]}],YN=[{provide:KA,useFactory:()=>new cF},{provide:KN,useValue:"BrowserAnimations"},...ZN],wF=[{provide:KA,useClass:bN},{provide:KN,useValue:"NoopAnimations"},...ZN];let bF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?wF:YN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:YN,imports:[zo]}),n})();const IF={apiKey:"AIzaSyDY2VPDHZHRT_QkY2oXIVEKpSg0T5MwR-M",authDomain:"todo-ffcf6.firebaseapp.com",projectId:"todo-ffcf6",storageBucket:"todo-ffcf6.appspot.com",messagingSenderId:"560993699896",appId:"1:560993699896:web:a04bc0a6288e52ae8a3ecd"};let DF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[Dk]}),n.\u0275inj=m.cJS({providers:[],imports:[[zo,bF,Ik,da.hO.initializeApp(IF)]]}),n})();(0,m.G48)(),Al().bootstrapModule(DF).catch(n=>console.error(n))},5867:(ot,Te,P)=>{P.d(Te,{Mq:()=>m.getApp,C6:()=>m.getApps});var m=P(9681);(0,m.registerVersion)("firebase","9.6.11","app")},127:(ot,Te,P)=>{P.d(Te,{Z:()=>m.Z});var m=P(3942);m.Z.registerVersion("firebase","9.6.11","app-compat")},820:(ot,Te,P)=>{P.r(Te);var m=P(5861),Z=P(3942),O=P(2090),oe=P(9681),X=P(655),fe=P(1877),re=P(4859);const Ne=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new fe.Yd("@firebase/auth");function Ke(y,...h){Xe.logLevel<=fe.in.ERROR&&Xe.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw je(y,...h)}function ye(y,...h){return je(y,...h)}function ve(y,h,g){const E=Object.assign(Object.assign({},Le()),{[h]:g});return new O.LL("auth","Firebase",E).create(h,{appName:y.name})}function He(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&De(y,"argument-error"),ve(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const g=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return de.create(y,...h)}function ne(y,h,...g){if(!y)throw je(h,...g)}function We(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ke(h),new Error(h)}function J(y,h){y||We(h)}const se=new Map;function te(y){J(y instanceof Function,"Expected a class definition");let h=se.get(y);return h?(J(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,se.set(y,h),h)}function Fe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Dt(){return"http:"===Zt()||"https:"===Zt()}function Zt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class qt{constructor(h,g){this.shortDelay=h,this.longDelay=g,J(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function an(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Dt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tr(y,h){J(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Dn{static initialize(h,g,E){this.fetchImpl=h,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void We("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void We("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void We("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},bi=new qt(3e4,6e4);function Qt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function zt(y,h,g,E){return lr.apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(y,h,g,E,T={}){return si(y,T,(0,m.Z)(function*(){let R={},q={};E&&("GET"===h?q=E:R={body:JSON.stringify(E)});const ie=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),Dn.fetch()(Pr(y,y.config.apiHost,g,ie),Object.assign({method:h,headers:Ue,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function si(y,h,g){return As.apply(this,arguments)}function As(){return(As=(0,m.Z)(function*(y,h,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Xt),h);try{const T=new rs(y),R=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw is(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const ie=R.ok?q.errorMessage:q.error.message,[Ue,Je]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw is(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ue)throw is(y,"email-already-in-use",q);const _t=E[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw ve(y,_t,Je);De(y,_t)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function Or(y,h,g,E){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,m.Z)(function*(y,h,g,E,T={}){const R=yield zt(y,h,g,E,T);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Pr(y,h,g,E){const T=`${h}${g}?${E}`;return y.config.emulator?tr(y.config,T):`${y.config.apiScheme}://${T}`}class rs{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(ye(this.auth,"network-request-failed")),bi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function is(y,h,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const T=ye(y,h,E);return T.customData._tokenResponse=g,T}function Gr(){return(Gr=(0,m.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function nr(y,h){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,m.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function oi(y,h){return so.apply(this,arguments)}function so(){return(so=(0,m.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function vn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Ca(){return(Ca=(0,m.Z)(function*(y,h=!1){const g=(0,O.m9)(y),E=yield g.getIdToken(h),T=rt(E);ne(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:T,token:E,authTime:vn(Wt(T.auth_time)),issuedAtTime:vn(Wt(T.iat)),expirationTime:vn(Wt(T.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Wt(y){return 1e3*Number(y)}function rt(y){const[h,g,E]=y.split(".");if(void 0===h||void 0===g||void 0===E)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(g);return T?JSON.parse(T):(Ke("Failed to decode base64 JWT payload"),null)}catch(T){return Ke("Caught error parsing JWT payload as JSON",T),null}}function cr(y,h){return ji.apply(this,arguments)}function ji(){return(ji=(0,m.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(E){throw E instanceof O.ZR&&Gt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Gt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class oo{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),E)}iteration(){var h=this;return(0,m.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&h.schedule(!0))}h.schedule()})()}}class Er{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=vn(this.lastLoginAt),this.creationTime=vn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function dr(y){return ct.apply(this,arguments)}function ct(){return(ct=(0,m.Z)(function*(y){var h;const g=y.auth,E=yield y.getIdToken(),T=yield cr(y,oi(g,{idToken:E}));ne(null==T?void 0:T.users.length,g,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const q=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?Ce(R.providerUserInfo):[],ie=Ze(y.providerData,q),_t=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==ie?void 0:ie.length)),it={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ie,metadata:new Er(R.createdAt,R.lastLoginAt),isAnonymous:_t};Object.assign(y,it)})).apply(this,arguments)}function Bt(){return(Bt=(0,m.Z)(function*(y){const h=(0,O.m9)(y);yield dr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ze(y,h){return[...y.filter(E=>!h.some(T=>T.providerId===E.providerId)),...h]}function Ce(y){return y.map(h=>{var{providerId:g}=h,E=(0,X._T)(h,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function dt(){return(dt=(0,m.Z)(function*(y,h){const g=yield si(y,{},(0,m.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,q=Pr(y,T,"/v1/token",`key=${R}`),ie=yield y._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",Dn.fetch()(q,{method:"POST",headers:ie,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class $t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ne(h.idToken,"internal-error"),ne(void 0!==h.idToken,"internal-error"),ne(void 0!==h.refreshToken,"internal-error");const g="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function vt(y){const h=rt(y);return ne(h,"internal-error"),ne(void 0!==h.exp,"internal-error"),ne(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var E=this;return(0,m.Z)(function*(){return ne(!E.accessToken||E.refreshToken,h,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var E=this;return(0,m.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:q}=yield function Qe(y,h){return dt.apply(this,arguments)}(h,g);E.updateTokensAndExpiration(T,R,Number(q))})()}updateTokensAndExpiration(h,g,E){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,g){const{refreshToken:E,accessToken:T,expirationTime:R}=g,q=new $t;return E&&(ne("string"==typeof E,"internal-error",{appName:h}),q.refreshToken=E),T&&(ne("string"==typeof T,"internal-error",{appName:h}),q.accessToken=T),R&&(ne("number"==typeof R,"internal-error",{appName:h}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new $t,this.toJSON())}_performRefresh(){return We("not implemented")}}function Lt(y,h){ne("string"==typeof y||void 0===y,"internal-error",{appName:h})}class B{constructor(h){var{uid:g,auth:E,stsTokenManager:T}=h,R=(0,X._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Er(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,m.Z)(function*(){const E=yield cr(g,g.stsTokenManager.getToken(g.auth,h));return ne(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(h){return function Ss(y){return Ca.apply(this,arguments)}(this,h)}reload(){return function wr(y){return Bt.apply(this,arguments)}(this)}_assign(h){this!==h&&(ne(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new B(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var E=this;return(0,m.Z)(function*(){let T=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),T=!0),g&&(yield dr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,m.Z)(function*(){const g=yield h.getIdToken();return yield cr(h,function lt(y,h){return Gr.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var E,T,R,q,ie,Ue,Je,_t;const it=null!==(E=g.displayName)&&void 0!==E?E:void 0,xn=null!==(T=g.email)&&void 0!==T?T:void 0,Yi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,ic=null!==(q=g.photoURL)&&void 0!==q?q:void 0,Vu=null!==(ie=g.tenantId)&&void 0!==ie?ie:void 0,Uu=null!==(Ue=g._redirectEventId)&&void 0!==Ue?Ue:void 0,mf=null!==(Je=g.createdAt)&&void 0!==Je?Je:void 0,By=null!==(_t=g.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:aa,emailVerified:kd,isAnonymous:Fd,providerData:yf,stsTokenManager:Ld}=g;ne(aa&&Ld,h,"internal-error");const yi=$t.fromJSON(this.name,Ld);ne("string"==typeof aa,h,"internal-error"),Lt(it,h.name),Lt(xn,h.name),ne("boolean"==typeof kd,h,"internal-error"),ne("boolean"==typeof Fd,h,"internal-error"),Lt(Yi,h.name),Lt(ic,h.name),Lt(Vu,h.name),Lt(Uu,h.name),Lt(mf,h.name),Lt(By,h.name);const _f=new B({uid:aa,auth:h,email:xn,emailVerified:kd,displayName:it,isAnonymous:Fd,photoURL:ic,phoneNumber:Yi,tenantId:Vu,stsTokenManager:yi,createdAt:mf,lastLoginAt:By});return yf&&Array.isArray(yf)&&(_f.providerData=yf.map(mg=>Object.assign({},mg))),Uu&&(_f._redirectEventId=Uu),_f}static _fromIdTokenResponse(h,g,E=!1){return(0,m.Z)(function*(){const T=new $t;T.updateFromServerResponse(g);const R=new B({uid:g.localId,auth:h,stsTokenManager:T,isAnonymous:E});return yield dr(R),R})()}}const G=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,E){var T=this;return(0,m.Z)(function*(){T.storage[g]=E})()}_get(g){var E=this;return(0,m.Z)(function*(){const T=E.storage[g];return void 0===T?null:T})()}_remove(g){var E=this;return(0,m.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function le(y,h,g){return`firebase:${y}:${h}:${g}`}class Y{constructor(h,g,E){this.persistence=h,this.auth=g,this.userKey=E;const{config:T,name:R}=this.auth;this.fullUserKey=le(this.userKey,T.apiKey,R),this.fullPersistenceKey=le("persistence",T.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?B._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,m.Z)(function*(){if(g.persistence===h)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,E="authUser"){return(0,m.Z)(function*(){if(!g.length)return new Y(te(G),h,E);const T=(yield Promise.all(g.map(function(){var Je=(0,m.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let R=T[0]||te(G);const q=le(E,h.config.apiKey,h.name);let ie=null;for(const Je of g)try{const _t=yield Je._get(q);if(_t){const it=B._fromJSON(h,_t);Je!==R&&(ie=it),R=Je;break}}catch(_t){}const Ue=T.filter(Je=>Je._shouldAllowMigration);return R._shouldAllowMigration&&Ue.length?(R=Ue[0],ie&&(yield R._set(q,ie.toJSON())),yield Promise.all(g.map(function(){var Je=(0,m.Z)(function*(_t){if(_t!==R)try{yield _t._remove(q)}catch(it){}});return function(_t){return Je.apply(this,arguments)}}())),new Y(R,h,E)):new Y(R,h,E)})()}}function Ve(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Kt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(mt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Nt(h))return"Blackberry";if(fn(h))return"Webos";if(Jt(h))return"Safari";if((h.includes("chrome/")||br(h))&&!h.includes("edge/"))return"Chrome";if(Cn(h))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function mt(y=(0,O.z$)()){return/firefox\//i.test(y)}function Jt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function br(y=(0,O.z$)()){return/crios\//i.test(y)}function Kt(y=(0,O.z$)()){return/iemobile/i.test(y)}function Cn(y=(0,O.z$)()){return/android/i.test(y)}function Nt(y=(0,O.z$)()){return/blackberry/i.test(y)}function fn(y=(0,O.z$)()){return/webos/i.test(y)}function ir(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function ss(y=(0,O.z$)()){return ir(y)||Cn(y)||fn(y)||Nt(y)||/windows phone/i.test(y)||Kt(y)}function Aa(y,h=[]){let g;switch(y){case"Browser":g=Ve((0,O.z$)());break;case"Worker":g=`${Ve((0,O.z$)())}-${y}`;break;default:g=y}const E=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${E}`}class ai{constructor(h,g,E){this.app=h,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ot(this),this.idTokenSubscription=new Ot(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,g){var E=this;return g&&(this._popupRedirectResolver=te(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var T,R;if(!E._deleted&&(E.persistenceManager=yield Y.create(E,h),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(q){}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g)}})()}initializeCurrentUser(h){var g=this;return(0,m.Z)(function*(){var E;let T=yield g.assertedPersistence.getCurrentUser();if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,q=null==T?void 0:T._redirectEventId,ie=yield g.tryRedirectSignIn(h);(!R||R===q)&&(null==ie?void 0:ie.user)&&(T=ie.user)}return T?T._redirectEventId?(ne(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===T._redirectEventId?g.directlySetCurrentUser(T):g.reloadAndSetCurrentUserOrClear(T)):g.reloadAndSetCurrentUserOrClear(T):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var g=this;return(0,m.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch(T){yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,m.Z)(function*(){try{yield dr(h)}catch(E){if("auth/network-request-failed"!==E.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ge(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,m.Z)(function*(){const E=h?(0,O.m9)(h):null;return E&&ne(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(h){var g=this;return(0,m.Z)(function*(){if(!g._deleted)return h&&ne(g.tenantId===h.tenantId,g,"tenant-id-mismatch"),g.queue((0,m.Z)(function*(){yield g.directlySetCurrentUser(h),g.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(te(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,g,E){return this.registerStateListener(this.authStateSubscription,h,g,E)}onIdTokenChanged(h,g,E){return this.registerStateListener(this.idTokenSubscription,h,g,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var E=this;return(0,m.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(g);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const E=h&&te(h)||g._popupRedirectResolver;ne(E,g,"argument-error"),g.redirectPersistenceManager=yield Y.create(g,[te(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,m.Z)(function*(){var E,T;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===h?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,m.Z)(function*(){if(h===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,E,T){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,E,T):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==h&&(g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh()),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Aa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var g;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function Re(y){return(0,O.m9)(y)}class Ot{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hr(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function jn(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class un{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return We("not implemented")}_getIdTokenResponse(h){return We("not implemented")}_linkToIdToken(h,g){return We("not implemented")}_getReauthenticationResolver(h){return We("not implemented")}}function Pn(y,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,m.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:resetPassword",Qt(y,h))})).apply(this,arguments)}function St(y,h){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,m.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function uo(y,h){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,m.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",Qt(y,h))})).apply(this,arguments)}function fr(){return(fr=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPassword",Qt(y,h))})).apply(this,arguments)}function os(y,h){return as.apply(this,arguments)}function as(){return(as=(0,m.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:sendOobCode",Qt(y,h))})).apply(this,arguments)}function Ii(y,h){return ln.apply(this,arguments)}function ln(){return(ln=(0,m.Z)(function*(y,h){return os(y,h)})).apply(this,arguments)}function au(y,h){return uu.apply(this,arguments)}function uu(){return(uu=(0,m.Z)(function*(y,h){return os(y,h)})).apply(this,arguments)}function Di(y,h){return ui.apply(this,arguments)}function ui(){return(ui=(0,m.Z)(function*(y,h){return os(y,h)})).apply(this,arguments)}function Xc(y,h){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,m.Z)(function*(y,h){return os(y,h)})).apply(this,arguments)}function qr(){return(qr=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithEmailLink",Qt(y,h))})).apply(this,arguments)}function ed(){return(ed=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithEmailLink",Qt(y,h))})).apply(this,arguments)}class cu extends un{constructor(h,g,E,T=null){super("password",E),this._email=h,this._password=g,this._tenantId=T}static _fromEmailAndPassword(h,g){return new cu(h,g,"password")}static _fromEmailAndCode(h,g,E=null){return new cu(h,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function Ns(y,h){return fr.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function lu(y,h){return qr.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,g){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return St(h,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Fh(y,h){return ed.apply(this,arguments)}(h,{idToken:g,email:E._email,oobCode:E._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function $n(y,h){return td.apply(this,arguments)}function td(){return(td=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithIdp",Qt(y,h))})).apply(this,arguments)}class us extends un{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new us(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):De("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T}=g,R=(0,X._T)(g,["providerId","signInMethod"]);if(!E||!T)return null;const q=new us(E,T);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(h){return $n(h,this.buildRequest())}_linkToIdToken(h,g){const E=this.buildRequest();return E.idToken=g,$n(h,E)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,$n(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,O.xO)(g)}return h}}function zp(y,h){return ml.apply(this,arguments)}function ml(){return(ml=(0,m.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:sendVerificationCode",Qt(y,h))})).apply(this,arguments)}function Os(){return(Os=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",Qt(y,h))})).apply(this,arguments)}function nd(){return(nd=(0,m.Z)(function*(y,h){const g=yield Or(y,"POST","/v1/accounts:signInWithPhoneNumber",Qt(y,h));if(g.temporaryProof)throw is(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Kp={USER_NOT_FOUND:"user-not-found"};function rd(){return(rd=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",Qt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Kp)})).apply(this,arguments)}class jo extends un{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new jo({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new jo({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function yl(y,h){return Os.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Wp(y,h){return nd.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Lh(y,h){return rd.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:E,verificationCode:T}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:E,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:E,phoneNumber:T,temporaryProof:R}=h;return E||g||T||R?new jo({verificationId:g,verificationCode:E,phoneNumber:T,temporaryProof:R}):null}}class lo{constructor(h){var g,E,T,R,q,ie;const Ue=(0,O.zd)((0,O.pd)(h)),Je=null!==(g=Ue.apiKey)&&void 0!==g?g:null,_t=null!==(E=Ue.oobCode)&&void 0!==E?E:null,it=function dy(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ue.mode)&&void 0!==T?T:null);ne(Je&&_t&&it,"argument-error"),this.apiKey=Je,this.operation=it,this.code=_t,this.continueUrl=null!==(R=Ue.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Ue.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ie=Ue.tenantId)&&void 0!==ie?ie:null}static parseLink(h){const g=function du(y){const h=(0,O.zd)((0,O.pd)(y)).link,g=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||g||h||y}(h);try{return new lo(g)}catch(E){return null}}}let _l=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return cu._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const T=lo.parseLink(E);return ne(T,"argument-error"),cu._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ps{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class zr extends Ps{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class $o extends zr{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return ne("providerId"in g&&"signInMethod"in g,"argument-error"),us._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ne(h.idToken||h.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return $o.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return $o.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:R,nonce:q,providerId:ie}=h;if(!E&&!T&&!g&&!R||!ie)return null;try{return new $o(ie)._credential({idToken:g,accessToken:E,nonce:q,pendingToken:R})}catch(Ue){return null}}}let co=(()=>{class y extends zr{constructor(){super("facebook.com")}static credential(g){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ma=(()=>{class y extends zr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:T}=g;if(!E&&!T)return null;try{return y.credential(E,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),id=(()=>{class y extends zr{constructor(){super("github.com")}static credential(g){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ci extends un{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return $n(h,this.buildRequest())}_linkToIdToken(h,g){const E=this.buildRequest();return E.idToken=g,$n(h,E)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,$n(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T,pendingToken:R}=g;return E&&T&&R&&E===T?new Ci(E,R):null}static _create(h,g){return new Ci(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class li extends Ps{constructor(h){ne(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return li.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return li.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Ci.fromJSON(h);return ne(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:E}=h;if(!g||!E)return null;try{return Ci._create(E,g)}catch(T){return null}}}let hu=(()=>{class y extends zr{constructor(){super("twitter.com")}static credential(g,E){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=g;if(!E||!T)return null;try{return y.credential(E,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function fu(y,h){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signUp",Qt(y,h))})).apply(this,arguments)}class pr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,E,T=!1){return(0,m.Z)(function*(){const R=yield B._fromIdTokenResponse(h,E,T),q=Uh(E);return new pr({user:R,providerId:q,_tokenResponse:E,operationType:g})})()}static _forOperation(h,g,E){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const T=Uh(E);return new pr({user:h,providerId:T,_tokenResponse:E,operationType:g})})()}}function Uh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function sd(){return(sd=(0,m.Z)(function*(y){var h;const g=Re(y);if(yield g._initializationPromise,null===(h=g.currentUser)||void 0===h?void 0:h.isAnonymous)return new pr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield fu(g,{returnSecureToken:!0}),T=yield pr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class gu extends O.ZR{constructor(h,g,E,T){var R;super(g.code,g.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,gu.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,g,E,T){return new gu(h,g,E,T)}}function mu(y,h,g,E){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?gu._fromErrorAndOperation(y,R,h,E):R})}function ls(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function vl(){return(vl=(0,m.Z)(function*(y,h){const g=(0,O.m9)(y);yield Fs(!0,g,h);const{providerUserInfo:E}=yield nr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),T=ls(E||[]);return g.providerData=g.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function yn(y,h){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,m.Z)(function*(y,h,g=!1){const E=yield cr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return pr._forOperation(y,"link",E)})).apply(this,arguments)}function Fs(y,h,g){return cn.apply(this,arguments)}function cn(){return(cn=(0,m.Z)(function*(y,h,g){yield dr(h);const T=!1===y?"provider-already-linked":"no-such-provider";ne(ls(h.providerData).has(g)===y,h.auth,T)})).apply(this,arguments)}function od(y,h){return ho.apply(this,arguments)}function ho(){return(ho=(0,m.Z)(function*(y,h,g=!1){const{auth:E}=y,T="reauthenticate";try{const R=yield cr(y,mu(E,T,h,y),g);ne(R.idToken,E,"internal-error");const q=rt(R.idToken);ne(q,E,"internal-error");const{sub:ie}=q;return ne(y.uid===ie,E,"user-mismatch"),pr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(E,"user-mismatch"),R}})).apply(this,arguments)}function fo(y,h){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,m.Z)(function*(y,h,g=!1){const E="signIn",T=yield mu(y,E,h),R=yield pr._fromIdTokenResponse(y,E,T);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function kn(y,h){return Na.apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(y,h){return fo(Re(y),h)})).apply(this,arguments)}function Ti(y,h){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,m.Z)(function*(y,h){const g=(0,O.m9)(y);return yield Fs(!1,g,h.providerId),yn(g,h)})).apply(this,arguments)}function Ls(y,h){return cs.apply(this,arguments)}function cs(){return(cs=(0,m.Z)(function*(y,h){return od((0,O.m9)(y),h)})).apply(this,arguments)}function yu(y,h){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,m.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithCustomToken",Qt(y,h))})).apply(this,arguments)}function Us(){return(Us=(0,m.Z)(function*(y,h){const g=Re(y),E=yield yu(g,{token:h,returnSecureToken:!0}),T=yield pr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class ht{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?_u._fromServerResponse(h,g):De(h,"internal-error")}}class _u extends ht{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new _u(g)}}function Ra(y,h,g){var E;ne((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),ne(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ne(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(ne(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Eu(){return(Eu=(0,m.Z)(function*(y,h,g){const E=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:h};g&&Ra(E,T,g),yield au(E,T)})).apply(this,arguments)}function El(){return(El=(0,m.Z)(function*(y,h,g){yield Pn((0,O.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function be(){return(be=(0,m.Z)(function*(y,h){yield uo((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Vt(y,h){return bl.apply(this,arguments)}function bl(){return(bl=(0,m.Z)(function*(y,h){const g=(0,O.m9)(y),E=yield Pn(g,{oobCode:h}),T=E.requestType;switch(ne(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(E.mfaInfo,g,"internal-error");default:ne(E.email,g,"internal-error")}let R=null;return E.mfaInfo&&(R=ht._fromServerResponse(Re(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Go(){return(Go=(0,m.Z)(function*(y,h){const{data:g}=yield Vt((0,O.m9)(y),h);return g.email})).apply(this,arguments)}function Zr(){return(Zr=(0,m.Z)(function*(y,h,g){const E=Re(y),T=yield fu(E,{returnSecureToken:!0,email:h,password:g}),R=yield pr._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function ad(){return(ad=(0,m.Z)(function*(y,h,g){const E=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};ne(g.handleCodeInApp,E,"argument-error"),g&&Ra(E,T,g),yield Di(E,T)})).apply(this,arguments)}function Bs(){return(Bs=(0,m.Z)(function*(y,h,g){const E=(0,O.m9)(y),T=_l.credentialWithLink(h,g||Fe());return ne(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),kn(E,T)})).apply(this,arguments)}function gr(y,h){return ci.apply(this,arguments)}function ci(){return(ci=(0,m.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:createAuthUri",Qt(y,h))})).apply(this,arguments)}function js(){return(js=(0,m.Z)(function*(y,h){const E={identifier:h,continueUri:Dt()?Fe():"http://localhost"},{signinMethods:T}=yield gr((0,O.m9)(y),E);return T||[]})).apply(this,arguments)}function Tl(){return(Tl=(0,m.Z)(function*(y,h){const g=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Ra(g.auth,T,h);const{email:R}=yield Ii(g.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Cu(){return(Cu=(0,m.Z)(function*(y,h,g){const E=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&Ra(E.auth,R,g);const{email:q}=yield Xc(E.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function Al(y,h){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Sl(){return(Sl=(0,m.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const E=(0,O.m9)(y),R={idToken:yield E.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},q=yield cr(E,Al(E.auth,R));E.displayName=q.displayName||null,E.photoURL=q.photoUrl||null;const ie=E.providerData.find(({providerId:Ue})=>"password"===Ue);ie&&(ie.displayName=E.displayName,ie.photoURL=E.photoURL),yield E._updateTokensIfNecessary(q)})).apply(this,arguments)}function xl(y,h,g){return po.apply(this,arguments)}function po(){return(po=(0,m.Z)(function*(y,h,g){const{auth:E}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const q=yield cr(y,St(E,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class go{constructor(h,g,E={}){this.isNewUser=h,this.providerId=g,this.profile=E}}class cd extends go{constructor(h,g,E,T){super(h,g,E),this.username=T}}class dd extends go{constructor(h,g){super(h,"facebook.com",g)}}class mo extends cd{constructor(h,g){super(h,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class $s extends go{constructor(h,g){super(h,"google.com",g)}}class Nl extends cd{constructor(h,g,E){super(h,"twitter.com",g,E)}}function Cr(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function ld(y){var h,g;if(!y)return null;const{providerId:E}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const q=null===(g=null===(h=rt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new go(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!E)return null;switch(E){case"facebook.com":return new dd(R,T);case"github.com":return new mo(R,T);case"google.com":return new $s(R,T);case"twitter.com":return new Nl(R,T,y.screenName||null);case"custom":case"anonymous":return new go(R,null);default:return new go(R,E,T)}}(g)}class ds{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new ds("enroll",h)}static _fromMfaPendingCredential(h){return new ds("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,E;if(null==h?void 0:h.multiFactorSession){if(null===(g=h.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ds._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return ds._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Pa{constructor(h,g,E){this.session=h,this.hints=g,this.signInResolver=E}static _fromError(h,g){const E=Re(h),T=g.customData._serverResponse,R=(T.mfaInfo||[]).map(ie=>ht._fromServerResponse(E,ie));ne(T.mfaPendingCredential,E,"internal-error");const q=ds._fromMfaPendingCredential(T.mfaPendingCredential);return new Pa(q,R,function(){var ie=(0,m.Z)(function*(Ue){const Je=yield Ue._process(E,q);delete T.mfaInfo,delete T.mfaPendingCredential;const _t=Object.assign(Object.assign({},T),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(g.operationType){case"signIn":const it=yield pr._fromIdTokenResponse(E,g.operationType,_t);return yield E._updateCurrentUser(it.user),it;case"reauthenticate":return ne(g.user,E,"internal-error"),pr._forOperation(g.user,g.operationType,_t);default:De(E,"internal-error")}});return function(Ue){return ie.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,m.Z)(function*(){return g.signInResolver(h)})()}}function Hn(y,h){return zt(y,"POST","/v2/accounts/mfaEnrollment:start",Qt(y,h))}class hs{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>ht._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new hs(h)}getSession(){var h=this;return(0,m.Z)(function*(){return ds._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var E=this;return(0,m.Z)(function*(){const T=h,R=yield E.getSession(),q=yield cr(E.user,T._process(E.user.auth,R,g));return yield E.user._updateTokensIfNecessary(q),E.user.reload()})()}unenroll(h){var g=this;return(0,m.Z)(function*(){const E="string"==typeof h?h:h.uid,T=yield g.user.getIdToken(),R=yield cr(g.user,function Yp(y,h){return zt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Qt(y,h))}(g.user.auth,{idToken:T,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==E),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const Wo=new WeakMap,Pl="__sak";class yo{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Pl,"1"),this.storage.removeItem(Pl),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ln=(()=>{class y extends yo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pd(){const y=(0,O.z$)();return Jt(y)||ir(y)}()&&function Yn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ss(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),R=this.localCache[E];T!==R&&g(E,R,T)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((ie,Ue,Je)=>{this.notifyListeners(ie,Je)});const T=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(T);if(g.newValue!==ie)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!E)return}const R=()=>{const ie=this.storage.getItem(T);!E&&this.localCache[T]===ie||this.notifyListeners(T,ie)},q=this.storage.getItem(T);!function Ta(){return(0,O.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,E){this.localCache[g]=E;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var T=()=>super._set,R=this;return(0,m.Z)(function*(){yield T().call(R,g,E),R.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,T=this;return(0,m.Z)(function*(){const R=yield E().call(T,g);return T.localCache[g]=JSON.stringify(R),R})()}_remove(g){var E=()=>super._remove,T=this;return(0,m.Z)(function*(){yield E().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),mr=(()=>{class y extends yo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let Qr=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(R=>R.isListeningto(g));if(E)return E;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,m.Z)(function*(){const T=g,{eventId:R,eventType:q,data:ie}=T.data,Ue=E.handlersMap[q];if(!(null==Ue?void 0:Ue.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Je=Array.from(Ue).map(function(){var it=(0,m.Z)(function*(xn){return xn(T.origin,ie)});return function(xn){return it.apply(this,arguments)}}()),_t=yield function Yr(y){return Promise.all(y.map(function(){var h=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return h.apply(this,arguments)}}()))}(Je);T.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:_t})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ko(y="",h=10){let g="";for(let E=0;E<h;E++)g+=Math.floor(10*Math.random());return y+g}class gd{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,E=50){var T=this;return(0,m.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,ie;return new Promise((Ue,Je)=>{const _t=Ko("",20);R.port1.start();const it=setTimeout(()=>{Je(new Error("unsupported_event"))},E);ie={messageChannel:R,onMessage(xn){const Yi=xn;if(Yi.data.eventId===_t)switch(Yi.data.status){case"ack":clearTimeout(it),q=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ue(Yi.data.response);break;default:clearTimeout(it),clearTimeout(q),Je(new Error("invalid_response"))}}},T.handlers.add(ie),R.port1.addEventListener("message",ie.onMessage),T.target.postMessage({eventType:h,eventId:_t,data:g},[R.port2])}).finally(()=>{ie&&T.removeMessageHandler(ie)})})()}}function gn(){return window}function Si(){return void 0!==gn().WorkerGlobalScope&&"function"==typeof gn().importScripts}function di(){return(di=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const kl="firebaseLocalStorageDb",_o="firebaseLocalStorage",Gn="fbase_key";class fs{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Zo(y,h){return y.transaction([_o],h?"readwrite":"readonly").objectStore(_o)}function Gs(){const y=indexedDB.open(kl,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(_o,{keyPath:Gn})}catch(T){g(T)}}),y.addEventListener("success",(0,m.Z)(function*(){const E=y.result;E.objectStoreNames.contains(_o)?h(E):(E.close(),yield function hi(){const y=indexedDB.deleteDatabase(kl);return new fs(y).toPromise()}(),h(yield Gs()))}))})}function ka(y,h,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,m.Z)(function*(y,h,g){const E=Zo(y,!0).put({[Gn]:h,value:g});return new fs(E).toPromise()})).apply(this,arguments)}function qs(){return(qs=(0,m.Z)(function*(y,h){const g=Zo(y,!1).get(h),E=yield new fs(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Gi(y,h){const g=Zo(y,!0).delete(h);return new fs(g).toPromise()}const Mi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield Gs()),g.db})()}_withRetries(g){var E=this;return(0,m.Z)(function*(){let T=0;for(;;)try{const R=yield E._openDb();return yield g(R)}catch(R){if(T++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return Si()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=Qr._getInstance(function md(){return Si()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(T,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(T,R){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var E,T;if(g.activeServiceWorker=yield function Au(){return di.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new gd(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Pt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Gs();return yield ka(g,Pl,"1"),yield Gi(g,Pl),!0}catch(g){}return!1})()}_withPendingWrite(g){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var T=this;return(0,m.Z)(function*(){return T._withPendingWrite((0,m.Z)(function*(){return yield T._withRetries(R=>ka(R,g,E)),T.localCache[g]=E,T.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,m.Z)(function*(){const T=yield E._withRetries(R=>function Fl(y,h){return qs.apply(this,arguments)}(R,g));return E.localCache[g]=T,T})()}_remove(g){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(T=>Gi(T,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const E=yield g._withRetries(q=>{const ie=Zo(q,!1).getAll();return new fs(ie).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:q,value:ie}of E)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(ie)&&(g.notifyListeners(q,ie),T.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),T.push(q));return T})()}notifyListeners(g,E){this.localCache[g]=E;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Qo(y,h){return zt(y,"POST","/v2/accounts/mfaSignIn:start",Qt(y,h))}function xi(){return(xi=(0,m.Z)(function*(y){return(yield zt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vn(y){return new Promise((h,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=h,E.onerror=T=>{const R=ye("internal-error");R.customData=T,g(R)},E.type="text/javascript",E.charset="UTF-8",function vd(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(E)})}function Jo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Tr=1e12;class ps{constructor(h){this.auth=h,this.counter=Tr,this._widgets=new Map}render(h,g){const E=this.counter;return this._widgets.set(E,new qi(h,this.auth.name,g||{})),this.counter++,E}reset(h){var g;const E=h||Tr;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Tr))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,m.Z)(function*(){var E;return null===(E=g._widgets.get(h||Tr))||void 0===E||E.execute(),""})()}}class qi{constructor(h,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;ne(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function An(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zs=Jo("rcb"),Ed=new qt(3e4,6e4);class Jp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!gn().grecaptcha}load(h,g=""){return ne(function Xp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(gn().grecaptcha):new Promise((E,T)=>{const R=gn().setTimeout(()=>{T(ye(h,"network-request-failed"))},Ed.get());gn()[zs]=()=>{gn().clearTimeout(R),delete gn()[zs];const ie=gn().grecaptcha;if(!ie)return void T(ye(h,"internal-error"));const Ue=ie.render;ie.render=(Je,_t)=>{const it=Ue(Je,_t);return this.counter++,it},this.hostLanguage=g,E(ie)},Vn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:zs,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),T(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!gn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class eg{load(h){return(0,m.Z)(function*(){return new ps(h)})()}clearedOneInstance(){}}const Ws="recaptcha",Jr={theme:"light",type:"image"};class tg{constructor(h,g=Object.assign({},Jr),E){this.parameters=g,this.type=Ws,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Re(E),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new eg:new Jp,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(g)||new Promise(R=>{const q=ie=>{!ie||(h.tokenChangeListeners.delete(q),R(ie))};h.tokenChangeListeners.add(q),h.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof h)h(g);else if("string"==typeof h){const E=gn()[h];"function"==typeof E&&E(g)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){ne(Dt()&&!Si(),h.auth,"internal-error"),yield function Ks(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function kr(y){return xi.apply(this,arguments)}(h.auth);ne(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gs{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=jo._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function wn(){return(wn=(0,m.Z)(function*(y,h,g){const E=Re(y),T=yield Ar(E,h,(0,O.m9)(g));return new gs(T,R=>kn(E,R))})).apply(this,arguments)}function ea(){return(ea=(0,m.Z)(function*(y,h,g){const E=(0,O.m9)(y);yield Fs(!1,E,"phone");const T=yield Ar(E.auth,h,(0,O.m9)(g));return new gs(T,R=>Ti(E,R))})).apply(this,arguments)}function Ul(){return(Ul=(0,m.Z)(function*(y,h,g){const E=(0,O.m9)(y),T=yield Ar(E.auth,h,(0,O.m9)(g));return new gs(T,R=>Ls(E,R))})).apply(this,arguments)}function Ar(y,h,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(y,h,g){var E;const T=yield g.verify();try{let R;if(ne("string"==typeof T,y,"argument-error"),ne(g.type===Ws,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const q=R.session;if("phoneNumber"in R)return ne("enroll"===q.type,y,"internal-error"),(yield Hn(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ne("signin"===q.type,y,"internal-error");const ie=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return ne(ie,y,"missing-multi-factor-info"),(yield Qo(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:ie,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield zp(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return q}}finally{g._reset()}})).apply(this,arguments)}function ms(){return(ms=(0,m.Z)(function*(y,h){yield yn((0,O.m9)(y),h)})).apply(this,arguments)}let Ri=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Re(g)}verifyPhoneNumber(g,E){return Ar(this.auth,g,(0,O.m9)(E))}static credential(g,E){return jo._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:T}=g;return E&&T?jo._fromTokenResponse(E,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function zi(y,h){return h?te(h):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class La extends un{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return $n(h,this._buildIdpRequest())}_linkToIdToken(h,g){return $n(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return $n(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function jl(y){return fo(y.auth,new La(y),y.bypassAuthState)}function $l(y){const{auth:h,user:g}=y;return ne(g,h,"internal-error"),od(g,new La(y),y.bypassAuthState)}function kt(y){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,m.Z)(function*(y){const{auth:h,user:g}=y;return ne(g,h,"internal-error"),yn(g,new La(y),y.bypassAuthState)})).apply(this,arguments)}class Qn{constructor(h,g,E,T,R=!1){this.auth=h,this.resolver=E,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,m.Z)(function*(E,T){h.pendingPromise={resolve:E,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(E,T){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:R,tenantId:q,error:ie,type:Ue}=h;if(ie)return void g.reject(ie);const Je={auth:g.auth,requestUri:E,sessionId:T,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ue)(Je))}catch(_t){g.reject(_t)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return jl;case"linkViaPopup":case"linkViaRedirect":return kt;case"reauthViaPopup":case"reauthViaRedirect":return $l;default:De(this.auth,"internal-error")}}resolve(h){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gl=new qt(2e3,1e4);function wd(){return(wd=(0,m.Z)(function*(y,h,g){const E=Re(y);He(y,h,Ps);const T=zi(E,g);return new Ki(E,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Mu(){return(Mu=(0,m.Z)(function*(y,h,g){const E=(0,O.m9)(y);He(E.auth,h,Ps);const T=zi(E.auth,g);return new Ki(E.auth,"reauthViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}function xu(){return(xu=(0,m.Z)(function*(y,h,g){const E=(0,O.m9)(y);He(E.auth,h,Ps);const T=zi(E.auth,g);return new Ki(E.auth,"linkViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}let Ki=(()=>{class y extends Qn{constructor(g,E,T,R,q){super(g,E,R,q),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const E=yield g.execute();return ne(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,m.Z)(function*(){J(1===g.filter.length,"Popup operations only handle one event");const E=Ko();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(ye(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Gl.get())};g()}}return y.currentPopupAction=null,y})();const Zi=new Map;class Jn extends Qn{constructor(h,g,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,m.Z)(function*(){let E=Zi.get(g.auth._key());if(!E){try{const R=(yield function pi(y,h){return ql.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;E=()=>Promise.resolve(R)}catch(T){E=()=>Promise.reject(T)}Zi.set(g.auth._key(),E)}return g.bypassAuthState||Zi.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(E,h);if("unknown"!==h.type){if(h.eventId){const T=yield E.auth._redirectUserForId(h.eventId);if(T)return E.user=T,g().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function ql(){return(ql=(0,m.Z)(function*(y,h){const g=C(h),E=D(y);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(g));return yield E._remove(g),T})).apply(this,arguments)}function Eo(y,h){return ta.apply(this,arguments)}function ta(){return(ta=(0,m.Z)(function*(y,h){return D(y)._set(C(h),"true")})).apply(this,arguments)}function D(y){return te(y._redirectPersistence)}function C(y){return le("pendingRedirect",y.config.apiKey,y.name)}function W(){return(W=(0,m.Z)(function*(y,h,g){const E=Re(y);He(y,h,Ps);const T=zi(E,g);return yield Eo(T,E),T._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function Me(){return(Me=(0,m.Z)(function*(y,h,g){const E=(0,O.m9)(y);He(E.auth,h,Ps);const T=zi(E.auth,g);yield Eo(T,E.auth);const R=yield wo(E);return T._openRedirect(E.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Rt(){return(Rt=(0,m.Z)(function*(y,h,g){const E=(0,O.m9)(y);He(E.auth,h,Ps);const T=zi(E.auth,g);yield Fs(!1,E,h.providerId),yield Eo(T,E.auth);const R=yield wo(E);return T._openRedirect(E.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function qn(){return(qn=(0,m.Z)(function*(y,h){return yield Re(y)._initializationPromise,Mn(y,h,!1)})).apply(this,arguments)}function Mn(y,h){return na.apply(this,arguments)}function na(){return(na=(0,m.Z)(function*(y,h,g=!1){const E=Re(y),T=zi(E,h),q=yield new Jn(E,T,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield E._persistUserIfCurrent(q.user),yield E._setRedirectUser(null,h)),q})).apply(this,arguments)}function wo(y){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,m.Z)(function*(y){const h=Ko(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Oi{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(g=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function zl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Id(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var E;if(h.error&&!Id(h)){const T=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(ye(this.auth,T))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const E=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bo(h))}saveEventToCache(h){this.cachedEventUids.add(bo(h)),this.lastProcessedEventTime=Date.now()}}function bo(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Id({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Wl(y){return Va.apply(this,arguments)}function Va(){return(Va=(0,m.Z)(function*(y,h={}){return zt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const rg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fy=/^https?/;function ys(){return(ys=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Wl(y);for(const g of h)try{if(Kl(g))return}catch(E){}De(y,"unauthorized-domain")})).apply(this,arguments)}function Kl(y){const h=Fe(),{protocol:g,hostname:E}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===E}if(!fy.test(g))return!1;if(rg.test(y))return E===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const gy=new qt(3e4,6e4);function my(){const y=gn().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Dd=null;function yy(y){return Dd=Dd||function ig(y){return new Promise((h,g)=>{var E,T,R;function q(){my(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{my(),g(ye(y,"network-request-failed"))},timeout:gy.get()})}if(null===(T=null===(E=gn().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=gn().gapi)||void 0===R?void 0:R.load)){const ie=Jo("iframefcb");return gn()[ie]=()=>{gapi.load?q():g(ye(y,"network-request-failed"))},Vn(`https://apis.google.com/js/api.js?onload=${ie}`).catch(Ue=>g(Ue))}q()}}).catch(h=>{throw Dd=null,h})}(y),Dd}const Hh=new qt(5e3,15e3),Do={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ua(y){const h=y.config;ne(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?tr(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},T=Cd.get(y.config.apiHost);T&&(E.eid=T);const R=y._getFrameworks();return R.length&&(E.fw=R.join(",")),`${g}?${(0,O.xO)(E).slice(1)}`}function ra(){return ra=(0,m.Z)(function*(y){const h=yield yy(y),g=gn().gapi;return ne(g,y,"internal-error"),h.open({where:document.body,url:Ua(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Do,dontclear:!0},E=>new Promise(function(){var T=(0,m.Z)(function*(R,q){yield E.restyle({setHideOnLeave:!1});const ie=ye(y,"network-request-failed"),Ue=gn().setTimeout(()=>{q(ie)},Hh.get());function Je(){gn().clearTimeout(Ue),R(E)}E.ping(Je).then(Je,()=>{q(ie)})});return function(R,q){return T.apply(this,arguments)}}()))}),ra.apply(this,arguments)}const vy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sd{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Wh(y,h,g,E,T,R){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:oe.SDK_VERSION,eventId:T};if(h instanceof Ps){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ue,Je]of Object.entries(R||{}))q[Ue]=Je}if(h instanceof zr){const Ue=h.getScopes().filter(Je=>""!==Je);Ue.length>0&&(q.scopes=Ue.join(","))}y.tenantId&&(q.tid=y.tenantId);const ie=q;for(const Ue of Object.keys(ie))void 0===ie[Ue]&&delete ie[Ue];return`${function wy({config:y}){return y.emulator?tr(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ie).slice(1)}`}const Ys="webStorageSupport";class Kh extends class sg{constructor(h){this.factorId=h}_process(h,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,E);case"signin":return this._finalizeSignIn(h,g.credential);default:return We("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Kh(h)}_finalizeEnroll(h,g,E){return function hd(y,h){return zt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Qt(y,h))}(h,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Fa(y,h){return zt(y,"POST","/v2/accounts/mfaSignIn:finalize",Qt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let by=(()=>{class y{constructor(){}static assertion(g){return Kh._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Iy="@firebase/auth",Zh="0.19.12";class og{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(E=>{var T;h((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qs(){return window}function Pu(){return(Pu=(0,m.Z)(function*(y,h,g){var E;const{BuildInfo:T}=Qs();J(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Ba(h.sessionId),q={};return ir()?q.ibi=T.packageName:Cn()?q.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(q.appDisplayName=T.displayName),q.sessionId=R,Wh(y,g,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,q)})).apply(this,arguments)}function Pi(){return(Pi=(0,m.Z)(function*(y){const{BuildInfo:h}=Qs(),g={};ir()?g.iosBundleId=h.packageName:Cn()?g.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield Wl(y,g)})).apply(this,arguments)}function xd(){return(xd=(0,m.Z)(function*(y,h,g){const{cordova:E}=Qs();let T=()=>{};try{yield new Promise((R,q)=>{let ie=null;function Ue(){var it;R();const xn=null===(it=E.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof xn&&xn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Je(){ie||(ie=window.setTimeout(()=>{q(ye(y,"redirect-cancelled-by-user"))},2e3))}function _t(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}h.addPassiveListener(Ue),document.addEventListener("resume",Je,!1),Cn()&&document.addEventListener("visibilitychange",_t,!1),T=()=>{h.removePassiveListener(Ue),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",_t,!1),ie&&window.clearTimeout(ie)}})}finally{T()}})).apply(this,arguments)}function Ba(y){return ug.apply(this,arguments)}function ug(){return(ug=(0,m.Z)(function*(y){const h=ku(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ku(y){if(J(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}!function Cy(y){(0,oe._registerComponent)(new re.wA("auth",(h,{options:g})=>{const E=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:R,authDomain:q}=E.options;return((ie,Ue)=>{ne(R&&!R.includes(":"),"invalid-api-key",{appName:ie.name}),ne(!(null==q?void 0:q.includes(":")),"argument-error",{appName:ie.name});const Je={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Aa(y)},_t=new ai(ie,Ue,Je);return function pe(y,h){const g=(null==h?void 0:h.persistence)||[],E=(Array.isArray(g)?g:[g]).map(te);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(_t,g),_t})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,E)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new re.wA("auth-internal",h=>{const g=Re(h.getProvider("auth").getImmediate());return new og(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Iy,Zh,function Dy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(Iy,Zh,"esm2017")}("Browser");class Xh extends Oi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function Ql(y){return sa.apply(this,arguments)}function sa(){return(sa=(0,m.Z)(function*(y){const h=yield Fu()._get(tf(y));return h&&(yield Fu()._remove(tf(y))),h})).apply(this,arguments)}function Jl(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*h.length);y.push(h.charAt(E))}return y.join("")}function Fu(){return te(Ln)}function tf(y){return le("authEvent",y.config.apiKey,y.name)}function Rd(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function of(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function Od(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function cg(y=(0,O.z$)()){return!("file:"!==Od()&&"ionic:"!==Od()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sr(){try{const y=self.localStorage,h=Ko();if(y)return y.setItem(h,"1"),y.removeItem(h),!function oa(y=(0,O.z$)()){return function xy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ny(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Co()&&(0,O.hl)()}return!1}function Co(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function tc(){return(function My(){return"http:"===Od()||"https:"===Od()}()||(0,O.ru)()||cg())&&!function Pd(){return(0,O.b$)()||(0,O.UG)()}()&&Sr()&&!Co()}function af(){return cg()&&"undefined"!=typeof document}function ja(){return(ja=(0,m.Z)(function*(){return!!af()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const ki={LOCAL:"local",NONE:"none",SESSION:"session"},$a=ne,lf="persistence";function Ha(y){return cf.apply(this,arguments)}function cf(){return(cf=(0,m.Z)(function*(y){yield y._initializationPromise;const h=nc(),g=le(lf,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function nc(){var y;try{return(null===(y=function uf(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Ry=ne;class mi{constructor(){this.browserResolver=te(class ia{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mr,this._completeRedirectFn=Mn}_openPopup(h,g,E,T){var R=this;return(0,m.Z)(function*(){var q;J(null===(q=R.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ie=Wh(h,g,E,Fe(),T);return function Md(y,h,g,E=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),q=Math.max((window.screen.availWidth-E)/2,0).toString();let ie="";const Ue=Object.assign(Object.assign({},vy),{width:E.toString(),height:T.toString(),top:R,left:q}),Je=(0,O.z$)().toLowerCase();g&&(ie=br(Je)?"_blank":g),mt(Je)&&(h=h||"http://localhost",Ue.scrollbars="yes");const _t=Object.entries(Ue).reduce((xn,[Yi,ic])=>`${xn}${Yi}=${ic},`,"");if(function ou(y=(0,O.z$)()){var h;return ir(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Je)&&"_self"!==ie)return function zh(y,h){const g=document.createElement("a");g.href=y,g.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(h||"",ie),new Sd(null);const it=window.open(h||"",ie,_t);ne(it,y,"popup-blocked");try{it.focus()}catch(xn){}return new Sd(it)}(h,ie,Ko())})()}_openRedirect(h,g,E,T){var R=this;return(0,m.Z)(function*(){return yield R._originValidation(h),function $h(y){gn().location.href=y}(Wh(h,g,E,Fe(),T)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:T,promise:R}=this.eventManagers[g];return T?Promise.resolve(T):(J(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(h);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(h){var g=this;return(0,m.Z)(function*(){const E=yield function _y(y){return ra.apply(this,arguments)}(h),T=new Oi(h);return E.register("authEvent",R=>(ne(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:T},g.iframes[h._key()]=E,T})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Ys,{type:Ys},T=>{var R;const q=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Ys];void 0!==q&&g(!!q),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function py(y){return ys.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return ss()||Jt()||ir()}}),this.cordovaResolver=te(class sf{constructor(){this._redirectPersistence=mr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mn}_initialize(h){var g=this;return(0,m.Z)(function*(){const E=h._key();let T=g.eventManagers.get(E);return T||(T=new Xh(h),g.eventManagers.set(E,T),g.attachCallbackListeners(h,T)),T})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,E,T){var R=this;return(0,m.Z)(function*(){!function Nd(y){var h,g,E,T,R,q,ie,Ue,Je,_t;const it=Qs();ne("function"==typeof(null===(h=null==it?void 0:it.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(void 0!==(null===(g=null==it?void 0:it.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(R=null===(T=null===(E=null==it?void 0:it.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Ue=null===(ie=null===(q=null==it?void 0:it.cordova)||void 0===q?void 0:q.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(_t=null===(Je=null==it?void 0:it.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===_t?void 0:_t.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield R._initialize(h);yield q.initialized(),q.resetRedirect(),function Nu(){Zi.clear()}(),yield R._originValidation(h);const ie=function ef(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:Jl(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(h,E,T);yield function jE(y,h){return Fu()._set(tf(y),h)}(h,ie);const Ue=yield function Yh(y,h,g){return Pu.apply(this,arguments)}(h,ie,g),Je=yield function Yl(y){const{cordova:h}=Qs();return new Promise(g=>{h.plugins.browsertab.isAvailable(E=>{let T=null;E?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function ao(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Ue);return function ag(y,h,g){return xd.apply(this,arguments)}(h,q,Je)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Qh(y){return Pi.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:E,handleOpenURL:T,BuildInfo:R}=Qs(),q=setTimeout((0,m.Z)(function*(){yield Ql(h),g.onEvent(of())}),500),ie=function(){var _t=(0,m.Z)(function*(it){clearTimeout(q);const xn=yield Ql(h);let Yi=null;xn&&(null==it?void 0:it.url)&&(Yi=function Ay(y,h){var g,E;const T=function Xl(y){const h=Rd(y),g=h.link?decodeURIComponent(h.link):void 0,E=Rd(g).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Rd(T).link||T||E||g||y}(h);if(T.includes("/__/auth/callback")){const R=Rd(T),q=R.firebaseError?function nf(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,ie=null===(E=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Ue=ie?ye(ie):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(xn,it.url)),g.onEvent(Yi||of())});return function(xn){return _t.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,ie);const Ue=T,Je=`${R.packageName.toLowerCase()}://`;Qs().handleOpenURL=function(){var _t=(0,m.Z)(function*(it){if(it.toLowerCase().startsWith(Je)&&ie({url:it}),"function"==typeof Ue)try{Ue(it)}catch(xn){console.error(xn)}});return function(it){return _t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=mr,this._completeRedirectFn=Mn}_initialize(h){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,E,T){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,g,E,T)})()}_openRedirect(h,g,E,T){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,g,E,T)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return af()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ry(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Lr(){return ja.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function fg(y){return y.unwrap()}function Ga(y){return pg(y)}function pg(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ri.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=Ma;break;case"facebook.com":E=co;break;case"github.com":E=id;break;case"twitter.com":E=hu;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:ie,nonce:Ue}=h;return R||q||T||ie?ie?g.startsWith("saml.")?Ci._create(g,ie):us._fromParams({providerId:g,signInMethod:g,pendingToken:ie,idToken:T,accessToken:R}):new $o(g).credential({idToken:T,accessToken:R,rawNonce:Ue}):null}return y instanceof O.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Mr(y,h){return h.catch(g=>{throw g instanceof O.ZR&&function Py(y,h){var g;const E=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new ky(y,function Tu(y,h){var g;const E=(0,O.m9)(y),T=h;return ne(h.customData.operationType,E,"argument-error"),ne(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Pa._fromError(E,T)}(y,h));else if(E){const T=pg(h),R=h;T&&(R.credential=T,R.tenantId=E.tenantId||void 0,R.email=E.email||void 0,R.phoneNumber=E.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Ga(g),additionalUserInfo:Cr(g),user:To.getOrCreate(T)}})}function df(y,h){return hf.apply(this,arguments)}function hf(){return(hf=(0,m.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:E=>Mr(y,g.confirm(E))}})).apply(this,arguments)}class ky{constructor(h,g){this.resolver=g,this.auth=function Oy(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Mr(fg(this.auth),this.resolver.resolveSignIn(h))}}class To{constructor(h){this._delegate=h,this.multiFactor=function fd(y){const h=(0,O.m9)(y);return Wo.has(h)||Wo.set(h,hs._fromUser(h)),Wo.get(h)}(h)}static getOrCreate(h){return To.USER_MAP.has(h)||To.USER_MAP.set(h,new To(h)),To.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,m.Z)(function*(){return Mr(g.auth,Ti(g._delegate,h))})()}linkWithPhoneNumber(h,g){var E=this;return(0,m.Z)(function*(){return df(E.auth,function Vl(y,h,g){return ea.apply(this,arguments)}(E._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,m.Z)(function*(){return Mr(g.auth,function Wi(y,h,g){return xu.apply(this,arguments)}(g._delegate,h,mi))})()}linkWithRedirect(h){var g=this;return(0,m.Z)(function*(){return yield Ha(Re(g.auth)),function Ye(y,h,g){return function bt(y,h,g){return Rt.apply(this,arguments)}(y,h,g)}(g._delegate,h,mi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,m.Z)(function*(){return Mr(g.auth,Ls(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return df(this.auth,function ng(y,h,g){return Ul.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return Mr(this.auth,function vo(y,h,g){return Mu.apply(this,arguments)}(this._delegate,h,mi))}reauthenticateWithRedirect(h){var g=this;return(0,m.Z)(function*(){return yield Ha(Re(g.auth)),function ee(y,h,g){return function Se(y,h,g){return Me.apply(this,arguments)}(y,h,g)}(g._delegate,h,mi)})()}sendEmailVerification(h){return function Ai(y,h){return Tl.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,m.Z)(function*(){return yield function xa(y,h){return vl.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Ml(y,h){return xl((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function ud(y,h){return xl((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Bl(y,h){return ms.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function zo(y,h){return Sl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Du(y,h,g){return Cu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}To.USER_MAP=new WeakMap;const rc=ne;let ff=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;rc(T,"invalid-api-key",{appName:g.name}),rc(T,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?mi:void 0;this._delegate=E.initialize({options:{persistence:Fy(T,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?To.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function pn(y,h,g){const E=Re(y);ne(E._canInitEmulator,E,"emulator-config-failed"),ne(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),R=hr(h),{host:q,port:ie}=function Ms(y){const h=hr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const R=T[1];return{host:R,port:jn(E.substr(R.length+1))}}{const[R,q]=E.split(":");return{host:R,port:jn(q)}}}(h);E.config.emulator={url:`${R}//${q}${null===ie?"":`:${ie}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:q,port:ie,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function $i(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function wl(y,h){return be.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Vt(this._delegate,g)}confirmPasswordReset(g,E){return function wu(y,h,g){return El.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var T=this;return(0,m.Z)(function*(){return Mr(T._delegate,function qo(y,h,g){return Zr.apply(this,arguments)}(T._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Iu(y,h){return js.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Cl(y,h){const g=lo.parseLink(h);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){rc(tc(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function Ct(y,h){return qn.apply(this,arguments)}(g._delegate,mi);return E?Mr(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function lg(y,h){Re(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,E,T){const{next:R,error:q,complete:ie}=pf(g,E,T);return this._delegate.onAuthStateChanged(R,q,ie)}onIdTokenChanged(g,E,T){const{next:R,error:q,complete:ie}=pf(g,E,T);return this._delegate.onIdTokenChanged(R,q,ie)}sendSignInLinkToEmail(g,E){return function Dl(y,h,g){return ad.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function vu(y,h,g){return Eu.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,m.Z)(function*(){let T;switch(function dg(y,h){$a(Object.values(ki).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?$a(h!==ki.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?$a(h===ki.NONE,y,"unsupported-persistence-type"):Co()?$a(h===ki.NONE||h===ki.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):$a(h===ki.NONE||Sr(),y,"unsupported-persistence-type")}(E._delegate,g),g){case ki.SESSION:T=mr;break;case ki.LOCAL:T=(yield te(Mi)._isAvailable())?Mi:Ln;break;case ki.NONE:T=G;break;default:return De("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Mr(this._delegate,function pu(y){return sd.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Mr(this._delegate,kn(this._delegate,g))}signInWithCustomToken(g){return Mr(this._delegate,function Vs(y,h){return Us.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return Mr(this._delegate,function Il(y,h,g){return kn((0,O.m9)(y),_l.credential(h,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return Mr(this._delegate,function bu(y,h,g){return Bs.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return df(this._delegate,function Su(y,h,g){return wn.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,m.Z)(function*(){return rc(tc(),E._delegate,"operation-not-supported-in-this-environment"),Mr(E._delegate,function Zs(y,h,g){return wd.apply(this,arguments)}(E._delegate,g,mi))})()}signInWithRedirect(g){var E=this;return(0,m.Z)(function*(){return rc(tc(),E._delegate,"operation-not-supported-in-this-environment"),yield Ha(E._delegate),function N(y,h,g){return function F(y,h,g){return W.apply(this,arguments)}(y,h,g)}(E._delegate,g,mi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function En(y,h){return Go.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ki,y})();function pf(y,h,g){let E=y;"function"!=typeof y&&({next:E,error:h,complete:g}=y);const T=E;return{next:q=>T(q&&To.getOrCreate(q)),error:h,complete:g}}function Fy(y,h){const g=function hg(y,h){const g=nc();if(!g)return[];const E=le(lf,y,h);switch(g.getItem(E)){case ki.NONE:return[G];case ki.LOCAL:return[Mi,mr];case ki.SESSION:return[mr];default:return[]}}(y,h);if("undefined"!=typeof self&&!g.includes(Mi)&&g.push(Mi),"undefined"!=typeof window)for(const E of[Ln,mr])g.includes(E)||g.push(E);return g.includes(G)||g.push(G),g}class gf{constructor(){this.providerId="phone",this._delegate=new Ri(fg(Z.Z.auth()))}static credential(h,g){return Ri.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}gf.PHONE_SIGN_IN_METHOD=Ri.PHONE_SIGN_IN_METHOD,gf.PROVIDER_ID=Ri.PROVIDER_ID;const Ly=ne;class Vy{constructor(h,g,E=Z.Z.app()){var T;Ly(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new tg(h,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function gg(y){y.INTERNAL.registerComponent(new re.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new ff(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:_l,FacebookAuthProvider:co,GithubAuthProvider:id,GoogleAuthProvider:Ma,OAuthProvider:$o,SAMLAuthProvider:li,PhoneAuthProvider:gf,PhoneMultiFactorGenerator:by,RecaptchaVerifier:Vy,TwitterAuthProvider:hu,Auth:ff,AuthCredential:un,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(Z.Z)},8306:(ot,Te,P)=>{P.d(Te,{y:()=>j});var m=P(2961),Z=P(727),O=P(8822),oe=P(4671);var re=P(2416),ce=P(576),ue=P(2806);let j=(()=>{class Ae{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const de=new Ae;return de.source=this,de.operator=Le,de}subscribe(Le,de,we){const Xe=function ze(Ae){return Ae&&Ae instanceof m.Lv||function Q(Ae){return Ae&&(0,ce.m)(Ae.next)&&(0,ce.m)(Ae.error)&&(0,ce.m)(Ae.complete)}(Ae)&&(0,Z.Nn)(Ae)}(Le)?Le:new m.Hp(Le,de,we);return(0,ue.x)(()=>{const{operator:Ke,source:De}=this;Xe.add(Ke?Ke.call(Xe,De):De?this._subscribe(Xe):this._trySubscribe(Xe))}),Xe}_trySubscribe(Le){try{return this._subscribe(Le)}catch(de){Le.error(de)}}forEach(Le,de){return new(de=$(de))((we,Xe)=>{const Ke=new m.Hp({next:De=>{try{Le(De)}catch(ye){Xe(ye),Ke.unsubscribe()}},error:Xe,complete:we});this.subscribe(Ke)})}_subscribe(Le){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(Le)}[O.L](){return this}pipe(...Le){return function fe(Ae){return 0===Ae.length?oe.y:1===Ae.length?Ae[0]:function(Le){return Ae.reduce((de,we)=>we(de),Le)}}(Le)(this)}toPromise(Le){return new(Le=$(Le))((de,we)=>{let Xe;this.subscribe(Ke=>Xe=Ke,Ke=>we(Ke),()=>de(Xe))})}}return Ae.create=Ne=>new Ae(Ne),Ae})();function $(Ae){var Ne;return null!==(Ne=null!=Ae?Ae:re.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(ot,Te,P)=>{P.d(Te,{x:()=>re});var m=P(8306),Z=P(727);const oe=(0,P(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=P(8737),fe=P(2806);let re=(()=>{class ue extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Q=new ce(this,this);return Q.operator=$,Q}_throwIfClosed(){if(this.closed)throw new oe}next($){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next($)}})}error($){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Q}=this;for(;Q.length;)Q.shift().error($)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Q,isStopped:ze,observers:Ae}=this;return Q||ze?Z.Lc:(this.currentObservers=null,Ae.push($),new Z.w0(()=>{this.currentObservers=null,(0,X.P)(Ae,$)}))}_checkFinalizedStatuses($){const{hasError:Q,thrownError:ze,isStopped:Ae}=this;Q?$.error(ze):Ae&&$.complete()}asObservable(){const $=new m.y;return $.source=this,$}}return ue.create=(j,$)=>new ce(j,$),ue})();class ce extends re{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Q||Q.call($,j)}error(j){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Q||Q.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,Q;return null!==(Q=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==Q?Q:Z.Lc}}},2961:(ot,Te,P)=>{P.d(Te,{Hp:()=>Le,Lv:()=>Q});var m=P(576),Z=P(727),O=P(2416),oe=P(7849);function X(){}const fe=ue("C",void 0,void 0);function ue(De,ye,ve){return{kind:De,value:ye,error:ve}}var j=P(3410),$=P(2806);class Q extends Z.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,Z.Nn)(ye)&&ye.add(this)):this.destination=Ke}static create(ye,ve,He){return new Le(ye,ve,He)}next(ye){this.isStopped?Xe(function ce(De){return ue("N",De,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Xe(function re(De){return ue("E",void 0,De)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Xe(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Ae(De,ye){return ze.call(De,ye)}class Ne{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:ve}=this;if(ve.next)try{ve.next(ye)}catch(He){de(He)}}error(ye){const{partialObserver:ve}=this;if(ve.error)try{ve.error(ye)}catch(He){de(He)}else de(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(ve){de(ve)}}}class Le extends Q{constructor(ye,ve,He){let je;if(super(),(0,m.m)(ye)||!ye)je={next:null!=ye?ye:void 0,error:null!=ve?ve:void 0,complete:null!=He?He:void 0};else{let ne;this&&O.v.useDeprecatedNextContext?(ne=Object.create(ye),ne.unsubscribe=()=>this.unsubscribe(),je={next:ye.next&&Ae(ye.next,ne),error:ye.error&&Ae(ye.error,ne),complete:ye.complete&&Ae(ye.complete,ne)}):je=ye}this.destination=new Ne(je)}}function de(De){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(De):(0,oe.h)(De)}function Xe(De,ye){const{onStoppedNotification:ve}=O.v;ve&&j.z.setTimeout(()=>ve(De,ye))}const Ke={closed:!0,next:X,error:function we(De){throw De},complete:X}},727:(ot,Te,P)=>{P.d(Te,{Lc:()=>fe,w0:()=>X,Nn:()=>re});var m=P(576);const O=(0,P(3888).d)(ue=>function($){ue(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Q,ze)=>`${ze+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var oe=P(8737);class X{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ae of $)Ae.remove(this);else $.remove(this);const{initialTeardown:Q}=this;if((0,m.m)(Q))try{Q()}catch(Ae){j=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Ae of ze)try{ce(Ae)}catch(Ne){j=null!=j?j:[],Ne instanceof O?j=[...j,...Ne.errors]:j.push(Ne)}}if(j)throw new O(j)}}add(j){var $;if(j&&j!==this)if(this.closed)ce(j);else{if(j instanceof X){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,oe.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,oe.P)($,j),j instanceof X&&j._removeParent(this)}}X.EMPTY=(()=>{const ue=new X;return ue.closed=!0,ue})();const fe=X.EMPTY;function re(ue){return ue instanceof X||ue&&"closed"in ue&&(0,m.m)(ue.remove)&&(0,m.m)(ue.add)&&(0,m.m)(ue.unsubscribe)}function ce(ue){(0,m.m)(ue)?ue():ue.unsubscribe()}},2416:(ot,Te,P)=>{P.d(Te,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Te,P)=>{P.d(Te,{E:()=>Z});const Z=new(P(8306).y)(X=>X.complete())},8996:(ot,Te,P)=>{P.d(Te,{D:()=>ye});var m=P(8421),Z=P(5363),O=P(9468),fe=P(8306),ce=P(2202),ue=P(576),j=P(9672);function Q(ve,He){if(!ve)throw new Error("Iterable cannot be null");return new fe.y(je=>{(0,j.f)(je,He,()=>{const ne=ve[Symbol.asyncIterator]();(0,j.f)(je,He,()=>{ne.next().then(We=>{We.done?je.complete():je.next(We.value)})},0,!0)})})}var ze=P(3670),Ae=P(8239),Ne=P(1144),Le=P(6495),de=P(2206),we=P(4532),Xe=P(3260);function ye(ve,He){return He?function De(ve,He){if(null!=ve){if((0,ze.c)(ve))return function oe(ve,He){return(0,m.Xf)(ve).pipe((0,O.R)(He),(0,Z.Q)(He))}(ve,He);if((0,Ne.z)(ve))return function re(ve,He){return new fe.y(je=>{let ne=0;return He.schedule(function(){ne===ve.length?je.complete():(je.next(ve[ne++]),je.closed||this.schedule())})})}(ve,He);if((0,Ae.t)(ve))return function X(ve,He){return(0,m.Xf)(ve).pipe((0,O.R)(He),(0,Z.Q)(He))}(ve,He);if((0,de.D)(ve))return Q(ve,He);if((0,Le.T)(ve))return function $(ve,He){return new fe.y(je=>{let ne;return(0,j.f)(je,He,()=>{ne=ve[ce.h](),(0,j.f)(je,He,()=>{let We,J;try{({value:We,done:J}=ne.next())}catch(se){return void je.error(se)}J?je.complete():je.next(We)},0,!0)}),()=>(0,ue.m)(null==ne?void 0:ne.return)&&ne.return()})}(ve,He);if((0,Xe.L)(ve))return function Ke(ve,He){return Q((0,Xe.Q)(ve),He)}(ve,He)}throw(0,we.z)(ve)}(ve,He):(0,m.Xf)(ve)}},8421:(ot,Te,P)=>{P.d(Te,{Xf:()=>ze});var m=P(655),Z=P(1144),O=P(8239),oe=P(8306),X=P(3670),fe=P(2206),re=P(4532),ce=P(6495),ue=P(3260),j=P(576),$=P(7849),Q=P(8822);function ze(De){if(De instanceof oe.y)return De;if(null!=De){if((0,X.c)(De))return function Ae(De){return new oe.y(ye=>{const ve=De[Q.L]();if((0,j.m)(ve.subscribe))return ve.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,Z.z)(De))return function Ne(De){return new oe.y(ye=>{for(let ve=0;ve<De.length&&!ye.closed;ve++)ye.next(De[ve]);ye.complete()})}(De);if((0,O.t)(De))return function Le(De){return new oe.y(ye=>{De.then(ve=>{ye.closed||(ye.next(ve),ye.complete())},ve=>ye.error(ve)).then(null,$.h)})}(De);if((0,fe.D)(De))return we(De);if((0,ce.T)(De))return function de(De){return new oe.y(ye=>{for(const ve of De)if(ye.next(ve),ye.closed)return;ye.complete()})}(De);if((0,ue.L)(De))return function Xe(De){return we((0,ue.Q)(De))}(De)}throw(0,re.z)(De)}function we(De){return new oe.y(ye=>{(function Ke(De,ye){var ve,He,je,ne;return(0,m.mG)(this,void 0,void 0,function*(){try{for(ve=(0,m.KL)(De);!(He=yield ve.next()).done;)if(ye.next(He.value),ye.closed)return}catch(We){je={error:We}}finally{try{He&&!He.done&&(ne=ve.return)&&(yield ne.call(ve))}finally{if(je)throw je.error}}ye.complete()})})(De,ye).catch(ve=>ye.error(ve))})}},6451:(ot,Te,P)=>{P.d(Te,{T:()=>fe});var m=P(8189),Z=P(8421),O=P(515),oe=P(7669),X=P(8996);function fe(...re){const ce=(0,oe.yG)(re),ue=(0,oe._6)(re,1/0),j=re;return j.length?1===j.length?(0,Z.Xf)(j[0]):(0,m.J)(ue)((0,X.D)(j,ce)):O.E}},5403:(ot,Te,P)=>{P.d(Te,{x:()=>Z});var m=P(2961);function Z(oe,X,fe,re,ce){return new O(oe,X,fe,re,ce)}class O extends m.Lv{constructor(X,fe,re,ce,ue,j){super(X),this.onFinalize=ue,this.shouldUnsubscribe=j,this._next=fe?function($){try{fe($)}catch(Q){X.error(Q)}}:super._next,this._error=ce?function($){try{ce($)}catch(Q){X.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch($){X.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(ot,Te,P)=>{P.d(Te,{U:()=>O});var m=P(4482),Z=P(5403);function O(oe,X){return(0,m.e)((fe,re)=>{let ce=0;fe.subscribe((0,Z.x)(re,ue=>{re.next(oe.call(X,ue,ce++))}))})}},8189:(ot,Te,P)=>{P.d(Te,{J:()=>O});var m=P(5577),Z=P(4671);function O(oe=1/0){return(0,m.z)(Z.y,oe)}},5577:(ot,Te,P)=>{P.d(Te,{z:()=>ce});var m=P(4004),Z=P(8421),O=P(4482),oe=P(9672),X=P(5403),re=P(576);function ce(ue,j,$=1/0){return(0,re.m)(j)?ce((Q,ze)=>(0,m.U)((Ae,Ne)=>j(Q,Ae,ze,Ne))((0,Z.Xf)(ue(Q,ze))),$):("number"==typeof j&&($=j),(0,O.e)((Q,ze)=>function fe(ue,j,$,Q,ze,Ae,Ne,Le){const de=[];let we=0,Xe=0,Ke=!1;const De=()=>{Ke&&!de.length&&!we&&j.complete()},ye=He=>we<Q?ve(He):de.push(He),ve=He=>{Ae&&j.next(He),we++;let je=!1;(0,Z.Xf)($(He,Xe++)).subscribe((0,X.x)(j,ne=>{null==ze||ze(ne),Ae?ye(ne):j.next(ne)},()=>{je=!0},void 0,()=>{if(je)try{for(we--;de.length&&we<Q;){const ne=de.shift();Ne?(0,oe.f)(j,Ne,()=>ve(ne)):ve(ne)}De()}catch(ne){j.error(ne)}}))};return ue.subscribe((0,X.x)(j,ye,()=>{Ke=!0,De()})),()=>{null==Le||Le()}}(Q,ze,ue,$)))}},5363:(ot,Te,P)=>{P.d(Te,{Q:()=>oe});var m=P(9672),Z=P(4482),O=P(5403);function oe(X,fe=0){return(0,Z.e)((re,ce)=>{re.subscribe((0,O.x)(ce,ue=>(0,m.f)(ce,X,()=>ce.next(ue),fe),()=>(0,m.f)(ce,X,()=>ce.complete(),fe),ue=>(0,m.f)(ce,X,()=>ce.error(ue),fe)))})}},3099:(ot,Te,P)=>{P.d(Te,{B:()=>fe});var m=P(8996),Z=P(5698),O=P(7579),oe=P(2961),X=P(4482);function fe(ce={}){const{connector:ue=(()=>new O.x),resetOnError:j=!0,resetOnComplete:$=!0,resetOnRefCountZero:Q=!0}=ce;return ze=>{let Ae=null,Ne=null,Le=null,de=0,we=!1,Xe=!1;const Ke=()=>{null==Ne||Ne.unsubscribe(),Ne=null},De=()=>{Ke(),Ae=Le=null,we=Xe=!1},ye=()=>{const ve=Ae;De(),null==ve||ve.unsubscribe()};return(0,X.e)((ve,He)=>{de++,!Xe&&!we&&Ke();const je=Le=null!=Le?Le:ue();He.add(()=>{de--,0===de&&!Xe&&!we&&(Ne=re(ye,Q))}),je.subscribe(He),Ae||(Ae=new oe.Hp({next:ne=>je.next(ne),error:ne=>{Xe=!0,Ke(),Ne=re(De,j,ne),je.error(ne)},complete:()=>{we=!0,Ke(),Ne=re(De,$),je.complete()}}),(0,m.D)(ve).subscribe(Ae))})(ze)}}function re(ce,ue,...j){return!0===ue?(ce(),null):!1===ue?null:ue(...j).pipe((0,Z.q)(1)).subscribe(()=>ce())}},9468:(ot,Te,P)=>{P.d(Te,{R:()=>Z});var m=P(4482);function Z(O,oe=0){return(0,m.e)((X,fe)=>{fe.add(O.schedule(()=>X.subscribe(fe),oe))})}},5698:(ot,Te,P)=>{P.d(Te,{q:()=>oe});var m=P(515),Z=P(4482),O=P(5403);function oe(X){return X<=0?()=>m.E:(0,Z.e)((fe,re)=>{let ce=0;fe.subscribe((0,O.x)(re,ue=>{++ce<=X&&(re.next(ue),X<=ce&&re.complete())}))})}},8505:(ot,Te,P)=>{P.d(Te,{b:()=>X});var m=P(576),Z=P(4482),O=P(5403),oe=P(4671);function X(fe,re,ce){const ue=(0,m.m)(fe)||re||ce?{next:fe,error:re,complete:ce}:fe;return ue?(0,Z.e)((j,$)=>{var Q;null===(Q=ue.subscribe)||void 0===Q||Q.call(ue);let ze=!0;j.subscribe((0,O.x)($,Ae=>{var Ne;null===(Ne=ue.next)||void 0===Ne||Ne.call(ue,Ae),$.next(Ae)},()=>{var Ae;ze=!1,null===(Ae=ue.complete)||void 0===Ae||Ae.call(ue),$.complete()},Ae=>{var Ne;ze=!1,null===(Ne=ue.error)||void 0===Ne||Ne.call(ue,Ae),$.error(Ae)},()=>{var Ae,Ne;ze&&(null===(Ae=ue.unsubscribe)||void 0===Ae||Ae.call(ue)),null===(Ne=ue.finalize)||void 0===Ne||Ne.call(ue)}))}):oe.y}},4408:(ot,Te,P)=>{P.d(Te,{o:()=>X});var m=P(727);class Z extends m.w0{constructor(re,ce){super()}schedule(re,ce=0){return this}}const O={setInterval(fe,re,...ce){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(fe,re,...ce):setInterval(fe,re,...ce)},clearInterval(fe){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(fe)},delegate:void 0};var oe=P(8737);class X extends Z{constructor(re,ce){super(re,ce),this.scheduler=re,this.work=ce,this.pending=!1}schedule(re,ce=0){if(this.closed)return this;this.state=re;const ue=this.id,j=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(j,ue,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(j,this.id,ce),this}requestAsyncId(re,ce,ue=0){return O.setInterval(re.flush.bind(re,this),ue)}recycleAsyncId(re,ce,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ce;O.clearInterval(ce)}execute(re,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(re,ce);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ce){let j,ue=!1;try{this.work(re)}catch($){ue=!0,j=$||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:re,scheduler:ce}=this,{actions:ue}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=re&&(this.id=this.recycleAsyncId(ce,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Te,P)=>{P.d(Te,{v:()=>O});var m=P(6063);class Z{constructor(X,fe=Z.now){this.schedulerActionCtor=X,this.now=fe}schedule(X,fe=0,re){return new this.schedulerActionCtor(this,X).schedule(re,fe)}}Z.now=m.l.now;class O extends Z{constructor(X,fe=Z.now){super(X,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:fe}=this;if(this._active)return void fe.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=fe.shift());if(this._active=!1,re){for(;X=fe.shift();)X.unsubscribe();throw re}}}},4986:(ot,Te,P)=>{P.d(Te,{z:()=>O});var m=P(4408);const O=new(P(7565).v)(m.o)},6063:(ot,Te,P)=>{P.d(Te,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(ot,Te,P)=>{P.d(Te,{z:()=>m});const m={setTimeout(Z,O,...oe){const{delegate:X}=m;return(null==X?void 0:X.setTimeout)?X.setTimeout(Z,O,...oe):setTimeout(Z,O,...oe)},clearTimeout(Z){const{delegate:O}=m;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Z)},delegate:void 0}},2202:(ot,Te,P)=>{P.d(Te,{h:()=>Z});const Z=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Te,P)=>{P.d(Te,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Te,P)=>{P.d(Te,{_6:()=>fe,jO:()=>oe,yG:()=>X});var m=P(576);function O(re){return re[re.length-1]}function oe(re){return(0,m.m)(O(re))?re.pop():void 0}function X(re){return function Z(re){return re&&(0,m.m)(re.schedule)}(O(re))?re.pop():void 0}function fe(re,ce){return"number"==typeof O(re)?re.pop():ce}},8737:(ot,Te,P)=>{function m(Z,O){if(Z){const oe=Z.indexOf(O);0<=oe&&Z.splice(oe,1)}}P.d(Te,{P:()=>m})},3888:(ot,Te,P)=>{function m(Z){const oe=Z(X=>{Error.call(X),X.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}P.d(Te,{d:()=>m})},2806:(ot,Te,P)=>{P.d(Te,{x:()=>O,O:()=>oe});var m=P(2416);let Z=null;function O(X){if(m.v.useDeprecatedSynchronousErrorHandling){const fe=!Z;if(fe&&(Z={errorThrown:!1,error:null}),X(),fe){const{errorThrown:re,error:ce}=Z;if(Z=null,re)throw ce}}else X()}function oe(X){m.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=X)}},9672:(ot,Te,P)=>{function m(Z,O,oe,X=0,fe=!1){const re=O.schedule(function(){oe(),fe?Z.add(this.schedule(null,X)):this.unsubscribe()},X);if(Z.add(re),!fe)return re}P.d(Te,{f:()=>m})},4671:(ot,Te,P)=>{function m(Z){return Z}P.d(Te,{y:()=>m})},1144:(ot,Te,P)=>{P.d(Te,{z:()=>m});const m=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(ot,Te,P)=>{P.d(Te,{D:()=>Z});var m=P(576);function Z(O){return Symbol.asyncIterator&&(0,m.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ot,Te,P)=>{function m(Z){return"function"==typeof Z}P.d(Te,{m:()=>m})},3670:(ot,Te,P)=>{P.d(Te,{c:()=>O});var m=P(8822),Z=P(576);function O(oe){return(0,Z.m)(oe[m.L])}},6495:(ot,Te,P)=>{P.d(Te,{T:()=>O});var m=P(2202),Z=P(576);function O(oe){return(0,Z.m)(null==oe?void 0:oe[m.h])}},8239:(ot,Te,P)=>{P.d(Te,{t:()=>Z});var m=P(576);function Z(O){return(0,m.m)(null==O?void 0:O.then)}},3260:(ot,Te,P)=>{P.d(Te,{Q:()=>O,L:()=>oe});var m=P(655),Z=P(576);function O(X){return(0,m.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:ce,done:ue}=yield(0,m.qq)(re.read());if(ue)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(ce)}}finally{re.releaseLock()}})}function oe(X){return(0,Z.m)(null==X?void 0:X.getReader)}},4482:(ot,Te,P)=>{P.d(Te,{A:()=>Z,e:()=>O});var m=P(576);function Z(oe){return(0,m.m)(null==oe?void 0:oe.lift)}function O(oe){return X=>{if(Z(X))return X.lift(function(fe){try{return oe(fe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ot,Te,P)=>{P.d(Te,{h:()=>O});var m=P(2416),Z=P(3410);function O(oe){Z.z.setTimeout(()=>{const{onUnhandledError:X}=m.v;if(!X)throw oe;X(oe)})}},4532:(ot,Te,P)=>{function m(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Te,{z:()=>m})},655:(ot,Te,P)=>{function oe(J,se){var te={};for(var Ee in J)Object.prototype.hasOwnProperty.call(J,Ee)&&se.indexOf(Ee)<0&&(te[Ee]=J[Ee]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(Ee=Object.getOwnPropertySymbols(J);pe<Ee.length;pe++)se.indexOf(Ee[pe])<0&&Object.prototype.propertyIsEnumerable.call(J,Ee[pe])&&(te[Ee[pe]]=J[Ee[pe]])}return te}function ce(J,se,te,Ee){return new(te||(te=Promise))(function(Fe,Dt){function Zt(qt){try{Ge(Ee.next(qt))}catch(tr){Dt(tr)}}function an(qt){try{Ge(Ee.throw(qt))}catch(tr){Dt(tr)}}function Ge(qt){qt.done?Fe(qt.value):function pe(Fe){return Fe instanceof te?Fe:new te(function(Dt){Dt(Fe)})}(qt.value).then(Zt,an)}Ge((Ee=Ee.apply(J,se||[])).next())})}function de(J){return this instanceof de?(this.v=J,this):new de(J)}function we(J,se,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,Ee=te.apply(J,se||[]),Fe=[];return pe={},Dt("next"),Dt("throw"),Dt("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function Dt(Dn){Ee[Dn]&&(pe[Dn]=function(Xt){return new Promise(function(bi,Qt){Fe.push([Dn,Xt,bi,Qt])>1||Zt(Dn,Xt)})})}function Zt(Dn,Xt){try{!function an(Dn){Dn.value instanceof de?Promise.resolve(Dn.value.v).then(Ge,qt):tr(Fe[0][2],Dn)}(Ee[Dn](Xt))}catch(bi){tr(Fe[0][3],bi)}}function Ge(Dn){Zt("next",Dn)}function qt(Dn){Zt("throw",Dn)}function tr(Dn,Xt){Dn(Xt),Fe.shift(),Fe.length&&Zt(Fe[0][0],Fe[0][1])}}function Ke(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,se=J[Symbol.asyncIterator];return se?se.call(J):(J=function Q(J){var se="function"==typeof Symbol&&Symbol.iterator,te=se&&J[se],Ee=0;if(te)return te.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&Ee>=J.length&&(J=void 0),{value:J&&J[Ee++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),te={},Ee("next"),Ee("throw"),Ee("return"),te[Symbol.asyncIterator]=function(){return this},te);function Ee(Fe){te[Fe]=J[Fe]&&function(Dt){return new Promise(function(Zt,an){!function pe(Fe,Dt,Zt,an){Promise.resolve(an).then(function(Ge){Fe({value:Ge,done:Zt})},Dt)}(Zt,an,(Dt=J[Fe](Dt)).done,Dt.value)})}}}P.d(Te,{_T:()=>oe,mG:()=>ce,qq:()=>de,FC:()=>we,KL:()=>Ke})},5e3:(ot,Te,P)=>{P.d(Te,{deG:()=>Jp,tb:()=>Wv,AFp:()=>Ub,ip1:()=>Vb,CZH:()=>qv,hGG:()=>YC,z2F:()=>Hc,sBO:()=>Gm,Sil:()=>Ip,_Vd:()=>up,EJc:()=>Hb,SBq:()=>lp,qLn:()=>Mr,vpe:()=>_n,tBr:()=>Fr,XFs:()=>lt,OlP:()=>Sn,zs3:()=>ca,ZZ4:()=>zc,aQg:()=>hE,soG:()=>jm,YKP:()=>ya,h0i:()=>xc,PXZ:()=>Zb,R0b:()=>no,FiY:()=>gi,Lbi:()=>$b,g9A:()=>jb,Qsj:()=>wC,FYo:()=>il,JOm:()=>ie,tp0:()=>bo,Rgc:()=>yp,dDg:()=>Cp,q4F:()=>Iv,GfV:()=>bv,s_b:()=>ul,ifc:()=>Wt,eFA:()=>Hm,G48:()=>Ih,Gpc:()=>$,X6Q:()=>nE,_c5:()=>pE,VLi:()=>wh,c2e:()=>Kv,zSh:()=>Bg,wAp:()=>pt,vHH:()=>Ne,cg1:()=>_m,kL8:()=>vm,dqk:()=>Gt,sIi:()=>qd,CqO:()=>$_,QGY:()=>rm,F4k:()=>Bf,RDi:()=>ls,AaK:()=>ce,qOj:()=>dc,TTD:()=>co,_Bn:()=>vv,xp6:()=>Ef,uIk:()=>Wg,ekj:()=>nh,Suo:()=>mh,Xpm:()=>Lt,lG2:()=>Jt,Yz7:()=>Xt,cJS:()=>Qt,oAB:()=>Y,Yjl:()=>br,Y36:()=>yc,_UZ:()=>Qd,qZA:()=>Uf,TgZ:()=>Vf,EpF:()=>Yu,n5z:()=>vd,LFG:()=>Ye,$8M:()=>Jo,$Z:()=>U_,NdJ:()=>vc,CRH:()=>Db,oxw:()=>q_,ALo:()=>ol,lcZ:()=>al,Q6J:()=>B_,iGM:()=>Ib,CHM:()=>bl,LSH:()=>Lu,YNc:()=>iw,_uU:()=>nv,hij:()=>Kf});var m=P(7579),Z=P(727),O=P(8306),oe=P(6451),X=P(3099);function fe(i){for(let o in i)if(i[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function re(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ue(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const j=fe({__forward_ref__:fe});function $(i){return i.__forward_ref__=$,i.toString=function(){return ce(this())},i}function Q(i){return ze(i)?i():i}function ze(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===$}class Ne extends Error{constructor(o,a){super(function Le(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function de(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():de(i)}function ye(i,o){const a=o?` in ${o}`:"";throw new Ne(-201,`No provider for ${we(i)} found${a}`)}function an(i,o){null==i&&function Ge(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Qt(i){return{providers:i.providers||[],imports:i.imports||[]}}function zt(i){return lr(i,Bi)||lr(i,rs)}function lr(i,o){return i.hasOwnProperty(o)?i[o]:null}function Or(i){return i&&(i.hasOwnProperty(Pr)||i.hasOwnProperty(is))?i[Pr]:null}const Bi=fe({\u0275prov:fe}),Pr=fe({\u0275inj:fe}),rs=fe({ngInjectableDef:fe}),is=fe({ngInjectorDef:fe});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let Gr;function Zn(i){const o=Gr;return Gr=i,o}function oi(i,o,a){const l=zt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&lt.Optional?null:void 0!==o?o:void ye(ce(i),"Injector")}function vn(i){return{toString:i}.toString()}var rr=(()=>((rr=rr||{})[rr.OnPush=0]="OnPush",rr[rr.Default=1]="Default",rr))(),Wt=(()=>{return(i=Wt||(Wt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Wt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,cr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Gt=rt||"undefined"!=typeof global&&global||vt||cr,dr={},ct=[],wr=fe({\u0275cmp:fe}),Bt=fe({\u0275dir:fe}),Ze=fe({\u0275pipe:fe}),Ce=fe({\u0275mod:fe}),Qe=fe({\u0275fac:fe}),dt=fe({__NG_ELEMENT_ID__:fe});let $t=0;function Lt(i){return vn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===rr.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Wt.Emulated,id:"c",styles:i.styles||ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,f=i.features,_=i.pipes;return l.id+=$t++,l.inputs=mt(i.inputs,a),l.outputs=mt(i.outputs),f&&f.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(G):null,l})}function L(i){return Kt(i)||function Cn(i){return i[Bt]||null}(i)}function G(i){return function Nt(i){return i[Ze]||null}(i)}const le={};function Y(i){return vn(()=>{const o={type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(le[i.id]=i.type),o})}function mt(i,o){if(null==i)return dr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}const Jt=Lt;function br(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Kt(i){return i[wr]||null}function fn(i,o){const a=i[Ce]||null;if(!a&&!0===o)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function Di(i){return Array.isArray(i)&&"object"==typeof i[1]}function ui(i){return Array.isArray(i)&&!0===i[1]}function Xc(i){return 0!=(8&i.flags)}function Rs(i){return 2==(2&i.flags)}function lu(i){return 1==(1&i.flags)}function qr(i){return null!==i.template}function Fh(i){return 0!=(512&i[2])}function zr(i,o){return i.hasOwnProperty(Qe)?i[Qe]:null}class $o{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function co(){return Ma}function Ma(i){return i.type.prototype.ngOnChanges&&(i.setInput=Zp),id}function id(){const i=ks(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===dr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Zp(i,o,a,l){const d=ks(i)||function li(i,o){return i[Ci]=o}(i,{previous:dr,current:null}),f=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],b=_[w];f[w]=new $o(b&&b.currentValue,o,_===dr),i[l]=o}co.ngInherit=!0;const Ci="__ngSimpleChanges__";function ks(i){return i[Ci]||null}let mu;function ls(i){mu=i}function yn(i){return!!i.listen}const Ho={createRenderer:(i,o)=>function xa(){return void 0!==mu?mu:"undefined"!=typeof document?document:void 0}()};function cn(i){for(;Array.isArray(i);)i=i[0];return i}function fo(i,o){return cn(o[i])}function Ir(i,o){return cn(o[i.index])}function Na(i,o){return i.data[o]}function Dr(i,o){const a=o[i];return Di(a)?a:a[0]}function Ls(i){return 4==(4&i[2])}function cs(i){return 128==(128&i[2])}function Kr(i,o){return null==o?null:i[o]}function Vs(i){i[18]=0}function Us(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const ht={lFrame:go(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function wu(){return ht.bindingsEnabled}function be(){return ht.lFrame.lView}function Vt(){return ht.lFrame.tView}function bl(i){return ht.lFrame.contextLView=i,i[8]}function En(){let i=Go();for(;null!==i&&64===i.type;)i=i.parent;return i}function Go(){return ht.lFrame.currentTNode}function Zr(i,o){const a=ht.lFrame;a.currentTNode=i,a.isParent=o}function Il(){return ht.lFrame.isParent}function bu(){return ht.isInCheckNoChangesMode}function Bs(i){ht.isInCheckNoChangesMode=i}function js(){return ht.lFrame.bindingIndex++}function Cu(i,o){const a=ht.lFrame;a.bindingIndex=a.bindingRootIndex=i,Oa(o)}function Oa(i){ht.lFrame.currentDirectiveIndex=i}function Sl(){return ht.lFrame.currentQueryIndex}function Ml(i){ht.lFrame.currentQueryIndex=i}function ud(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function xl(i,o,a){if(a&lt.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&lt.Host||(d=ud(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,i=f}const l=ht.lFrame=ld();return l.currentTNode=o,l.lView=i,!0}function po(i){const o=ld(),a=i[1];ht.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function ld(){const i=ht.lFrame,o=null===i?null:i.child;return null===o?go(i):o}function go(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function cd(){const i=ht.lFrame;return ht.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const dd=cd;function mo(){const i=cd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Cr(){return ht.lFrame.selectedIndex}function Hs(i){ht.lFrame.selectedIndex=i}function Tn(){const i=ht.lFrame;return Na(i.tView,i.selectedIndex)}function ds(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:M}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Pa(i,o,a){hd(i,o,3,a)}function Tu(i,o,a,l){(3&i[2])===a&&hd(i,o,a,l)}function Hn(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function hd(i,o,a,l){const f=null!=l?l:-1,_=o.length-1;let w=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof o[b+1]){if(w=o[b],null!=l&&w>=l)break}else o[b]<0&&(i[18]+=65536),(w<f||-1==f)&&(Yp(i,a,o,b),i[18]=(4294901760&i[18])+b+2),b++}function Yp(i,o,a,l){const d=a[l]<0,f=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class Wo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function yt(i,o,a){const l=yn(i);let d=0;for(;d<a.length;){const f=a[d];if("number"==typeof f){if(0!==f)break;d++;const _=a[d++],w=a[d++],b=a[d++];l?i.setAttribute(o,w,b,_):o.setAttributeNS(_,w,b)}else{const _=f,w=a[++d];Yr(_)?l&&i.setProperty(o,_,w):l?i.setAttribute(o,_,w):o.setAttribute(_,w),d++}}return d}function mr(i){return 3===i||4===i||6===i}function Yr(i){return 64===i.charCodeAt(0)}function Qr(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Ko(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function Ko(i,o,a,l,d){let f=0,_=i.length;if(-1===o)_=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===o){_=-1;break}if(w>o){_=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==_&&(i.splice(_,0,o),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function gd(i){return-1!==i}function gn(i){return 32767&i}function Si(i,o){let a=function $h(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let Au=!0;function di(i){const o=Au;return Au=i,o}let yd=0;function Gn(i,o){const a=Zo(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,fs(l.data,i),fs(o,null),fs(l.blueprint,null));const d=hi(i,o),f=i.injectorIndex;if(gd(d)){const _=gn(d),w=Si(d,o),b=w[1].data;for(let A=0;A<8;A++)o[f+A]=w[_+A]|b[_+A]}return o[f+8]=d,f}function fs(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Zo(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function hi(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const f=d[1],_=f.type;if(l=2===_?f.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Gs(i,o,a){!function _o(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(dt)&&(l=a[dt]),null==l&&(l=a[dt]=yd++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Hi(i,o,a){if(a&lt.Optional)return i;ye(o,"NodeInjector")}function Fl(i,o,a,l){if(a&lt.Optional&&void 0===l&&(l=null),0==(a&(lt.Self|lt.Host))){const d=i[9],f=Zn(void 0);try{return d?d.get(o,l,a&lt.Optional):oi(o,l,a&lt.Optional)}finally{Zn(f)}}return Hi(l,o,a)}function qs(i,o,a,l=lt.Default,d){if(null!==i){const f=function Qo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(dt)?i[dt]:void 0;return"number"==typeof o?o>=0?255&o:Ll:o}(a);if("function"==typeof f){if(!xl(o,i,l))return l&lt.Host?Hi(d,a,l):Fl(o,a,l,d);try{const _=f(l);if(null!=_||l&lt.Optional)return _;ye(a)}finally{dd()}}else if("number"==typeof f){let _=null,w=Zo(i,o),b=-1,A=l&lt.Host?o[16][6]:null;for((-1===w||l&lt.SkipSelf)&&(b=-1===w?hi(i,o):o[w+8],-1!==b&&kr(l,!1)?(_=o[1],w=gn(b),o=Si(b,o)):w=-1);-1!==w;){const M=o[1];if(Fa(f,w,M.data)){const k=_d(w,o,a,_,l,A);if(k!==Gi)return k}b=o[w+8],-1!==b&&kr(l,o[1].data[w+8]===A)&&Fa(f,w,o)?(_=M,w=gn(b),o=Si(b,o)):w=-1}}}return Fl(o,a,l,d)}const Gi={};function Ll(){return new xi(En(),be())}function _d(i,o,a,l,d,f){const _=o[1],w=_.data[i+8],M=Yo(w,_,a,null==l?Rs(w)&&Au:l!=_&&0!=(3&w.type),d&lt.Host&&f===w);return null!==M?Mi(o,_,M,w):Gi}function Yo(i,o,a,l,d){const f=i.providerIndexes,_=o.data,w=1048575&f,b=i.directiveStart,M=f>>20,U=d?w+M:i.directiveEnd;for(let K=l?w:w+M;K<U;K++){const me=_[K];if(K<b&&a===me||K>=b&&me.type===a)return K}if(d){const K=_[b];if(K&&qr(K)&&K.type===a)return b}return null}function Mi(i,o,a,l){let d=i[a];const f=o.data;if(function fd(i){return i instanceof Wo}(d)){const _=d;_.resolving&&function Xe(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${i}${a}`)}(we(f[a]));const w=di(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Zn(_.injectImpl):null;xl(i,l,lt.Default);try{d=i[a]=_.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Ol(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const _=Ma(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],o)}finally{null!==b&&Zn(b),di(w),_.resolving=!1,dd()}}return d}function Fa(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function kr(i,o){return!(i&lt.Self||i&lt.Host&&o)}class xi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return qs(this._tNode,this._lView,o,l,a)}}function vd(i){return vn(()=>{const o=i.prototype.constructor,a=o[Qe]||Vn(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[Qe]||Vn(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Vn(i){return ze(i)?()=>{const o=Vn(Q(i));return o&&o()}:zr(i)}function Jo(i){return function ka(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(mr(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(En(),i)}const Xo="__parameters__";function An(i,o,a){return vn(()=>{const l=function qi(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const _=new d(...f);return w.annotation=_,w;function w(b,A,M){const k=b.hasOwnProperty(Xo)?b[Xo]:Object.defineProperty(b,Xo,{value:[]})[Xo];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Sn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Jp=new Sn("AnalyzeForEntryComponents");function Ar(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),Ar(l,o)):o!==i&&o.push(l)}return o}function fi(i,o){i.forEach(a=>Array.isArray(a)?fi(a,o):o(a))}function Bl(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function ms(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Qn(i,o,a){let l=Zs(i,o);return l>=0?i[1|l]=a:(l=~l,function jl(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Gl(i,o){const a=Zs(i,o);if(a>=0)return i[1|a]}function Zs(i,o){return function vo(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),_=i[f<<a];if(o===_)return f<<a;_>o?d=f:l=f+1}return~(d<<a)}(i,o,1)}const Eo={},ta="__NG_DI_FLAG__",Nu="ngTempTokenPath",C=/\n/gm,F="__source",W=fe({provide:String,useValue:fe});let ee;function Se(i){const o=ee;return ee=i,o}function Me(i,o=lt.Default){if(void 0===ee)throw new Ne(203,"");return null===ee?oi(i,void 0,o):ee.get(i,o&lt.Optional?null:void 0,o)}function Ye(i,o=lt.Default){return(function nr(){return Gr}()||Me)(Q(i),o)}const Rt=Ye;function Ct(i){const o=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let d,f=lt.Default;for(let _=0;_<l.length;_++){const w=l[_],b=Mn(w);"number"==typeof b?-1===b?d=w.token:f|=b:d=w}o.push(Ye(d,f))}else o.push(Ye(l))}return o}function qn(i,o){return i[ta]=o,i.prototype[ta]=o,i}function Mn(i){return i[ta]}const Fr=qn(An("Inject",i=>({token:i})),-1),gi=qn(An("Optional"),8),bo=qn(An("SkipSelf"),4);class Md{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ys(i){return i instanceof Md?i.changingThisBreaksApplicationSecurity:i}const Qs=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var nn=(()=>((nn=nn||{})[nn.NONE=0]="NONE",nn[nn.HTML=1]="HTML",nn[nn.STYLE=2]="STYLE",nn[nn.SCRIPT=3]="SCRIPT",nn[nn.URL=4]="URL",nn[nn.RESOURCE_URL=5]="RESOURCE_URL",nn))();function Lu(i){const o=function oa(){const i=be();return i&&i[12]}();return o?o.sanitize(nn.URL,i)||"":function ia(i,o){const a=function Ou(i){return i instanceof Md&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?Ys(i):function Pu(i){return(i=String(i)).match(Qs)||i.match(Yh)?i:"unsafe:"+i}(de(i))}const af="__ngContext__";function Lr(i,o){i[af]=o}function uf(i){const o=function ja(i){return i[af]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function Ga(i){return i.ngOriginalError}function pg(i,...o){i.error(...o)}class Mr{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Py(i){return i&&i.ngErrorLogger||pg}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Ga(o);for(;a&&Ga(a);)a=Ga(a);return a||null}}const Vy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Gt))();function g(i){return i instanceof Function?i():i}var ie=(()=>((ie=ie||{})[ie.Important=1]="Important",ie[ie.DashCase=2]="DashCase",ie))();function Je(i,o){return undefined(i,o)}function xn(i){const o=i[3];return ui(o)?o[3]:o}function Vu(i){return mf(i[13])}function Uu(i){return mf(i[4])}function mf(i){for(;null!==i&&!ui(i);)i=i[4];return i}function aa(i,o,a,l,d){if(null!=l){let f,_=!1;ui(l)?f=l:Di(l)&&(_=!0,l=l[0]);const w=cn(l);0===i&&null!==a?null==d?qy(o,a,w):_s(o,a,w,d||null,!0):1===i&&null!==a?_s(o,a,w,d||null,!0):2===i?function Zy(i,o,a){const l=Bu(i,o);l&&function nD(i,o,a,l){yn(i)?i.removeChild(o,a,l):o.removeChild(a)}(i,l,o,a)}(o,w,_):3===i&&o.destroyNode(w),null!=f&&function QE(i,o,a,l,d){const f=a[7];f!==cn(a)&&aa(o,i,l,f,d);for(let w=10;w<a.length;w++){const b=a[w];Eg(b[1],b,i,o,l,f)}}(o,i,f,a,d)}}function Ld(i,o,a){if(yn(i))return i.createElement(o,a);{const l=null!==a?function gu(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function $E(i,o){const a=i[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Us(d,-1)),a.splice(l,1)}function $y(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&$E(d,l),o>0&&(i[a-1][4]=l[4]);const f=ms(i,10+o);!function yi(i,o){Eg(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Hy(i,o){if(!(256&o[2])){const a=o[11];yn(a)&&a.destroyNode&&Eg(i,o,a,3,null,null),function yg(i){let o=i[13];if(!o)return Gy(i[1],i);for(;o;){let a=null;if(Di(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Di(o)&&Gy(o[1],o),o=o[3];null===o&&(o=i),Di(o)&&Gy(o[1],o),a=o&&o[4]}o=a}}(o)}}function Gy(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function GE(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Wo)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const w=d[f[_]],b=f[_+1];try{b.call(w)}finally{}}else try{f.call(d)}finally{}}}}(i,o),function HE(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],w="function"==typeof _?_(o):cn(o[_]),b=l[d=a[f+2]],A=a[f+3];"boolean"==typeof A?w.removeEventListener(a[f],b,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),f+=2}else{const _=l[d=a[f+1]];a[f].call(_)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();o[7]=null}}(i,o),1===o[1].type&&yn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ui(o[3])){a!==o[3]&&$E(a,o);const l=o[19];null!==l&&l.detachView(i)}}}function _g(i,o,a){return function tD(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===Wt.None||d===Wt.Emulated)return null}return Ir(l,a)}(i,o.parent,a)}function _s(i,o,a,l,d){yn(i)?i.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function qy(i,o,a){yn(i)?i.appendChild(o,a):o.appendChild(a)}function qE(i,o,a,l,d){null!==l?_s(i,o,a,l,d):qy(i,o,a)}function Bu(i,o){return yn(i)?i.parentNode(o):o.parentNode}let zy=function WE(i,o,a){return 40&i.type?Ir(i,a):null};function vg(i,o,a,l){const d=_g(i,l,o),f=o[11],w=function zE(i,o,a){return zy(i,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)qE(f,d,a[b],w,!1);else qE(f,d,a,w,!1)}function Ud(i,o){if(null!==o){const a=o.type;if(3&a)return Ir(o,i);if(4&a)return Ky(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Ud(i,l);{const d=i[o.index];return ui(d)?Ky(-1,d):cn(d)}}if(32&a)return Je(o,i)()||cn(i[o.index]);{const l=ZE(i,o);return null!==l?Array.isArray(l)?l[0]:Ud(xn(i[16]),l):Ud(i,o.next)}}return null}function ZE(i,o){return null!==o?i[16][6].projection[o.projection]:null}function Ky(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Ud(l,d)}return o[7]}function Yy(i,o,a,l,d,f,_){for(;null!=a;){const w=l[a.index],b=a.type;if(_&&0===o&&(w&&Lr(cn(w),l),a.flags|=4),64!=(64&a.flags))if(8&b)Yy(i,o,a.child,l,d,f,!1),aa(o,i,d,w,f);else if(32&b){const A=Je(a,l);let M;for(;M=A();)aa(o,i,d,M,f);aa(o,i,d,w,f)}else 16&b?YE(i,o,l,a,d,f):aa(o,i,d,w,f);a=_?a.projectionNext:a.next}}function Eg(i,o,a,l,d,f){Yy(a,l,i.firstChild,o,d,f,!1)}function YE(i,o,a,l,d,f){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)aa(o,i,d,b[A],f);else Yy(i,o,b,_[3],d,f,!0)}function Ao(i,o,a){yn(i)?i.setAttribute(o,"style",a):o.style.cssText=a}function Jy(i,o,a){yn(i)?""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a):o.className=a}function Xy(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const JE="ng-template";function iD(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==Xy(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function vf(i){return 4===i.type&&i.value!==JE}function ju(i,o,a){return o===(4!==i.type||a?i.value:JE)}function XE(i,o,a){let l=4;const d=i.attrs||[],f=function t0(i){for(let o=0;o<i.length;o++)if(mr(i[o]))return o;return i.length}(d);let _=!1;for(let w=0;w<o.length;w++){const b=o[w];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!ju(i,b,a)||""===b&&1===o.length){if(bn(l))return!1;_=!0}}else{const A=8&l?b:o[++w];if(8&l&&null!==i.attrs){if(!iD(i.attrs,A,a)){if(bn(l))return!1;_=!0}continue}const k=$u(8&l?"class":b,d,vf(i),a);if(-1===k){if(bn(l))return!1;_=!0;continue}if(""!==A){let U;U=k>f?"":d[k+1].toLowerCase();const K=8&l?U:null;if(K&&-1!==Xy(K,A,0)||2&l&&A!==U){if(bn(l))return!1;_=!0}}}}else{if(!_&&!bn(l)&&!bn(b))return!1;if(_&&bn(b))continue;_=!1,l=b|1&l}}return bn(l)||_}function bn(i){return 0==(1&i)}function $u(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function n0(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function e0(i,o,a=!1){for(let l=0;l<o.length;l++)if(XE(i,o[l],a))return!0;return!1}function e_(i,o){return i?":not("+o.trim()+")":o}function s0(i){let o=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!bn(_)&&(o+=e_(f,d),d=""),l=_,f=f||!bn(l);a++}return""!==d&&(o+=e_(f,d)),o}const Mt={};function Ef(i){t_(Vt(),be(),Cr()+i,bu())}function t_(i,o,a,l){if(!l)if(3==(3&o[2])){const f=i.preOrderCheckHooks;null!==f&&Pa(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Tu(o,f,0,a)}Hs(a)}function wf(i,o){return i<<17|o<<2}function Js(i){return i>>17&32767}function wg(i){return 2|i}function So(i){return(131068&i)>>2}function bg(i,o){return-131069&i|o<<2}function Dg(i){return 1|i}function v0(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];Ml(d),_.contentQueries(2,o[f],f)}}}function ac(i,o,a,l,d,f,_,w,b,A){const M=o.blueprint.slice();return M[0]=d,M[2]=140|l,Vs(M),M[3]=M[15]=i,M[8]=a,M[10]=_||i&&i[10],M[11]=w||i&&i[11],M[12]=b||i&&i[12]||null,M[9]=A||i&&i[9]||null,M[6]=f,M[16]=2==o.type?i[16]:M,M}function jd(i,o,a,l,d){let f=i.data[o];if(null===f)f=function xg(i,o,a,l,d){const f=Go(),_=Il(),b=i.data[o]=function c_(i,o,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=b),null!==f&&(_?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(i,o,a,l,d),function Tl(){return ht.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const _=function qo(){const i=ht.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Zr(f,!0),f}function Hu(i,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function uc(i,o,a){po(o);try{const l=i.viewQuery;null!==l&&Vg(1,l,a);const d=i.template;null!==d&&$d(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&v0(i,o),i.staticViewQueries&&Vg(2,i.viewQuery,a);const f=i.components;null!==f&&function DS(i,o){for(let a=0;a<o.length;a++)fD(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,mo()}}function Cf(i,o,a,l){const d=o[2];if(256==(256&d))return;po(o);const f=bu();try{Vs(o),function Iu(i){return ht.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&$d(i,o,a,2,l);const _=3==(3&d);if(!f)if(_){const A=i.preOrderCheckHooks;null!==A&&Pa(o,A,null)}else{const A=i.preOrderHooks;null!==A&&Tu(o,A,0,null),Hn(o,0)}if(function m_(i){for(let o=Vu(i);null!==o;o=Uu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(1024&d[2])&&Us(f,1),d[2]|=1024}}}(o),function L0(i){for(let o=Vu(i);null!==o;o=Uu(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];cs(l)&&Cf(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&v0(i,o),!f)if(_){const A=i.contentCheckHooks;null!==A&&Pa(o,A)}else{const A=i.contentHooks;null!==A&&Tu(o,A,1),Hn(o,1)}!function IS(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Hs(~d);else{const f=d,_=a[++l],w=a[++l];Cu(_,f),w(2,o[f])}}}finally{Hs(-1)}}(i,o);const w=i.components;null!==w&&function E0(i,o){for(let a=0;a<o.length;a++)hD(i,o[a])}(o,w);const b=i.viewQuery;if(null!==b&&Vg(2,b,l),!f)if(_){const A=i.viewCheckHooks;null!==A&&Pa(o,A)}else{const A=i.viewHooks;null!==A&&Tu(o,A,2),Hn(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Us(o[3],-1))}finally{mo()}}function u_(i,o,a,l){const d=o[10],f=!bu(),_=Ls(o);try{f&&!_&&d.begin&&d.begin(),_&&uc(i,o,l),Cf(i,o,a,l)}finally{f&&!_&&d.end&&d.end()}}function $d(i,o,a,l,d){const f=Cr(),_=2&l;try{Hs(-1),_&&o.length>20&&t_(i,o,20,bu()),a(l,d)}finally{Hs(f)}}function Gu(i,o,a){!wu()||(function AS(i,o,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Gn(a,o),Lr(l,o);const _=a.initialInputs;for(let w=d;w<f;w++){const b=i.data[w],A=qr(b);A&&O0(o,a,b);const M=Mi(o,i,w,a);Lr(M,o),null!==_&&k0(0,w-d,M,b,0,_),A&&(Dr(a.index,o)[8]=M)}}(i,o,a,Ir(a,o)),128==(128&a.flags)&&function SS(i,o,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,w=function Al(){return ht.lFrame.currentDirectiveIndex}();try{Hs(_);for(let b=l;b<d;b++){const A=i.data[b],M=o[b];Oa(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&A0(A,M)}}finally{Hs(-1),Oa(w)}}(i,o,a))}function lc(i,o,a=Ir){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],w=-1===_?a(o,i):i[_];i[d++]=w}}}function w0(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Hd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Hd(i,o,a,l,d,f,_,w,b,A){const M=20+l,k=M+d,U=function b0(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Mt);return a}(M,k),K="function"==typeof A?A():A;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:o,data:U.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:K,incompleteFirstPass:!1}}function l_(i,o,a,l){const d=U0(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&B0(i).push(l,d.length-1))}function I0(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Og(i,o,a,l){let d=!1;if(wu()){const f=function S0(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];e0(a,_.selectors,!1)&&(d||(d=[]),Gs(Gn(a,o),i,_.type),qr(_)?(M0(i,a),d.unshift(_)):d.push(_))}return d}(i,o,a),_=null===l?null:{"":-1};if(null!==f){d=!0,g_(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const k=f[M];k.providersResolver&&k.providersResolver(k)}let w=!1,b=!1,A=Hu(i,o,f.length,null);for(let M=0;M<f.length;M++){const k=f[M];a.mergedAttrs=Qr(a.mergedAttrs,k.hostAttrs),R0(i,a,o,A,k),N0(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!b&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function D0(i,o){const l=o.directiveEnd,d=i.data,f=o.attrs,_=[];let w=null,b=null;for(let A=o.directiveStart;A<l;A++){const M=d[A],k=M.inputs,U=null===f||vf(o)?null:cD(k,f);_.push(U),w=I0(k,A,w),b=I0(M.outputs,A,b)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=w,o.outputs=b}(i,a)}_&&function x0(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new Ne(-301,!1);l.push(o[d],f)}}}(a,l,_)}return a.mergedAttrs=Qr(a.mergedAttrs,a.attrs),d}function lD(i,o,a,l,d,f){const _=f.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const b=~o.index;(function TS(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(l,d,_)}}function A0(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function M0(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function N0(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;qr(o)&&(a[""]=i)}}function g_(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function R0(i,o,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=zr(d.type)),_=new Wo(f,qr(d),null);i.blueprint[l]=_,a[l]=_,lD(i,o,0,l,Hu(i,a,d.hostVars,Mt),d)}function O0(i,o,a){const l=Ir(o,i),d=w0(a),f=i[10],_=Fg(i,ac(i,d,null,a.onPush?64:16,l,o,f,f.createRenderer(l,a),null,null));i[o.index]=_}function la(i,o,a,l,d,f){const _=Ir(i,o);!function P0(i,o,a,l,d,f,_){if(null==f)yn(i)?i.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==_?de(f):_(f,l||"",d);yn(i)?i.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],_,f,i.value,a,l,d)}function k0(i,o,a,l,d,f){const _=f[o];if(null!==_){const w=l.setInput;for(let b=0;b<_.length;){const A=_[b++],M=_[b++],k=_[b++];null!==w?l.setInput(a,k,A,M):a[M]=k}}}function cD(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function F0(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function hD(i,o){const a=Dr(o,i);if(cs(a)){const l=a[1];80&a[2]?Cf(l,a,l.template,a[8]):a[5]>0&&Pg(a)}}function Pg(i){for(let l=Vu(i);null!==l;l=Uu(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const _=f[1];Cf(_,f,_.template,f[8])}else f[5]>0&&Pg(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Dr(a[l],i);cs(d)&&d[5]>0&&Pg(d)}}function fD(i,o){const a=Dr(o,i),l=a[1];(function kg(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),uc(l,a,a[8])}function Fg(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Sf(i){for(;i;){i[2]|=64;const o=xn(i);if(Fh(i)&&!o)return i;i=o}return null}function Lg(i,o,a){const l=o[10];l.begin&&l.begin();try{Cf(i,o,i.template,a)}catch(d){throw j0(o,d),d}finally{l.end&&l.end()}}function V0(i){!function Mf(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=uf(a),d=l[1];u_(d,l,d.template,a)}}(i[8])}function Vg(i,o,a){Ml(0),o(i,a)}const __=(()=>Promise.resolve(null))();function U0(i){return i[7]||(i[7]=[])}function B0(i){return i.cleanup||(i.cleanup=[])}function j0(i,o){const a=i[9],l=a?a.get(Mr,null):null;l&&l.handleError(o)}function mD(i,o,a,l,d){for(let f=0;f<a.length;){const _=a[f++],w=a[f++],b=o[_],A=i.data[_];null!==A.setInput?A.setInput(b,d,l,w):b[w]=d}}function Mo(i,o,a){const l=fo(o,i);!function Fd(i,o,a){yn(i)?i.setValue(o,a):o.textContent=a}(i[11],l,a)}function Ug(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const w=o[_];"number"==typeof w?f=w:1==f?d=ue(d,w):2==f&&(l=ue(l,w+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const za=new Sn("INJECTOR",-1);class H0{get(o,a=Eo){if(a===Eo){const l=new Error(`NullInjectorError: No provider for ${ce(o)}!`);throw l.name="NullInjectorError",l}return a}}const Bg=new Sn("Set Injector scope."),xf={},G0={};let E_;function q0(){return void 0===E_&&(E_=new H0),E_}function jg(i,o=null,a=null,l){const d=w_(i,o,a,l);return d._resolveInjectorDefTypes(),d}function w_(i,o=null,a=null,l){return new vD(i,a,o||q0(),l)}class vD{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&fi(a,w=>this.processProvider(w,o,a)),fi([o],w=>this.processInjectorType(w,[],f)),this.records.set(za,cc(void 0,this));const _=this.records.get(Bg);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof o?null:ce(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Eo,l=lt.Default){this.assertNotDestroyed();const d=Se(this),f=Zn(void 0);try{if(!(l&lt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const b=function bD(i){return"function"==typeof i||"object"==typeof i&&i instanceof Sn}(o)&&zt(o);w=b&&this.injectableDefInScope(b)?cc($g(o),xf):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&lt.Self?q0():this.parent).get(o,a=l&lt.Optional&&a===Eo?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Nu]=_[Nu]||[]).unshift(ce(o)),d)throw _;return function na(i,o,a,l){const d=i[Nu];throw o[F]&&d.unshift(o[F]),i.message=function wo(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=ce(o);if(Array.isArray(o))d=o.map(ce).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let w=o[_];f.push(_+":"+("string"==typeof w?JSON.stringify(w):ce(w)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(C,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Nu]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{Zn(f),Se(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(ce(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(o,a,l){if(!(o=Q(o)))return!1;let d=Or(o);const f=null==d&&o.ngModule||void 0,_=void 0===f?o:f,w=-1!==l.indexOf(_);if(void 0!==f&&(d=Or(f)),null==d)return!1;if(null!=d.imports&&!w){let M;l.push(_);try{fi(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===M&&(M=[]),M.push(k))})}finally{}if(void 0!==M)for(let k=0;k<M.length;k++){const{ngModule:U,providers:K}=M[k];fi(K,me=>this.processProvider(me,U,K||ct))}}this.injectorDefTypes.add(_);const b=zr(_)||(()=>new _);this.records.set(_,cc(b,xf));const A=d.providers;if(null!=A&&!w){const M=o;fi(A,k=>this.processProvider(k,M,A))}return void 0!==f&&void 0!==o.providers}processProvider(o,a,l){let d=Nf(o=Q(o))?o:Q(o&&o.provide);const f=function z0(i,o,a){return K0(i)?cc(void 0,i.useValue):cc(W0(i),xf)}(o);if(Nf(o)||!0!==o.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=cc(void 0,xf,!0),_.factory=()=>Ct(_.multi),this.records.set(d,_)),d=o,_.multi.push(o)}this.records.set(d,f)}hydrate(o,a){return a.value===xf&&(a.value=G0,a.value=a.factory()),"object"==typeof a.value&&a.value&&function RS(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function $g(i){const o=zt(i),a=null!==o?o.factory:zr(i);if(null!==a)return a;if(i instanceof Sn)throw new Ne(204,!1);if(i instanceof Function)return function ED(i){const o=i.length;if(o>0)throw function Ri(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new Ne(204,!1);const a=function si(i){const o=i&&(i[Bi]||i[rs]);if(o){const a=function As(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ne(204,!1)}function W0(i,o,a){let l;if(Nf(i)){const d=Q(i);return zr(d)||$g(d)}if(K0(i))l=()=>Q(i.useValue);else if(function xS(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Ct(i.deps||[]));else if(function Z0(i){return!(!i||!i.useExisting)}(i))l=()=>Ye(Q(i.useExisting));else{const d=Q(i&&(i.useClass||i.provide));if(!function wD(i){return!!i.deps}(i))return zr(d)||$g(d);l=()=>new d(...Ct(i.deps))}return l}function cc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function K0(i){return null!==i&&"object"==typeof i&&W in i}function Nf(i){return"function"==typeof i}let ca=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return jg({name:""},l,a,"");{const f=null!==(d=a.name)&&void 0!==d?d:"";return jg({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=Eo,i.NULL=new H0,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>Ye(za)}),i.__NG_ELEMENT_ID__=-1,i})();function xt(i,o){ds(uf(i)[1],En())}function dc(i){let o=function Gg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(qr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ne(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=Rf(i.inputs),_.declaredInputs=Rf(i.declaredInputs),_.outputs=Rf(i.outputs);const w=d.hostBindings;w&&ND(i,w);const b=d.viewQuery,A=d.contentQueries;if(b&&MD(i,b),A&&xD(i,A),re(i.inputs,d.inputs),re(i.declaredInputs,d.declaredInputs),re(i.outputs,d.outputs),qr(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const w=f[_];w&&w.ngInherit&&w(i),w===dc&&(a=!1)}}o=Object.getPrototypeOf(o)}!function SD(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Qr(d.hostAttrs,a=Qr(a,d.hostAttrs))}}(l)}function Rf(i){return i===dr?{}:i===ct?[]:i}function MD(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function xD(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function ND(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let xo=null;function Gd(){if(!xo){const i=Gt.Symbol;if(i&&i.iterator)xo=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(xo=l)}}}return xo}function qd(i){return!!zg(i)&&(Array.isArray(i)||!(i instanceof Map)&&Gd()in i)}function zg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ti(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Wg(i,o,a,l){const d=be();return ti(d,js(),o)&&(Vt(),la(Tn(),d,i,o,a,l)),Wg}function iw(i,o,a,l,d,f,_,w){const b=be(),A=Vt(),M=i+20,k=A.firstCreatePass?function PD(i,o,a,l,d,f,_,w,b){const A=o.consts,M=jd(o,i,4,_||null,Kr(A,w));Og(o,a,M,Kr(A,b)),ds(o,M);const k=M.tViews=Hd(2,M,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),k.queries=o.queries.embeddedTView(M)),M}(M,A,b,o,a,l,d,f,_):A.data[M];Zr(k,!1);const U=b[11].createComment("");vg(A,b,U,k),Lr(U,b),Fg(b,b[M]=F0(U,b,U,k)),lu(k)&&Gu(A,b,k),null!=_&&lc(b,k,w)}function yc(i,o=lt.Default){const a=be();return null===a?Ye(i,o):qs(En(),a,Q(i),o)}function U_(){throw new Error("invalid")}function B_(i,o,a){const l=be();return ti(l,js(),o)&&function Ji(i,o,a,l,d,f,_,w){const b=Ir(o,a);let M,A=o.inputs;!w&&null!=A&&(M=A[l])?(mD(i,a,M,l,d),Rs(o)&&function d_(i,o){const a=Dr(o,i);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function C0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,o.value||"",l):d,yn(f)?f.setProperty(b,l,d):Yr(l)||(b.setProperty?b.setProperty(l,d):b[l]=d))}(Vt(),Tn(),l,i,o,l[11],a,!1),B_}function _c(i,o,a,l,d){const _=d?"class":"style";mD(i,a,o.inputs[_],_,l)}function Vf(i,o,a,l){const d=be(),f=Vt(),_=20+i,w=d[11],b=d[_]=Ld(w,o,function hy(){return ht.lFrame.currentNamespace}()),A=f.firstCreatePass?function hw(i,o,a,l,d,f,_){const w=o.consts,A=jd(o,i,2,d,Kr(w,f));return Og(o,a,A,Kr(w,_)),null!==A.attrs&&Ug(A,A.attrs,!1),null!==A.mergedAttrs&&Ug(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(_,f,d,0,o,a,l):f.data[_];Zr(A,!0);const M=A.mergedAttrs;null!==M&&yt(w,b,M);const k=A.classes;null!==k&&Jy(w,b,k);const U=A.styles;return null!==U&&Ao(w,b,U),64!=(64&A.flags)&&vg(f,d,b,A),0===function Ra(){return ht.lFrame.elementDepthCount}()&&Lr(b,d),function vu(){ht.lFrame.elementDepthCount++}(),lu(A)&&(Gu(f,d,A),function Tf(i,o,a){if(Xc(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,A,d)),null!==l&&lc(d,A),Vf}function Uf(){let i=En();Il()?function Dl(){ht.lFrame.isParent=!1}():(i=i.parent,Zr(i,!1));const o=i;!function Eu(){ht.lFrame.elementDepthCount--}();const a=Vt();return a.firstCreatePass&&(ds(a,i),Xc(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function jh(i){return 0!=(16&i.flags)}(o)&&_c(a,o,be(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Qp(i){return 0!=(32&i.flags)}(o)&&_c(a,o,be(),o.stylesWithoutHost,!1),Uf}function Qd(i,o,a,l){return Vf(i,o,a,l),Uf(),Qd}function Yu(){return be()}function rm(i){return!!i&&"function"==typeof i.then}function Bf(i){return!!i&&"function"==typeof i.subscribe}const $_=Bf;function vc(i,o,a,l){const d=be(),f=Vt(),_=En();return function G_(i,o,a,l,d,f,_,w){const b=lu(l),M=i.firstCreatePass&&B0(i),k=o[8],U=U0(o);let K=!0;if(3&l.type||w){const Be=Ir(l,o),tt=w?w(Be):Be,Ie=U.length,ut=w?jt=>w(cn(jt[l.index])):l.index;if(yn(a)){let jt=null;if(!w&&b&&(jt=function Fi(i,o,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===a&&d[f+1]===l){const w=o[7],b=d[f+2];return w.length>b?w[b]:null}"string"==typeof _&&(f+=2)}return null}(i,o,d,l.index)),null!==jt)(jt.__ngLastListenerFn__||jt).__ngNextListenerFn__=f,jt.__ngLastListenerFn__=f,K=!1;else{f=Xd(l,o,k,f,!1);const sn=a.listen(tt,d,f);U.push(f,sn),M&&M.push(d,ut,Ie,Ie+1)}}else f=Xd(l,o,k,f,!0),tt.addEventListener(d,f,_),U.push(f),M&&M.push(d,ut,Ie,_)}else f=Xd(l,o,k,f,!1);const me=l.outputs;let Oe;if(K&&null!==me&&(Oe=me[d])){const Be=Oe.length;if(Be)for(let tt=0;tt<Be;tt+=2){const Vi=o[Oe[tt]][Oe[tt+1]].subscribe(f),iu=U.length;U.push(f,Vi),M&&M.push(d,l.index,iu,-(iu+1))}}}(f,d,d[11],_,i,o,!!a,l),vc}function Jd(i,o,a,l){try{return!1!==a(l)}catch(d){return j0(i,d),!1}}function Xd(i,o,a,l,d){return function f(_){if(_===Function)return l;const w=2&i.flags?Dr(i.index,o):o;0==(32&o[2])&&Sf(w);let b=Jd(o,0,l,_),A=f.__ngNextListenerFn__;for(;A;)b=Jd(o,0,A,_)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function q_(i=1){return function $s(i){return(ht.lFrame.contextLView=function Nl(i,o){for(;i>0;)o=o[15],i--;return o}(i,ht.lFrame.contextLView))[8]}(i)}function K_(i,o,a,l,d){const f=i[a+1],_=null===o;let w=l?Js(f):So(f),b=!1;for(;0!==w&&(!1===b||_);){const M=i[w+1];ZD(i[w],o)&&(b=!0,i[w+1]=l?Dg(M):wg(M)),w=l?Js(M):So(M)}b&&(i[a+1]=l?wg(f):Dg(f))}function ZD(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Zs(i,o)>=0}function nh(i,o){return function Oo(i,o,a,l){const d=be(),f=Vt(),_=function Ai(i){const o=ht.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function ih(i,o,a,l){const d=i.data;if(null===d[a+1]){const f=d[Cr()],_=function rh(i,o){return o>=i.expandoStartIndex}(i,a);(function Dw(i,o){return 0!=(i.flags&(o?16:32))})(f,l)&&null===o&&!_&&(o=!1),o=function QD(i,o,a,l){const d=function zo(i){const o=ht.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=zf(a=X_(null,i,o,a,l),o.attrs,l),f=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=X_(d,i,o,a,l),null===f){let b=function bw(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==So(l))return i[Js(l)]}(i,o,l);void 0!==b&&Array.isArray(b)&&(b=X_(null,i,o,b[1],l),b=zf(b,o.attrs,l),function JD(i,o,a,l){i[Js(a?o.classBindings:o.styleBindings)]=l}(i,o,l,b))}else f=function XD(i,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=zf(l,i[f].hostAttrs,a);return zf(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function _w(i,o,a,l,d,f){let _=f?o.classBindings:o.styleBindings,w=Js(_),b=So(_);i[l]=a;let M,A=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||Zs(k,M)>0)&&(A=!0)}else M=a;if(d)if(0!==b){const U=Js(i[w+1]);i[l+1]=wf(U,w),0!==U&&(i[U+1]=bg(i[U+1],l)),i[w+1]=function l0(i,o){return 131071&i|o<<17}(i[w+1],l)}else i[l+1]=wf(w,0),0!==w&&(i[w+1]=bg(i[w+1],l)),w=l;else i[l+1]=wf(b,0),0===w?w=l:i[b+1]=bg(i[b+1],l),b=l;A&&(i[l+1]=wg(i[l+1])),K_(i,M,l,!0),K_(i,M,l,!1),function vw(i,o,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&Zs(f,o)>=0&&(a[l+1]=Dg(a[l+1]))}(o,M,i,l,f),_=wf(w,b),f?o.classBindings=_:o.styleBindings=_}(d,f,o,a,_,l)}}(f,i,_,l),o!==Mt&&ti(d,_,o)&&function ev(i,o,a,l,d,f,_,w){if(!(3&o.type))return;const b=i.data,A=b[w+1];Ka(function Ig(i){return 1==(1&i)}(A)?tv(b,o,a,d,So(A),_):void 0)||(Ka(f)||function u0(i){return 2==(2&i)}(A)&&(f=tv(b,null,a,d,w,_)),function sc(i,o,a,l,d){const f=yn(i);if(o)d?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:ie.DashCase;if(null==d)f?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),_|=ie.Important),f?i.setStyle(a,l,d,_):a.style.setProperty(l,d,w?"important":"")}}}(l,_,fo(Cr(),a),d,f))}(f,f.data[Cr()],d,d[11],i,d[_+1]=function eC(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ce(Ys(i)))),i}(o,a),l,_)}(i,o,null,!0),nh}function X_(i,o,a,l,d){let f=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(f=o[w],l=zf(l,f.hostAttrs,d),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function zf(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const _=o[f];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Qn(i,_,!!a||o[++f]))}return void 0===i?null:i}function tv(i,o,a,l,d,f){const _=null===o;let w;for(;d>0;){const b=i[d],A=Array.isArray(b),M=A?b[1]:b,k=null===M;let U=a[d+1];U===Mt&&(U=k?ct:void 0);let K=k?Gl(U,l):M===l?U:void 0;if(A&&!Ka(K)&&(K=Gl(b,l)),Ka(K)&&(w=K,_))return w;const me=i[d+1];d=_?Js(me):So(me)}if(null!==o){let b=f?o.residualClasses:o.residualStyles;null!=b&&(w=Gl(b,l))}return w}function Ka(i){return void 0!==i}function nv(i,o=""){const a=be(),l=Vt(),d=i+20,f=l.firstCreatePass?jd(l,d,1,o,null):l.data[d],_=a[d]=function kd(i,o){return yn(i)?i.createText(o):i.createTextNode(o)}(a[11],o);vg(l,a,_,f),Zr(f,!1)}function Kf(i,o,a){const l=be(),d=function Wu(i,o,a,l){return ti(i,js(),a)?o+de(a)+l:Mt}(l,i,o,a);return d!==Mt&&Mo(l,Cr(),d),Kf}const Za=void 0;var aC=["en",[["a","p"],["AM","PM"],Za],[["AM","PM"],Za,Za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Za,"{1} 'at' {0}",Za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mm(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let wc={};function _m(i){const o=function Pw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Em(o);if(a)return a;const l=o.split("-")[0];if(a=Em(l),a)return a;if("en"===l)return aC;throw new Error(`Missing locale data for the locale "${i}".`)}function vm(i){return _m(i)[pt.PluralCase]}function Em(i){return i in wc||(wc[i]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[i]),wc[i]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const ep="en-US";let dv=ep;function ch(i,o,a,l,d){if(i=Q(i),Array.isArray(i))for(let f=0;f<i.length;f++)ch(i[f],o,a,l,d);else{const f=Vt(),_=be();let w=Nf(i)?i:Q(i.provide),b=W0(i);const A=En(),M=1048575&A.providerIndexes,k=A.directiveStart,U=A.providerIndexes>>20;if(Nf(i)||!i.multi){const K=new Wo(b,d,yc),me=_v(w,o,d?M:M+U,k);-1===me?(Gs(Gn(A,_),f,w),Mc(f,i,o.length),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(K),_.push(K)):(a[me]=K,_[me]=K)}else{const K=_v(w,o,M+U,k),me=_v(w,o,M,M+U),Oe=K>=0&&a[K],Be=me>=0&&a[me];if(d&&!Be||!d&&!Oe){Gs(Gn(A,_),f,w);const tt=function vi(i,o,a,l,d){const f=new Wo(i,a,yc);return f.multi=[],f.index=o,f.componentProviders=0,yv(f,d,l&&!a),f}(d?nb:yC,a.length,d,l,b);!d&&Be&&(a[me].providerFactory=tt),Mc(f,i,o.length,0),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(tt),_.push(tt)}else Mc(f,i,K>-1?K:me,yv(a[d?me:K],b,!d&&l));!d&&l&&Be&&a[me].componentProviders++}}}function Mc(i,o,a,l){const d=Nf(o),f=function NS(i){return!!i.useClass}(o);if(d||f){const b=(f?Q(o.useClass):o).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const M=A.indexOf(a);-1===M?A.push(a,[l,b]):A[M+1].push(l,b)}else A.push(a,b)}}}function yv(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function _v(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function yC(i,o,a,l){return Tm(this.multi,[])}function nb(i,o,a,l){const d=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Mi(a,a[1],this.providerFactory.index,l);f=w.slice(0,_),Tm(d,f);for(let b=_;b<w.length;b++)f.push(w[b])}else f=[],Tm(d,f);return f}function Tm(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function vv(i,o=[]){return a=>{a.providersResolver=(l,d)=>function tb(i,o,a){const l=Vt();if(l.firstCreatePass){const d=qr(i);ch(a,l.data,l.blueprint,d,!0),ch(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class op{}class ap{resolveComponentFactory(o){throw function Ev(i){const o=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let up=(()=>{class i{}return i.NULL=new ap,i})();function _C(){return Xi(En(),be())}function Xi(i,o){return new lp(Ir(i,o))}let lp=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=_C,i})();function vC(i){return i instanceof lp?i.nativeElement:i}class il{}let wC=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Am(){const i=be(),a=Dr(En().index,i);return function cp(i){return i[11]}(Di(a)?a:i)}(),i})(),Sm=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class bv{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Iv=new bv("13.2.7"),Nr={};function Mm(i,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(cn(f)),ui(f))for(let w=10;w<f.length;w++){const b=f[w],A=b[1].firstChild;null!==A&&Mm(b[1],b,A,l)}const _=a.type;if(8&_)Mm(i,o,a.child,l);else if(32&_){const w=Je(a,o);let b;for(;b=w();)l.push(b)}else if(16&_){const w=ZE(o,a);if(Array.isArray(w))l.push(...w);else{const b=xn(o[16]);Mm(b[1],b,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class dp{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Mm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ui(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&($y(o,l),ms(a,l))}this._attachedToViewContainer=!1}Hy(this._lView[1],this._lView)}onDestroy(o){l_(this._lView[1],this._lView,null,o)}markForCheck(){Sf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Lg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function y_(i,o,a){Bs(!0);try{Lg(i,o,a)}finally{Bs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mg(i,o){Eg(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=o}}class bC extends dp{constructor(o){super(o),this._view=o}detectChanges(){V0(this._view)}checkNoChanges(){!function gD(i){Bs(!0);try{V0(i)}finally{Bs(!1)}}(this._view)}get context(){return null}}class Dv extends up{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Kt(o);return new Cv(a,this.ngModule)}}function rb(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Cv extends op{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function o0(i){return i.map(s0).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return rb(this.componentDef.inputs)}get outputs(){return rb(this.componentDef.outputs)}create(o,a,l,d){const f=(d=d||this.ngModule)?function DC(i,o){return{get:(a,l,d)=>{const f=i.get(a,Nr,d);return f!==Nr||l===Nr?f:o.get(a,l,d)}}}(o,d.injector):o,_=f.get(il,Ho),w=f.get(Sm,null),b=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=l?function Af(i,o,a){if(yn(i))return i.selectRootElement(o,a===Wt.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(b,l,this.componentDef.encapsulation):Ld(_.createRenderer(null,this.componentDef),A,function IC(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),k=this.componentDef.onPush?576:528,U=function Hg(i,o){return{components:[],scheduler:i||Vy,clean:__,playerHandler:o||null,flags:0}}(),K=Hd(0,null,null,1,0,null,null,null,null,null),me=ac(null,K,U,k,null,null,_,b,w,f);let Oe,Be;po(me);try{const tt=function ha(i,o,a,l,d,f){const _=a[1];a[20]=i;const b=jd(_,20,2,"#host",null),A=b.mergedAttrs=o.hostAttrs;null!==A&&(Ug(b,A,!0),null!==i&&(yt(d,i,A),null!==b.classes&&Jy(d,i,b.classes),null!==b.styles&&Ao(d,i,b.styles)));const M=l.createRenderer(i,o),k=ac(a,w0(o),null,o.onPush?64:16,a[20],b,l,M,f||null,null);return _.firstCreatePass&&(Gs(Gn(b,a),_,o.type),M0(_,b),g_(b,a.length,1)),Fg(a,k),a[20]=k}(M,this.componentDef,me,_,b);if(M)if(l)yt(b,M,["ng-version",Iv.full]);else{const{attrs:Ie,classes:ut}=function a0(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++l]):8===d&&a.push(f);else{if(!bn(d))break;d=f}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ie&&yt(b,M,Ie),ut&&ut.length>0&&Jy(b,M,ut.join(" "))}if(Be=Na(K,20),void 0!==a){const Ie=Be.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const jt=a[ut];Ie.push(null!=jt?Array.from(jt):null)}}Oe=function et(i,o,a,l,d){const f=a[1],_=function p_(i,o,a){const l=En();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),R0(i,l,o,Hu(i,o,1,null),a));const d=Mi(o,i,l.directiveStart,l);Lr(d,o);const f=Ir(l,o);return f&&Lr(f,o),d}(f,a,o);if(l.components.push(_),i[8]=_,d&&d.forEach(b=>b(_,o)),o.contentQueries){const b=En();o.contentQueries(1,_,b.directiveStart)}const w=En();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Hs(w.index),lD(a[1],w,0,w.directiveStart,w.directiveEnd,o),A0(o,_)),_}(tt,this.componentDef,me,U,[xt]),uc(K,me,null)}finally{mo()}return new CC(this.componentType,Oe,Xi(Be,me),me,Be)}}class CC extends class Rn{}{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new bC(d),this.componentType=o}get injector(){return new xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class xc{}class ya{}const Nc=new Map;class Rc extends xc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Dv(this);const l=fn(o);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=w_(o,a,[{provide:xc,useValue:this},{provide:up,useValue:this.componentFactoryResolver}],ce(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=ca.THROW_IF_NOT_FOUND,l=lt.Default){return o===ca||o===xc||o===za?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class es extends ya{constructor(o){super(),this.moduleType=o,null!==fn(o)&&function xm(i){const o=new Set;!function a(l){const d=fn(l,!0),f=d.id;null!==f&&(function pp(i,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(o)} vs ${ce(o.name)}`)}(f,Nc.get(f),l),Nc.set(f,l));const _=g(d.imports);for(const w of _)o.has(w)||(o.add(w),a(w))}(i)}(o)}create(o){return new Rc(this.moduleType,o)}}function mp(i,o,a,l,d,f){const _=o+a;return ti(i,_,d)?function eo(i,o,a){return i[o]=a}(i,_+1,f?l.call(f,d):l(d)):function dh(i,o){const a=i[o];return a===Mt?void 0:a}(i,_+1)}function ol(i,o){const a=Vt();let l;const d=i+20;a.firstCreatePass?(l=function gb(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const f=l.factory||(l.factory=zr(l.type)),_=Zn(yc);try{const w=di(!1),b=f();return di(w),function x_(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,be(),d,b),b}finally{Zn(_)}}function al(i,o,a){const l=i+20,d=be(),f=function Ti(i,o){return i[o]}(d,l);return function Xa(i,o){return i[1].data[o].pure}(d,l)?mp(d,function gr(){const i=ht.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),o,f.transform,a,f):f.transform(a)}function Mv(i){return o=>{setTimeout(i,void 0,o)}}const _n=class AC extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,f,_;let w=o,b=a||(()=>null),A=l;if(o&&"object"==typeof o){const k=o;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),b=null===(f=k.error)||void 0===f?void 0:f.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(b=Mv(b),w&&(w=Mv(w)),A&&(A=Mv(A)));const M=super.subscribe({next:w,error:b,complete:A});return o instanceof Z.w0&&o.add(M),M}};function Rm(){return this._results[Gd()]()}class fh{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Gd(),l=fh.prototype;l[a]||(l[a]=Rm)}get changes(){return this._changes||(this._changes=new _n)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Ar(o);(this._changesDetected=!function Ul(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let yp=(()=>{class i{}return i.__NG_ELEMENT_ID__=vb,i})();const xv=yp,SC=class extends xv{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=ac(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),uc(a,l,o),new dp(l)}};function vb(){return _p(En(),be())}function _p(i,o){return 4&i.type?new SC(o,i,Xi(i,o)):null}let ul=(()=>{class i{}return i.__NG_ELEMENT_ID__=Pc,i})();function Pc(){return Om(En(),be())}const Eb=ul,Nv=class extends Eb{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Xi(this._hostTNode,this._hostLView)}get injector(){return new xi(this._hostTNode,this._hostLView)}get parentInjector(){const o=hi(this._hostTNode,this._hostLView);if(gd(o)){const a=Si(o,this._hostLView),l=gn(o);return new xi(a[1].data[l+8],a)}return new xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Rv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,f){const _=o&&!function ea(i){return"function"==typeof i}(o);let w;if(_)w=a;else{const k=a||{};w=k.index,l=k.injector,d=k.projectableNodes,f=k.ngModuleRef}const b=_?o:new Cv(Kt(o)),A=l||this.parentInjector;if(!f&&null==b.ngModule){const U=(_?A:this.parentInjector).get(xc,null);U&&(f=U)}const M=b.create(A,d,void 0,f);return this.insert(M.hostView,w),M}insert(o,a){const l=o._lView,d=l[1];if(function yu(i){return ui(i[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const k=l[3],U=new Nv(k,k[6],k[3]);U.detach(U.indexOf(o))}}const f=this._adjustIndex(a),_=this._lContainer;!function jy(i,o,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=o),l<f-10?(o[4]=a[d],Bl(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function Vd(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const w=o[19];null!==w&&w.insertView(i),o[2]|=128}(d,l,_,f);const w=Ky(f,_),b=l[11],A=Bu(b,_[7]);return null!==A&&function _f(i,o,a,l,d,f){l[0]=d,l[6]=o,Eg(i,l,a,1,d,f)}(d,_[6],b,l,A,w),o.attachToViewContainerRef(),Bl(kc(_),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Rv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=$y(this._lContainer,a);l&&(ms(kc(this._lContainer),a),Hy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=$y(this._lContainer,a);return l&&null!=ms(kc(this._lContainer),a)?new dp(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Rv(i){return i[8]}function kc(i){return i[8]||(i[8]=[])}function Om(i,o){let a;const l=o[i.index];if(ui(l))a=l;else{let d;if(8&i.type)d=cn(l);else{const f=o[11];d=f.createComment("");const _=Ir(i,o);_s(f,Bu(f,_),d,function rD(i,o){return yn(i)?i.nextSibling(o):o.nextSibling}(f,_),!1)}o[i.index]=a=F0(l,o,d,i),Fg(o,a)}return new Nv(a,i,o)}class Pm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Pm(this.queryList)}setDirty(){this.queryList.setDirty()}}class km{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new km(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==yh(o,a).matches&&this.queries[a].setDirty()}}class eu{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Wn{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new Wn(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ph{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new ph(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,ii(a,f)),this.matchTNodeWithReadOption(o,a,Yo(a,o,f,!1,!1))}else l===yp?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Yo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===lp||d===ul||d===yp&&4&a.type)this.addMatch(a.index,-2);else{const f=Yo(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function ii(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function wb(i,o,a,l){return-1===a?function On(i,o){return 11&i.type?Xi(i,o):4&i.type?_p(i,o):null}(o,i):-2===a?function gh(i,o,a){return a===lp?Xi(o,i):a===yp?_p(o,i):a===ul?Om(o,i):void 0}(i,o,l):Mi(i,i[1],a,o)}function bb(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const f=i.data,_=a.matches,w=[];for(let b=0;b<_.length;b+=2){const A=_[b];w.push(A<0?null:wb(o,f[A],_[b+1],a.metadata.read))}d.matches=w}return d.matches}function ts(i,o,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const _=bb(i,o,d,a);for(let w=0;w<f.length;w+=2){const b=f[w];if(b>0)l.push(_[w/2]);else{const A=f[w+1],M=o[-b];for(let k=10;k<M.length;k++){const U=M[k];U[17]===U[3]&&ts(U[1],U,A,l)}if(null!==M[9]){const k=M[9];for(let U=0;U<k.length;U++){const K=k[U];ts(K[1],K,A,l)}}}}}return l}function Ib(i){const o=be(),a=Vt(),l=Sl();Ml(l+1);const d=yh(a,l);if(i.dirty&&Ls(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?ts(a,o,l,[]):bb(a,o,d,l);i.reset(f,vC),i.notifyOnChanges()}return!0}return!1}function mh(i,o,a,l){const d=Vt();if(d.firstCreatePass){const f=En();(function Cb(i,o,a){null===i.queries&&(i.queries=new Wn),i.queries.track(new ph(o,a))})(d,new eu(o,a,l),f.index),function Fm(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function dn(i,o,a){const l=new fh(4==(4&a));l_(i,o,l,l.destroy),null===o[19]&&(o[19]=new km),o[19].queries.push(new Pm(l))}(d,be(),a)}function Db(){return function xC(i,o){return i[19].queries[o].queryList}(be(),Sl())}function yh(i,o){return i.queries.getByIndex(o)}function Bm(...i){}const Vb=new Sn("Application Initializer");let qv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Bm,this.reject=Bm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(rm(f))a.push(f);else if($_(f)){const _=new Promise((w,b)=>{f.subscribe({complete:w,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ye(Vb,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ub=new Sn("AppId",{providedIn:"root",factory:function Bb(){return`${zv()}${zv()}${zv()}`}});function zv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jb=new Sn("Platform Initializer"),$b=new Sn("Platform ID"),Wv=new Sn("appBootstrapListener");let Kv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();const jm=new Sn("LocaleId",{providedIn:"root",factory:()=>Rt(jm,lt.Optional|lt.SkipSelf)||function UC(){return"undefined"!=typeof $localize&&$localize.locale||ep}()}),Hb=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class BC{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Ip=(()=>{class i{compileModuleSync(a){return new es(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=g(fn(a).declarations).reduce((_,w)=>{const b=Kt(w);return b&&_.push(new Cv(b)),_},[]);return new BC(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Bc=(()=>Promise.resolve(0))();function $m(i){"undefined"==typeof Zone?Bc.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class no{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _n(!1),this.onMicrotaskEmpty=new _n(!1),this.onStable=new _n(!1),this.onError=new _n(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Yv(){let i=Gt.requestAnimationFrame,o=Gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Jv(i){const o=()=>{!function Qv(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Gt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,va(i),i.isCheckStableRunning=!0,Dp(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),va(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,_,w)=>{try{return Xv(i),a.invokeTask(d,f,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),Gb(i)}},onInvoke:(a,l,d,f,_,w,b)=>{try{return Xv(i),a.invoke(d,f,_,w,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),Gb(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,va(i),Dp(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!no.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(no.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,o,$r,Bm,Bm);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const $r={};function Dp(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function va(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Xv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Gb(i){i._nesting--,Dp(i)}class qb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _n,this.onMicrotaskEmpty=new _n,this.onStable=new _n,this.onError=new _n}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let Cp=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{no.assertNotInAngularZone(),$m(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$m(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ye(no))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),ll=(()=>{class i{constructor(){this._applications=new Map,$c.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return $c.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();class jc{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function wh(i){$c=i}let ro,$c=new jc;const Kb=new Sn("AllowMultipleToken");class Zb{constructor(o,a){this.name=o,this.token=a}}function Hm(i,o,a=[]){const l=`Platform: ${o}`,d=new Sn(l);return(f=[])=>{let _=Qb();if(!_||_.injector.get(Kb,!1))if(i)i(a.concat(f).concat({provide:d,useValue:!0}));else{const w=a.concat(f).concat({provide:d,useValue:!0},{provide:Bg,useValue:"platform"});!function Yb(i){if(ro&&!ro.destroyed&&!ro.injector.get(Kb,!1))throw new Ne(400,"");ro=i.get(tE);const o=i.get(jb,null);o&&o.forEach(a=>a())}(ca.create({providers:w,name:l}))}return function Tp(i){const o=Qb();if(!o)throw new Ne(401,"");return o}()}}function Qb(){return ro&&!ro.destroyed?ro:null}let tE=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function jC(i,o){let a;return a="noop"===i?new qb:("zone.js"===i?void 0:i)||new no({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:no,useValue:w}];return w.run(()=>{const A=ca.create({providers:b,parent:this.injector,name:a.moduleType.name}),M=a.create(A),k=M.injector.get(Mr,null);if(!k)throw new Ne(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:K=>{k.handleError(K)}});M.onDestroy(()=>{Ea(this._modules,M),U.unsubscribe()})}),function $C(i,o,a){try{const l=a();return rm(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(k,w,()=>{const U=M.injector.get(qv);return U.runInitializers(),U.donePromise.then(()=>(function Lw(i){an(i,"Expected localeId to be defined"),"string"==typeof i&&(dv=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(jm,ep)||ep),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=Jb({},l);return function eE(i,o,a){const l=new es(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(Hc);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ye(ca))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();function Jb(i,o){return Array.isArray(o)?o.reduce(Jb,i):Object.assign(Object.assign({},i),o)}let Hc=(()=>{class i{constructor(a,l,d,f,_){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),b=new O.y(A=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{no.assertNotInAngularZone(),$m(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{no.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{M.unsubscribe(),k.unsubscribe()}});this.isStable=(0,oe.T)(w,b.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ne(405,"");let d;d=a instanceof op?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const f=function Wb(i){return i.isBoundToModule}(d)?void 0:this._injector.get(xc),w=d.create(ca.NULL,[],l||d.selector,f),b=w.location.nativeElement,A=w.injector.get(Cp,null),M=A&&w.injector.get(ll);return A&&M&&M.registerApplication(b,A),w.onDestroy(()=>{this.detachView(w.hostView),Ea(this.components,w),M&&M.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Ea(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Wv,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ye(no),Ye(ca),Ye(Mr),Ye(up),Ye(qv))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ea(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let eI=!0,tI=!1;function nE(){return tI=!0,eI}function Ih(){if(tI)throw new Error("Cannot enable prod mode after platform setup.");eI=!1}let Gm=(()=>{class i{}return i.__NG_ELEMENT_ID__=qm,i})();function qm(i){return function nI(i,o,a){if(Rs(i)&&!a){const l=Dr(i.index,o);return new dp(l,l)}return 47&i.type?new dp(o[16],o):null}(En(),be(),16==(16&i))}class oI{constructor(){}supports(o){return qd(o)}create(o){return new aI(o)}}const WC=(i,o)=>o;class aI{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||WC}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<lE(l,d,f)?a:l,w=lE(_,d,f),b=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{f||(f=[]);const A=w-d,M=b-d;if(A!=M){for(let U=0;U<A;U++){const K=U<f.length?f[U]:f[U]=0,me=K+U;M<=me&&me<A&&(f[U]=K+1)}f[_.previousIndex]=M-A}}w!==b&&o(_,w,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!qd(o))throw new Ne(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)f=o[w],_=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,w),l=!0),a=a._next}else d=0,function OD(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Gd()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new qc(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new uE),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class qc{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ap{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class uE{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new Ap,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lE(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class uI{constructor(){}supports(o){return o instanceof Map||zg(o)}create(){return new lI}}class lI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||zg(o)))throw new Ne(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const l=new cE(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class cE{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Km(){return new zc([new oI])}let zc=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Km()),deps:[[i,new bo,new gi]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ne(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Km}),i})();function Zm(){return new hE([new uI])}let hE=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Zm()),deps:[[i,new bo,new gi]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Ne(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Zm}),i})();const pE=Hm(null,"core",[{provide:$b,useValue:"unknown"},{provide:tE,deps:[ca]},{provide:ll,deps:[]},{provide:Kv,deps:[]}]);let YC=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ye(Hc))},i.\u0275mod=Y({type:i}),i.\u0275inj=Qt({}),i})()},3942:(ot,Te,P)=>{P.d(Te,{Z:()=>Ne});var m=P(2090),Z=P(4859),O=P(9681),oe=P(1877);class X{constructor(de,we){this._delegate=de,this.firebase=we,(0,O._addComponent)(de,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(de,we=O._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(de);return!Ke.isInitialized()&&"EXPLICIT"===(null===(Xe=Ke.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:we})}_removeServiceInstance(de,we=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(we)}_addComponent(de){(0,O._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,O._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ue(){const Le=function ce(Le){const de={},we={__esModule:!0,initializeApp:function De(je,ne={}){const We=O.initializeApp(je,ne);if((0,m.r3)(de,We.name))return de[We.name];const J=new Le(We,we);return de[We.name]=J,J},app:Ke,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(je){const ne=je.name,We=ne.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const J=(se=Ke())=>{if("function"!=typeof se[We])throw re.create("invalid-app-argument",{appName:ne});return se[We]()};void 0!==je.serviceProps&&(0,m.ZB)(J,je.serviceProps),we[We]=J,Le.prototype[We]=function(...se){return this._getService.bind(this,ne).apply(this,je.multipleInstances?se:[])}}return"PUBLIC"===je.type?we[We]:null},removeApp:function Xe(je){delete de[je]},useAsService:function He(je,ne){return"serverAuth"===ne?null:ne},modularAPIs:O}};function Ke(je){if(!(0,m.r3)(de,je=je||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:je});return de[je]}return we.default=we,Object.defineProperty(we,"apps",{get:function ye(){return Object.keys(de).map(je=>de[je])}}),Ke.App=Le,we}(X);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function de(we){(0,m.ZB)(Le,we)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Le}(),$=new oe.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=j;!function Ae(Le){(0,O.registerVersion)("@firebase/app-compat","0.1.22",Le)}()},9681:(ot,Te,P)=>{P.r(Te),P.d(Te,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Or,_DEFAULT_ENTRY_NAME:()=>Zt,_addComponent:()=>tr,_addOrOverwriteComponent:()=>Dn,_apps:()=>Ge,_clearComponents:()=>zt,_components:()=>qt,_getProvider:()=>bi,_registerComponent:()=>Xt,_removeServiceInstance:()=>Qt,deleteApp:()=>is,getApp:()=>Pr,getApps:()=>rs,initializeApp:()=>Bi,onLog:()=>nr,registerVersion:()=>Gr,setLogLevel:()=>Zn});var m=P(5861),Z=P(4859),O=P(1877),oe=P(2090);class X{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function fe(Ze){const Ce=Ze.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(Qe)){const dt=Qe.getImmediate();return`${dt.library}/${dt.version}`}return null}).filter(Qe=>Qe).join(" ")}}const re="@firebase/app",ue=new O.Yd("@firebase/app"),Zt="[DEFAULT]",an={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ge=new Map,qt=new Map;function tr(Ze,Ce){try{Ze.container.addComponent(Ce)}catch(Qe){ue.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Ze.name}`,Qe)}}function Dn(Ze,Ce){Ze.container.addOrOverwriteComponent(Ce)}function Xt(Ze){const Ce=Ze.name;if(qt.has(Ce))return ue.debug(`There were multiple attempts to register component ${Ce}.`),!1;qt.set(Ce,Ze);for(const Qe of Ge.values())tr(Qe,Ze);return!0}function bi(Ze,Ce){const Qe=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),Ze.container.getProvider(Ce)}function Qt(Ze,Ce,Qe=Zt){bi(Ze,Ce).clearInstance(Qe)}function zt(){qt.clear()}const si=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class As{constructor(Ce,Qe,dt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=dt,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}const Or="9.6.11";function Bi(Ze,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const Qe=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},Ce),dt=Qe.name;if("string"!=typeof dt||!dt)throw si.create("bad-app-name",{appName:String(dt)});const $t=Ge.get(dt);if($t){if((0,oe.vZ)(Ze,$t.options)&&(0,oe.vZ)(Qe,$t.config))return $t;throw si.create("duplicate-app",{appName:dt})}const Lt=new Z.H0(dt);for(const L of qt.values())Lt.addComponent(L);const B=new As(Ze,Qe,Lt);return Ge.set(dt,B),B}function Pr(Ze=Zt){const Ce=Ge.get(Ze);if(!Ce)throw si.create("no-app",{appName:Ze});return Ce}function rs(){return Array.from(Ge.values())}function is(Ze){return lt.apply(this,arguments)}function lt(){return(lt=(0,m.Z)(function*(Ze){const Ce=Ze.name;Ge.has(Ce)&&(Ge.delete(Ce),yield Promise.all(Ze.container.getProviders().map(Qe=>Qe.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function Gr(Ze,Ce,Qe){var dt;let $t=null!==(dt=an[Ze])&&void 0!==dt?dt:Ze;Qe&&($t+=`-${Qe}`);const Lt=$t.match(/\s|\//),B=Ce.match(/\s|\//);if(Lt||B){const L=[`Unable to register library "${$t}" with version "${Ce}":`];return Lt&&L.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),Lt&&B&&L.push("and"),B&&L.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}Xt(new Z.wA(`${$t}-version`,()=>({library:$t,version:Ce}),"VERSION"))}function nr(Ze,Ce){if(null!==Ze&&"function"!=typeof Ze)throw si.create("invalid-log-argument");(0,O.Am)(Ze,Ce)}function Zn(Ze){(0,O.Ub)(Ze)}const vn="firebase-heartbeat-store";let rr=null;function Ss(){return rr||(rr=(0,oe.X3)("firebase-heartbeat-database",1,(Ze,Ce)=>{0===Ce&&Ze.createObjectStore(vn)}).catch(Ze=>{throw si.create("storage-open",{originalErrorMessage:Ze.message})})),rr}function Wt(){return(Wt=(0,m.Z)(function*(Ze){try{return(yield Ss()).transaction(vn).objectStore(vn).get(cr(Ze))}catch(Ce){throw si.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function rt(Ze,Ce){return vt.apply(this,arguments)}function vt(){return(vt=(0,m.Z)(function*(Ze,Ce){try{const dt=(yield Ss()).transaction(vn,"readwrite");return yield dt.objectStore(vn).put(Ce,cr(Ze)),dt.complete}catch(Qe){throw si.create("storage-set",{originalErrorMessage:Qe.message})}})).apply(this,arguments)}function cr(Ze){return`${Ze.name}!${Ze.options.appId}`}class oo{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new ct(Qe),this._heartbeatsCachePromise=this._storage.read().then(dt=>(this._heartbeatsCache=dt,dt))}triggerHeartbeat(){var Ce=this;return(0,m.Z)(function*(){const dt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=Er();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==$t&&!Ce._heartbeatsCache.heartbeats.some(Lt=>Lt.date===$t))return Ce._heartbeatsCache.heartbeats.push({date:$t,agent:dt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Lt=>{const B=new Date(Lt.date).valueOf();return Date.now()-B<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,m.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Qe=Er(),{heartbeatsToSend:dt,unsentEntries:$t}=function dr(Ze,Ce=1024){const Qe=[];let dt=Ze.slice();for(const $t of Ze){const Lt=Qe.find(B=>B.agent===$t.agent);if(Lt){if(Lt.dates.push($t.date),wr(Qe)>Ce){Lt.dates.pop();break}}else if(Qe.push({agent:$t.agent,dates:[$t.date]}),wr(Qe)>Ce){Qe.pop();break}dt=dt.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:dt}}(Ce._heartbeatsCache.heartbeats),Lt=(0,oe.L)(JSON.stringify({version:2,heartbeats:dt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Qe,$t.length>0?(Ce._heartbeatsCache.heartbeats=$t,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Lt})()}}function Er(){return(new Date).toISOString().substring(0,10)}class ct{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,m.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function Ca(Ze){return Wt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Qe=this;return(0,m.Z)(function*(){var dt;if(yield Qe._canUseIndexedDBPromise){const Lt=yield Qe.read();return rt(Qe.app,{lastSentHeartbeatDate:null!==(dt=Ce.lastSentHeartbeatDate)&&void 0!==dt?dt:Lt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Qe=this;return(0,m.Z)(function*(){var dt;if(yield Qe._canUseIndexedDBPromise){const Lt=yield Qe.read();return rt(Qe.app,{lastSentHeartbeatDate:null!==(dt=Ce.lastSentHeartbeatDate)&&void 0!==dt?dt:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...Ce.heartbeats]})}})()}}function wr(Ze){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Ze})).length}!function Bt(Ze){Xt(new Z.wA("platform-logger",Ce=>new X(Ce),"PRIVATE")),Xt(new Z.wA("heartbeat",Ce=>new oo(Ce),"PRIVATE")),Gr(re,"0.7.21",Ze),Gr(re,"0.7.21","esm2017"),Gr("fire-js","")}("")},4859:(ot,Te,P)=>{P.d(Te,{wA:()=>O,H0:()=>ce});var m=P(5861),Z=P(2090);class O{constructor(j,$,Q){this.name=j,this.instanceFactory=$,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class X{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const Q=new Z.BH;if(this.instancesDeferred.set($,Q),this.isInitialized($)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:$});ze&&Q.resolve(ze)}catch(ze){}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const Q=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),ze=null!==($=null==j?void 0:j.optional)&&void 0!==$&&$;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ae){if(ze)return null;throw Ae}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function re(ue){return"EAGER"===ue.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch($){}for(const[$,Q]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier($);try{const Ae=this.getOrInitializeService({instanceIdentifier:ze});Q.resolve(Ae)}catch(Ae){}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,m.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...$.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,Q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:Q,options:$});for(const[Ae,Ne]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ae)&&Ne.resolve(ze);return ze}onInit(j,$){var Q;const ze=this.normalizeInstanceIdentifier($),Ae=null!==(Q=this.onInitCallbacks.get(ze))&&void 0!==Q?Q:new Set;Ae.add(j),this.onInitCallbacks.set(ze,Ae);const Ne=this.instances.get(ze);return Ne&&j(Ne,ze),()=>{Ae.delete(j)}}invokeOnInitCallbacks(j,$){const Q=this.onInitCallbacks.get($);if(Q)for(const ze of Q)try{ze(j,$)}catch(Ae){}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let Q=this.instances.get(j);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=j,ue===oe?void 0:ue),options:$}),this.instances.set(j,Q),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(Q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Q)}catch(ze){}var ue;return Q||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new X(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Te,P)=>{P.d(Te,{in:()=>Z,Yd:()=>re,Ub:()=>ce,Am:()=>ue});const m=[];var Z=(()=>{return(j=Z||(Z={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Z;var j})();const O={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},oe=Z.INFO,X={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},fe=(j,$,...Q)=>{if($<j.logLevel)return;const ze=(new Date).toISOString(),Ae=X[$];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ae](`[${ze}]  ${j.name}:`,...Q)};class re{constructor($){this.name=$,this._logLevel=oe,this._logHandler=fe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Z))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...$),this._logHandler(this,Z.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...$),this._logHandler(this,Z.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...$),this._logHandler(this,Z.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...$),this._logHandler(this,Z.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...$),this._logHandler(this,Z.ERROR,...$)}}function ce(j){m.forEach($=>{$.setLogLevel(j)})}function ue(j,$){for(const Q of m){let ze=null;$&&$.level&&(ze=O[$.level]),Q.userLogHandler=null===j?null:(Ae,Ne,...Le)=>{const de=Le.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(Xe){return null}}).filter(we=>we).join(" ");Ne>=(null!=ze?ze:Ae.logLevel)&&j({level:Z[Ne].toLowerCase(),message:de,args:Le,type:Ae.name})}}}},5861:(ot,Te,P)=>{function m(O,oe,X,fe,re,ce,ue){try{var j=O[ce](ue),$=j.value}catch(Q){return void X(Q)}j.done?oe($):Promise.resolve($).then(fe,re)}function Z(O){return function(){var oe=this,X=arguments;return new Promise(function(fe,re){var ce=O.apply(oe,X);function ue($){m(ce,fe,re,ue,j,"next",$)}function j($){m(ce,fe,re,ue,j,"throw",$)}ue(void 0)})}}P.d(Te,{Z:()=>Z})}},ot=>{ot(ot.s=1834)}]);